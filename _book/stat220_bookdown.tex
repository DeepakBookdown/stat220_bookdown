% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Stat 220 Introduction to Data Science},
  pdfauthor={Deepak Bastola},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Stat 220 Introduction to Data Science}
\author{Deepak Bastola}
\date{2023-05-03}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{course-overview}{%
\chapter*{Course overview}\label{course-overview}}
\addcontentsline{toc}{chapter}{Course overview}

Greetings and welcome to Introduction to Data Science! In this course, we will delve into the computational aspects of data analysis, covering topics such as data acquisition, management, and visualization tools. Throughout this course, we will emphasize the principles of data-scientific, reproducible research and dynamic programming, utilizing the R/RStudio ecosystem.

If you have taken Stat 120, 230, or 250 at Carleton, you will find yourself well-equipped to handle the material. However, it is important to refresh your R and R-markdown skills before the start of the class. Specifically, I expect all students to be able to load a data set into R, calculate basic summary statistics, and perform basic exploratory data analysis. In the first week of class, we will delve into Git and GitHub version control, though prior exposure to these topics is not necessary.

\hypertarget{learning-objectives}{%
\section{Learning Objectives}\label{learning-objectives}}

\begin{itemize}
\tightlist
\item
  Develop research questions that can be answered by data. Import/scrape data into R and reshape it to the form necessary for analysis.
\item
  Manipulate common types of data, including numeric, categorical (factors), text, date-times, geo-location variables in order to provide insight into your data and facilitate analysis.
\item
  Explore data using both graphical and numeric methods to provide insight and uncover relationships/patterns.
\item
  Utilize fundamental programming concepts such as iteration, conditional execution, and functions to streamline your code.
\item
  Build, tune, use, and evaluate basic statistical learning models to uncover clusters and classify observations.
\item
  Draw informed conclusions from your data and communicate your findings using both written and interactive platforms.
\end{itemize}

\hypertarget{course-requirements}{%
\section{Course Requirements}\label{course-requirements}}

\hypertarget{part-set-up-instructions}{%
\part*{Set-up Instructions}\label{part-set-up-instructions}}
\addcontentsline{toc}{part}{Set-up Instructions}

\hypertarget{rstudio}{%
\chapter{What is R, RStudio, and RMarkdown?}\label{rstudio}}

R is a free and open source statistical programming language that facilitates statistical computation. There are a myriad of application that can be done in R, thanks to a huge online support community and dedicated packages. However, R has no graphical user interface and it has to be run by typing commands into a text interface.

\hypertarget{what-is-rstudio}{%
\section{What is RStudio?}\label{what-is-rstudio}}

RStudio provides graphical interface to R! You can think of RStudio as a graphical front-end to R that that provides extra functionality. The use of the R programming language with the RStudio interface is an essential component of this course.

\hypertarget{r-studio-server}{%
\section{R Studio Server}\label{r-studio-server}}

The quickest way to get started is to go to \url{https://maize2.mathcs.carleton.edu}, which opens an R Studio window in your web browser. Once logged in, I recommend that you do the following:

\begin{itemize}
\tightlist
\item
  Step 1: Create a folder for this course where you can save all of your work. In the Files window, click on New Folder.
\item
  Step 2: Click on Tools -\textgreater{} Global Options -\textgreater{} R Markdown. Then uncheck the box that says ``Show output inline\ldots{}''
\end{itemize}

(It is also possible to download RStudio on your own laptop. Instructions may be found at the end of this document.)

\hypertarget{rrstudio}{%
\section{R/RStudio}\label{rrstudio}}

The use of the R programming language with the RStudio interface is an
essential component of this course. You have two options for using
RStudio:

\begin{itemize}
\item
  The \textbf{server version} of RStudio on the web at
  (\url{https://maize2.mathcs.carleton.edu}). The advantage of using the
  server version is that all of your work will be stored in the cloud,
  where it is automatically saved and backed up. This means that you
  can access your work from any computer on campus using a web
  browser. This server may run slow during peak days/hours. I also recommend
  you to download a local version of R server in your computer in case of rare outages.
\item
  A \textbf{local version} of RStudio installed on your machine. This
  option is highly recommended due to the computational resources this
  course demands. Using this version you can only store your files in your local machine. Additionally, we can save our work on GitHub. We will learn how to use GitHub in the beginning of the course. Both R and RStudio are free and open-source. Please make sure that you have recently updated both R and RStudio.
\end{itemize}

\hypertarget{installing-rrstudio-not-needed-if-you-are-using-the-maize-server}{%
\section{\texorpdfstring{\textbf{Installing R/RStudio (not needed if you are using the maize server)}}{Installing R/RStudio (not needed if you are using the maize server)}}\label{installing-rrstudio-not-needed-if-you-are-using-the-maize-server}}

\begin{quote}
Download the latest version of R: \url{https://cran.r-project.org/}
Download the free Rstudio desktop version: \url{https://www.rstudio.com/products/rstudio/download/}
\end{quote}

Use the default download and install options for each. For R, download the ``precompiled binary'' distribution rather than the source code

\textbf{Updating R/RStudio (not needed if you are using the maize server)}

If you have used a local version of R/RStudio before and it is still installed on your machine, then you should make sure that you have the most recent versions of each program.

\begin{itemize}
\item
  To check your version of R, run the command \texttt{getRversion()} and compare your version to the newest version posted on \url{https://cran.r-project.org/}. If you need an update, then install the newer version using the installation directions above.
\item
  In RStudio, check for updates with the menu option \texttt{Help\ \textgreater{}\ Check\ for\ updates}. Follow directions if an update is needed.
\end{itemize}

** Did it work? (A sanity check after your install/update) **

Do whatever is appropriate for your operating system to launch
RStudio. You should get a window similar to the screenshot you see
\href{https://www.rstudio.com/wp-content/uploads/2014/04/rstudio-workbench.png}{here},
but yours will be more boring because you haven't written any code
or made any figures yet!

Put your cursor in the pane labeled \emph{Console}, which is where you
interact with the live R process. Create a simple object with code
like \texttt{x\ \textless{}-\ 2\ *\ 4} (followed by enter or return). Then inspect the
\texttt{x} object by typing \texttt{x} followed by enter or return. You should see
the value \texttt{8} printed. If this happened, you've succeeded in
installing R and RStudio!

\hypertarget{what-is-rmarkdown}{%
\section{What is RMarkdown?}\label{what-is-rmarkdown}}

An R Markdown file (.Rmd file) combines R commands and written analyses, which are `knit' together into an HTML, PDF, or Microsoft Word document.

An R Markdown file contains three essential elements:

\begin{itemize}
\item
  Header: The header (top) of the file contains information like the document title, author, date and your preferred output format (pdf\_document, word\_document, or html\_document).
\item
  Written analysis: You write up your analysis after the header and embed R code where needed. The online help below shows ways to add formatting details like bold words, lists, section labels, etc to your final pdf/word/html document. For example, adding ** before and after a word will bold that word in your compiled document.
\item
  R chunks: R chunks contain the R commands that you want evaluated. You embed these chunks within your written analysis and they are evaluated when you compile the document.
\end{itemize}

\hypertarget{install-latex-for-knitting-r-markdown-documents-to-pdf}{%
\section{Install LaTeX (for knitting R Markdown documents to PDF):}\label{install-latex-for-knitting-r-markdown-documents-to-pdf}}

You need a Latex compiler to create a pdf document from a R Markdown file. If you use the maize server, you don't need to install anything. If you are using a local RStudio, you should install a Latex compiler. Below are the recommended installers for Windows and Mac:

\begin{itemize}
\item
  \href{https://www.tug.org/mactex/}{MacTeX} for Mac (3.2GB)
\item
  \href{https://miktex.org/download}{MiKTeX} for Windows (190MB)
\item
  Alternatively, you can install the \texttt{tinytex} R package by running
  \texttt{install.packages("tinytex")} in the console.
\end{itemize}

\hypertarget{updating-rrstudio-not-needed-if-you-are-using-the-maize2-server}{%
\section{Updating R/RStudio (not needed if you are using the maize2 server)}\label{updating-rrstudio-not-needed-if-you-are-using-the-maize2-server}}

If you have used a local version of R/RStudio before and it is still installed on your machine, then you should make sure that you have the most recent versions of each program.

\begin{itemize}
\item
  To check your version of R, run the command \texttt{getRversion()} and compare your version to the newest version posted on \url{https://cran.r-project.org/}. If you need an update, then install the newer version using the installation directions above.
\item
  In RStudio, check for updates with the menu option \texttt{Help\ \textgreater{}\ Check\ for\ updates}. Follow directions if an update is needed.
\end{itemize}

\hypertarget{opening-a-new-file}{%
\section{Opening a new file}\label{opening-a-new-file}}

If using Rstudio on your computer, using the \textbf{File\textgreater Open File} menu to find and open this .Rmd file.

If using Maize Rstudio from your browser:

\begin{itemize}
\item
  In the Files tab, select \textbf{Upload} and \textbf{Choose File} to find the .Rmd that you downloaded. Click \emph{OK} to upload to your course folder/location in the maize server account.
\item
  Click on the .Rmd file in the appropriate folder to open the file.
\end{itemize}

\hypertarget{running-codes-and-knitting-.rmd-files}{%
\section{Running codes and knitting .Rmd files:}\label{running-codes-and-knitting-.rmd-files}}

\begin{itemize}
\item
  You can run a line of code by placing your cursor in the line of code and clicking \textbf{Run Selected Line(s)}
\item
  You can run an entire chunk by clicking the green triangle on the right side of the code chunk.
\item
  After each small edit or code addition, \textbf{Knit} your Markdown. If you wait until the end to Knit, it will be harder to find errors in your work.
\item
  Format output type: You can use any of pdf\_document, html\_document type, or word\_document type.
\item
  \textbf{Maize users}: You may also need to allow for ``pop-up'' in your web browser when knitting documents.
\end{itemize}

\hypertarget{few-more-instructions}{%
\section{Few More Instructions}\label{few-more-instructions}}

The default setting in Rstudio when you are running chunks is that the ``output'' (numbers, graphs) are
shown \textbf{inline} within the Markdown Rmd. If you prefer to have your plots appear on the right of the console and not below the chunk, then change the settings as follows:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Select Tools \textgreater{} Global Options.
\item
  Click the R Markdown section and uncheck (if needed) the option Show output inline for all
  R Markdown documents.
\item
  Click OK.
\end{enumerate}

Now try running R chunks in the .Rmd file to see the difference. You can recheck this box if you prefer
the default setting.

\hypertarget{vpn}{%
\section{VPN}\label{vpn}}

If you plan to do any work off campus this term, you need to install Carleton's VPN. This will allow you to access the \textbf{maize} server (if needed).

\textbf{Installing the GlobalProtect VPN}

Follow the directions \href{https://wiki.carleton.edu/display/itskb/GlobalProtect+VPN}{here} to install VPN.

\hypertarget{assignments}{%
\chapter{Assignments in Stat 220}\label{assignments}}

\hypertarget{dos-and-dont-of-collaboration-for-individual-assignments}{%
\section{Do's and Don't of collaboration for individual assignments}\label{dos-and-dont-of-collaboration-for-individual-assignments}}

\begin{itemize}
\tightlist
\item
  You \emph{can} discuss homework problems with classmates but you must
  write up \textbf{your own} homework solutions and \textbf{do your own work in R
  (no sharing commands or output)}.

  \begin{itemize}
  \tightlist
  \item
    \textbf{Do not share R commands/code in any way}, including, but not
    limited to, sending commands via email, slack, text, or showing
    commands in a shared screen with the intention of showing a
    classmate your solution to a problem.
  \item
    You \textbf{can} share a screen to help troubleshoot a coding problem
    in R.
  \end{itemize}
\item
  You \emph{can} use the following resources to complete your homework:

  \begin{itemize}
  \tightlist
  \item
    Carleton faculty (myself, other math or statistics faculty, etc)
  \item
    discussions with classmates (see above) or knowledgeable friends
  \item
    Carleton resources like stats lab assistants
  \item
    student solutions provided in the back of your student textbook
    or in the student solution manual.
  \end{itemize}
\item
  You \emph{cannot} use any resources other than the ones listed above to
  complete assignments (homework, reports, etc) for this class.
  (e.g.~you cannot use a friend's old assignments or reports, answers
  found on the internet, textbook (instructor) solutions manual, etc.)
\end{itemize}

\hypertarget{examples-that-violate-the-academic-integrity-policy}{%
\subsection{Examples that violate the academic integrity policy}\label{examples-that-violate-the-academic-integrity-policy}}

\begin{itemize}
\tightlist
\item
  sending your .Rmd homework file to another person in the class
\item
  receiving an .Rmd homework file from another person
\item
  sharing a screen and copying code, verbatim, from another person
\item
  sending/receiving R commands
\item
  neglecting to acknowledge classmates with whom you worked with on an
  assignment
\end{itemize}

\hypertarget{format-and-content}{%
\section{Format and Content}\label{format-and-content}}

Submit via GitHub (for most assignments) an organized and correctly
ordered assignment.

\begin{itemize}
\tightlist
\item
  Content: Good data scientists need to do more than just write code;
  they should be able to interpret and explain their analyzes.

  \begin{itemize}
  \tightlist
  \item
    Provide a \textbf{written answer} first, followed by any required R
    code and output.\\
  \item
    Use \textbf{complete sentences} when answering any problem that
    requires an explanation or overall problem summary.
  \end{itemize}
\item
  When including code:

  \begin{itemize}
  \tightlist
  \item
    Be sure to show the natural sequence of work needed to answer
    the problem.
  \item
    Include brief comments explain your code steps.
  \item
    Do not include typos or unnecessary commands/output.
  \item
    Always include code output.
  \end{itemize}
\item
  At the top of each individual assignment \textbf{include the names of
  classmates that you worked with} on all or part of the assignment
  (but each person must write up their assignment on their own)
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\textbf{Disability Accommodations:} Carleton College is committed to
providing equitable access to learning opportunities for all students.
The Disability Services office (Henry House, 107 Union Street) is the
campus office that collaborates with students who have disabilities to
provide and/or arrange reasonable accommodations. If you have, or think
you may have, a disability (e.g., mental health, attentional, learning,
autism spectrum disorders, chronic health, traumatic brain injury and
concussions, vision, hearing, mobility, or speech impairments), please
contact \href{mailto:disability@carleton.edu}{\nolinkurl{disability@carleton.edu}} or call Sam Thayer ('10),
Accessibility Specialist (x4464) or Chris Dallager, Director of
Disability Services (x5250) to arrange a confidential discussion
regarding equitable access and reasonable accommodations.

\textbf{Academic Honesty:} All work that you turn in under your name must
follow Carleton's academic integrity policy. The use of textbook
solution manuals (physical or online solutions), homework, reports or
exams done by past students are not allowed. Look at the College's
\href{https://www.carleton.edu/writing/plagiarism/}{Writing Across the Curriculum} website for
additional guidance on plagiarism and how to avoid plagiarism in their
writing.

\hypertarget{software}{%
\chapter{Software in Stat 220}\label{software}}

You will work with many .Rmd Markdown files in this course. These include class activities, homework template, project helper files etc. To stay organized, I \emph{strongly} suggest you create a \textbf{stat220} folder that contains the following subfolders:

\begin{itemize}
\tightlist
\item
  \textbf{stat220} folder

  \begin{itemize}
  \item
    \textbf{Assignments:} This folder will contain subfolders for each
    assignment. Each assignment subfolder (e.g.~homework1,
    homework2, \ldots) will be a Github connected RStudio project that
    you will create \textbf{once an assignment is posted.}
  \item
    \textbf{Content:} This folder should be used to save any
    non-assignment files (e.g.~slides, examples) for this class. You
    will create this subfolder by creating an RStudio project (see
    step 5 below).
  \end{itemize}
\end{itemize}

To get started with this organization, follow the steps below.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{file-organization-using-maize}{%
\section{File organization: Using maize}\label{file-organization-using-maize}}

The server (online) version of Rstudio is run from a unix server. You
can navigate this file system using unix commands, but I assume that
most or all of you will just use Rstudio to access your files on this
server.

\begin{quote}
\textbf{1.} In Rstudio, click the \textbf{Files} \emph{tab} in the lower right-hand
window. Note: this is \textbf{not} the same as the \textbf{File} \emph{menu}
option.
\end{quote}

\includegraphics{img/maize_files.png}

\begin{quote}
\textbf{2.} Verify that you are in your \textbf{HOME} folder (should simply
say Home right under the New Folder button). To navigate to your
Home folder (if somehow you are not in it), click the \textbf{\ldots{}} button
(far right side of the \textbf{Files} tab) and enter a \textasciitilde{} (tilde) symbol
\end{quote}

\includegraphics{img/maize_home.png}

\begin{itemize}
\tightlist
\item
  \textbf{3.} Click the \textbf{New Folder} button and name the folder
  \textbf{stat220}.
\end{itemize}

\includegraphics{img/maize_newfolder.png}

\begin{itemize}
\tightlist
\item
  \textbf{4.} Click on this newly created (empty) \textbf{stat220} folder.
  Within the folder create another \textbf{New Folder} and name it
  \textbf{assignments}.
\end{itemize}

\includegraphics{img/maize_stat220.png}

\begin{itemize}
\item
  \textbf{5.} Within the \textbf{stat220} folder, create an \textbf{RStudio project}
  called \textbf{content} with the following steps:

  \begin{itemize}
  \tightlist
  \item
    \textbf{a.} Click the \textbf{Project} button in the upper righthand
    corner of your RStudio window and select \textbf{New Project\ldots{}}.
  \end{itemize}
\end{itemize}

\includegraphics{img/maize_project.png}

\begin{itemize}
\tightlist
\item
  \textbf{b.} Select \textbf{New Directory} and then \textbf{New Project}
\end{itemize}

\includegraphics{img/maize_newdirectory.png}

\includegraphics{img/maize_newdirectory2.png}

\begin{itemize}
\tightlist
\item
  \textbf{c.} Enter \textbf{content} as the \textbf{Directory name} and use the
  \textbf{Browse} button to find your \textbf{stat220} folder. Then click
  \textbf{Create Project}.
\end{itemize}

\includegraphics{img/maize_create.png}

\begin{itemize}
\tightlist
\item
  \textbf{d.} You should now have a new folder called \textbf{content} in your
  \textbf{stat220} folder and this folder will contain an RStudio project
  \texttt{.Rproj}. Feel free to add subfolders to this \textbf{content} folder
  (e.g.~slides, examples, etc).
\end{itemize}

\includegraphics{img/maize_Rproj.png}

\textbf{Warning: Do not} create an RStudio project in the main stat220 folder
because it is not good practice to have RStudio projects in subfolders
of another project (e.g.~a project within a project is not recommended).

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{file-organization-using-your-own-rstudio}{%
\section{File organization: Using your own Rstudio}\label{file-organization-using-your-own-rstudio}}

Create a folder called \textbf{stat220} somewhere on your computer. Within
this folder create an \textbf{assignments} subfolder. Then complete \textbf{step
5} from above to create a \textbf{content} RStudio project folder.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{rstudio-projects}{%
\section{RStudio projects}\label{rstudio-projects}}

Once you've created a project, your R session should be running within
that project folder. You can check which project you are in by checking
the project name in the upper righthand part of your RStudio window.
Here we see the \textbf{content} project is open:

\includegraphics{img/maize_content.png}

Running R from an RStudio project sets your \textbf{working directory} to the
project folder:

\includegraphics{img/maize_getwd.png}

This allows for easy file path access to all files related to this
project.

To \textbf{start} a project, click on the \texttt{.Rproj} file or use the \textbf{Open
Project\ldots{}} option shown in step 5 above.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{best-practices-or-what-not-to-do}{%
\section{Best practices (or what not to do)}\label{best-practices-or-what-not-to-do}}

\begin{itemize}
\tightlist
\item
  Never save files to a lab computer hard drive (e.g.~desktop,
  downloads, etc). They will be erased when you log off.
\item
  Do not use gmail as a file storage system! Avoid emailing yourself
  files that you created (and saved) on a lab computer. Eventually you
  will lose work this way.
\item
  Avoid using online versions of google drive and dropbox. Similar to
  gmail, downloading, editing a doc, then uploading it back to
  drive/dropbox is another great way to lose work.
\item
  Avoid \href{https://xkcd.com/1459/}{this} and \href{http://phdcomics.com/comics.php?f=1531}{this}.
\end{itemize}

\hypertarget{git-and-github}{%
\section{Git and GitHub}\label{git-and-github}}

\href{https://happygitwithr.com/big-picture.html\#why-git}{Git} is version
control software that you install locally on your computer. Git is
already installed on the maize RStudio server.

\href{https://happygitwithr.com/big-picture.html\#why-github}{Github} is a
cloud-based service for hosting git projects. It allows multiple users
to share and contribute to projects and it is how you will be submitting
homework assignments and projects for this class. More information about Git and
Github can also be found in \href{https://rfortherestofus.com/2021/02/how-to-use-git-github-with-r/}{Getting setup with Git and
GitHub} and \href{https://sahirbhatnagar.com/rpkg/\#gitgithub}{Git and Github}.

If you are using a local install of R/RStudio, then you will need to
install Git.

\textbf{Installing Git}

Directions for both Windows \& Mac here:
\url{http://happygitwithr.com/install-git.html}.

\begin{quote}
\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  If you are using \textbf{maize}, then there is nothing you need to install.
\item
  Windows users should follow Option 1 in 6.2.
\item
  Mac users can follow Option 1 in 6.3 if comfortable, otherwise follow Option 2
\item
  Linux users can follow 6.4.
\end{enumerate}
\end{quote}

\includegraphics{img/maize_gittab.png}

\hypertarget{slack}{%
\section{Slack}\label{slack}}

We will use Slack for all course communication. \href{https://join.slack.com/t/slack-eqx6534/shared_invite/zt-1rw47q6fp-pM9VWJLQ0obCGlGVgRvg2Q}{Sign up for our course
Slack team
here}!
You will need to create an account with a username, and log in to read
and post. You can download a
standalone Slack application to your
\href{https://slack.com/downloads/osx}{Mac},
\href{https://slack.com/downloads/windows}{Windows},
\href{https://slack.com/downloads/linux}{Linux} and/or
\href{https://slack.com/downloads/android}{Android}/\href{https://slack.com/downloads/ios}{iOS}
device. You can control whether you receive notifications on new posts
by going to Preferences, as well as decide which `channels' to subscribe
to. A `channel' is a discussion thread, which is used to organize
communications into topics. You can learn more about Slack features
\href{https://slack.com/help/articles/218080037-Getting-started-for-new-Slack-users}{here}.

Several channels have been set up for specific parts of the course. Feel
free to ask questions anytime. You can browse the available channels in
our team by clicking on ``Channels'' on the left-hand panel.

\hypertarget{acknowledgements}{%
\section{Acknowledgements}\label{acknowledgements}}

This installation guide is based on the guide from Adam Loy and Katie St.~Clair.

\hypertarget{github}{%
\chapter{GitHub Guide for Students in Stat 220}\label{github}}

\hypertarget{overview}{%
\section{Overview}\label{overview}}

If you are using the maize RStudio server, then you can connect to
GitHub without any extra software downloads. If you are using RStudio on
your computer, then you will need to download Git software (as directed
in \protect\hyperlink{software}{Software in Stat 220}) to use GitHub connected
projects. You will use GitHub to submit homework and collaborate on projects.

\hypertarget{getting-setup-with-git-and-github}{%
\section{Getting setup with Git and GitHub}\label{getting-setup-with-git-and-github}}

If you are \textbf{not} working on the maize RStudio server, then make sure
that you have installed all of the software mentioned in \protect\hyperlink{software}{Software in Stat 220}. In addition, you should install the \texttt{usethis} and \texttt{gitcreds} R packages.

Everyone needs to connect Git and GitHub by doing the following:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Register for account on GitHub (\url{https://github.com/}). I recommend
  using a username that incorporates your name (e.g., dbastola) and Carleton email address for your Github account.
\item
  If you haven't done so already, accept the invite to the class organization \href{https://github.com/DataScienceSpring23}{DataScienceSpring23}. This organization is where all course homework files and project repositories will live.
\item
  Setup options in Git by running the following code chunk in your
  console:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("usethis")  \# uncomment to install}
\NormalTok{usethis}\SpecialCharTok{::}\FunctionTok{use\_git\_config}\NormalTok{(}\AttributeTok{user.name =} \StringTok{"Jane Doe"}\NormalTok{, }\AttributeTok{user.email =} \StringTok{"jane@example.org"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

  changing the first two arguments to your own name and email (this should
  be the email associated with your GitHub account).
\item
  In order to push changes to github (i.e.~to track changes and submit homework), you will need to prove that you have permission to change a Github repo. This is done with a personal access token (PAT). Note that you will need to install the packages usethis and gitcreds to do this.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{usethis}\SpecialCharTok{::}\FunctionTok{create\_github\_token}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ Call }\StringTok{\textasciigrave{}}\AttributeTok{gitcreds::gitcreds\_set()}\StringTok{\textasciigrave{}}\NormalTok{ to register this token }\ControlFlowTok{in}\NormalTok{ the local Git credential store}
\NormalTok{ It is also a great idea to store this token }\ControlFlowTok{in}\NormalTok{ any password}\SpecialCharTok{{-}}\NormalTok{management software that you use}
\NormalTok{ âœ“ Opening URL }\StringTok{\textquotesingle{}https://github.com/settings/tokens/new?scopes=repo,user,gist,workflow\&description=R:GITHUB\_PAT\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

  ``Generate token'' and store your tokens somewhere safe in your local computer as you will need this again in the future. You can additionally add PAT to your \texttt{.Renviron} file as well. Copy it and paste it into your .Renviron file as system variable GITHUB\_PAT using

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{usethis}\SpecialCharTok{::}\FunctionTok{edit\_r\_environ}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

  Add to the file and save. You can also set the PAT token in R using the following.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("gitcreds") \# uncomment to install}
\NormalTok{gitcreds}\SpecialCharTok{::}\FunctionTok{gitcreds\_set}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

  You can check that you've stored a credential with \texttt{gitcreds\_get()}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gitcreds}\SpecialCharTok{::}\FunctionTok{gitcreds\_get}\NormalTok{()}
\end{Highlighting}
\end{Shaded}
\end{enumerate}

You should get something like this:

\begin{verbatim}
```
#> <gitcreds>
#>   protocol: https
#>   host    : github.com
#>   username: PersonalAccessToken
#>   password: <-- hidden -->
```
\end{verbatim}

\textbf{Treat your PAT token like a password!} For details, follow the step in Section 9.1 on this page to do this: \url{https://happygitwithr.com/https-pat.html}.

\hypertarget{individual-assignments}{%
\section{Individual assignments}\label{individual-assignments}}

If you followed the suggestions in the \protect\hyperlink{software}{File organization in RStudio} page, then you should already have an
assignments folder on your computer or maize account.

Each new assignment/project will be posted as a repository on GitHub and
added directly to your account (within the Stat220 organization). This
repository will contain assignment details (README, .Rmd).

\hypertarget{creating-an-individual-assignment-repo-and-project}{%
\subsection{Creating an individual assignment repo and project}\label{creating-an-individual-assignment-repo-and-project}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Go to our course GitHub organization page
  (\href{https://github.com/DataScienceSpring23}{DataScienceSpring23}) and find your homework repo, such as \texttt{hw1-username} (where your username is attached).
\item
  Enter the online assignment repository on GitHub. Click the green
  \textbf{``Code''} button. Most of you should just use the default setting
  which is to ``clone'' (copy) using HTTPS. Click the clipboard to the
  right of the URL to copy the repo location.
\item
  Now open up RStudio and create a project as follows:

  \begin{itemize}
  \tightlist
  \item
    Click the \textbf{Project} button in the upper right corner of your RStudio window and select \textbf{New Project\ldots{}}.
    \includegraphics{img/maize_project.png}
  \item
    Select \textbf{Version Control} and then \textbf{New Project}
    \includegraphics{img/maize_version.png}
    \includegraphics{img/maize_git.png}
  \item
    Paste the link you just copied into the Repository URL box. Leave
    the Project directory name blank (or keep the auto-filled name). Use
    the \textbf{Browse} button to find your \textbf{assignments} folder, then
    click \textbf{Create Project}
  \end{itemize}
\end{enumerate}

\includegraphics{img/maize_clone.png}

\hypertarget{working-on-your-assignment}{%
\subsection{Working on your assignment}\label{working-on-your-assignment}}

An RStudio project should now open, which will allow you to start
working on your homework assignment. You should see the project
assignment name in the top right side of Rstudio. You will probably see
a blank console screen when you open a new project. Look in the
\textbf{Files} tab for your homework .Rmd file. Click on whatever file you
want to edit (probably the .Rmd file) and edit away. Make sure that your
current assignment's project is the one open and showing in the upper
rightproject name. To \textbf{open} a project, click on the \texttt{.Rproj} file or
use the \textbf{Open Project\ldots{}} option available in the upper right project
link.

\hypertarget{commits}{%
\subsubsection{Commits}\label{commits}}

After you make changes to the homework assignment, commit them. What are
commits you ask? Commits are essentially taking a snapshot of your
projects. Commits save this snapshot to your local version of Git
(located on your hard drive or the maize server). For example, if I make
changes to a code so that it prints ``Hello world'', and then commit them
with an informative message, I can look at the history of my commits and
view the code that I wrote at that time. If I made some more changes to
the function that resulted in an error, I could go back to the commit
where the code was originally working. This prevents you from creating
several versions of your homework (homework-v1, homework-v2, \ldots) or
from trying to remember what your code originally looked like.

You can make commits in the Git tab in RStudio.

\includegraphics{img/maize_gittab.png}

Click the \textbf{Commit} button in the Git tab. Check the boxes of the files
that you want to commit, enter your commit message (briefly state what
changes have been made), then hit \textbf{Commit}. You can read how to do
this in RStudio in more detail here:
\url{http://r-pkgs.had.co.nz/git.html\#git-commit}.

Two things about committing.

\begin{itemize}
\tightlist
\item
  You should \textbf{commit somewhat frequently}. At minimum, if you're
  doing a homework assignment, you should make a commit each time that
  you've finished a question.
\item
  Leave \textbf{informative commit messages}. ``Added stuff'' will not help
  you if you're looking at your commit history in a year. A message
  like ``Added initial version of hello-world function'' will be more
  useful.
\end{itemize}

\hypertarget{pushing-changes-to-github}{%
\subsubsection{Pushing changes to Github}\label{pushing-changes-to-github}}

At some point you'll want to get the updated version of the assignment
back onto GitHub, either so that we can help you with your code or so
that it can be graded. You will also want to push work frequently when
you have a shared GitHub repo for project collaborations (i.e.~more than
one person is working on a project and code). If you are ready to push,
you can again click on the ``Up'' \textbf{Push} arrow in the Git tab or in the
Commit pop-up window or in the Git tab (shown above).

To ``turn in'' an assignment, all you need to do is push all your relevant
files to Github by the deadline.

\hypertarget{group-work}{%
\section{Group work}\label{group-work}}

Collaborative Github assignments are pretty similar to individual assignments.

\hypertarget{creating-a-grouppartner-assignment-repo-and-project}{%
\subsection{Creating a group/partner assignment repo and project}\label{creating-a-grouppartner-assignment-repo-and-project}}

Go to our course GitHub organization page(\href{https://github.com/DataScienceSpring23}{DataScienceSpring23}) and find the repo for your group, for example if your group name is ``team01'' the you might find the \texttt{mp1-team01} repo. Clone this repo to your computer/maize account using the same steps done for an individual assignment (see steps 2-3).

\hypertarget{working-with-collaborative-repos}{%
\subsubsection{Working with collaborative repos}\label{working-with-collaborative-repos}}

For group homework, I suggest that only the \emph{recorder} edit the group-homework-x.Rmd file to avoid merge conflicts! Other group members can create a new Markdown doc to run and save commands. Only the recorder needs to \textbf{push} changes (answers) to the Github repo and all others can then \textbf{pull} these changes (i.e.~the final answers) after the HW is submitted.

When you are working together on a Github project, you should commit and push your modifications frequently. You will also need to frequently \textbf{pull} updates from Github down to your local version of RStudio. These updates are changes that your teammates have made since your last pull. To pull in changes, click the ``Down'' \textbf{Pull} arrow in the Git tab (shown above).

If you get an error about conflict after pulling or pushing, don't freak out! This can happen if you edit a file (usually an .Rmd or .R file) in a location that was also changed by a teammate. When this happens you should attempt to fix the \textbf{merge conflict}. Take a look at \href{http://r-pkgs.had.co.nz/git.html\#git-pull}{this resource site} and try to fix the merge conflict in Rstudio.

\hypertarget{additional-resources}{%
\section{Additional resources}\label{additional-resources}}

\begin{itemize}
\tightlist
\item
  \href{http://happygitwithr.com/}{Happy Git and GitHub for the useR}
\item
  \href{http://r-pkgs.had.co.nz/git.html\#git-rstudio}{Rstudio, Git and GitHub}
\item
  \href{http://learngitbranching.js.org/}{Interactive learning guide for Git}
\item
  \href{https://guides.github.com/}{GitHub Guides}
\item
  \href{https://youtu.be/F_fPEMnr1OQ}{Git setup for Windows (video)}
\item
  \href{https://www.youtube.com/watch?v=kbmSZwK0k-A\&t}{Git setup for Mac (video)}
\item
  \href{https://youtu.be/pAcMgGbCtQw}{How to clone, edit, and push homework assignments with GitHub Classroom (video)}
\end{itemize}

\hypertarget{acknowledgements-1}{%
\section{Acknowledgements}\label{acknowledgements-1}}

Most of this content in this guide was taken from
\url{https://github.com/jfiksel/github-classroom-for-students}, edited for our classroom use by Katie St.~Clair.

\hypertarget{reuse}{%
\section{Reuse}\label{reuse}}

This guide is licensed under the CC BY-NC 3.0 Creative
Commons License.

\hypertarget{r-markdown-syntax}{%
\chapter{R Markdown Syntax}\label{r-markdown-syntax}}

Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see \url{http://rmarkdown.rstudio.com}.

\hypertarget{lists-in-r-markdown}{%
\subsection{Lists in R Markdown:}\label{lists-in-r-markdown}}

You can use asterisk mark to provide emphasis, such as \texttt{*italics*\ or\ **bold**}. You can create lists with a dash:

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\NormalTok{ Item }\DecValTok{1}
\SpecialCharTok{{-}}\NormalTok{ Item }\DecValTok{2}
\SpecialCharTok{{-}}\NormalTok{ Item }\DecValTok{3}
  \SpecialCharTok{+}\NormalTok{ Subitem }\DecValTok{1}
\SpecialCharTok{*}\NormalTok{ Item }\DecValTok{4}
\end{Highlighting}
\end{Shaded}

to produce

\begin{itemize}
\tightlist
\item
  Item 1
\item
  Item 2
\item
  Item 3

  \begin{itemize}
  \tightlist
  \item
    Subitem 1
  \end{itemize}
\item
  Item 4
\end{itemize}

You can embed Latex equations in-line, \texttt{\$\textbackslash{}frac\{1\}\{n\}\ \textbackslash{}sum\_\{i=1\}\^{}\{n\}\ x\_\{i\}\$} to produce \(\frac{1}{n} \sum_{i=1}^{n} x_{i}\) or in a new line as \texttt{\$\$\textbackslash{}text\{Var\}(X)\ =\ \textbackslash{}frac\{1\}\{n-1\}\textbackslash{}sum\_\{i-1\}\^{}\{n\}\ (x\_\{i\}\ -\ \textbackslash{}bar\{x\})\^{}2\$\$} to produce \[\text{Var}(X) = \frac{1}{n-1}\sum_{i-1}^{n} (x_{i} - \bar{x})^2\]

\hypertarget{embed-an-r-code-chunk}{%
\subsection{Embed an R code chunk:}\label{embed-an-r-code-chunk}}

Use the following

\begin{verbatim}
```r
Use back ticks to 
create a block of code
```
\end{verbatim}

to produce:

\begin{verbatim}
Use back ticks to 
create a block of code
\end{verbatim}

You can also evaluate and display the results of R code. Each tasks can be accomplished in a suitably labeled chunk like the following:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(cars)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     speed           dist       
 Min.   : 4.0   Min.   :  2.00  
 1st Qu.:12.0   1st Qu.: 26.00  
 Median :15.0   Median : 36.00  
 Mean   :15.4   Mean   : 42.98  
 3rd Qu.:19.0   3rd Qu.: 56.00  
 Max.   :25.0   Max.   :120.00  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(dist }\SpecialCharTok{\textasciitilde{}}\NormalTok{ speed, }\AttributeTok{data =}\NormalTok{ cars)}
\NormalTok{fit}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = dist ~ speed, data = cars)

Coefficients:
(Intercept)        speed  
    -17.579        3.932  
\end{verbatim}

\hypertarget{including-plots}{%
\subsection{Including Plots:}\label{including-plots}}

You can also embed plots. See Figure \ref{fig:pie} for example:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{par}\NormalTok{(}\AttributeTok{mar =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}
\FunctionTok{pie}\NormalTok{(}
  \FunctionTok{c}\NormalTok{(}\DecValTok{280}\NormalTok{, }\DecValTok{60}\NormalTok{, }\DecValTok{20}\NormalTok{),}
  \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}Sky\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Sunny side of pyramid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Shady side of pyramid\textquotesingle{}}\NormalTok{),}
  \AttributeTok{col =} \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}\#0292D8\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}\#F7EA39\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}\#C4B632\textquotesingle{}}\NormalTok{),}
  \AttributeTok{init.angle =} \SpecialCharTok{{-}}\DecValTok{50}\NormalTok{, }\AttributeTok{border =} \ConstantTok{NA}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\includegraphics[width=1\linewidth]{rmarkdown_files/figure-latex/pie-1} \caption{A fancy pie chart.}\label{fig:pie}
\end{figure}

(Credit: Yihui Xie)

\hypertarget{read-in-data-files}{%
\subsection{Read in data files:}\label{read-in-data-files}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{simple\_data }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://deepbas.io/data/simple{-}1.dat"}\NormalTok{, )}
\FunctionTok{summary}\NormalTok{(simple\_data) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   initials            state                age      
 Length:3           Length:3           Min.   :45.0  
 Class :character   Class :character   1st Qu.:47.5  
 Mode  :character   Mode  :character   Median :50.0  
                                       Mean   :52.0  
                                       3rd Qu.:55.5  
                                       Max.   :61.0  
     time          
 Length:3          
 Class :character  
 Mode  :character  
                   
                   
                   
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{(simple\_data)}
\end{Highlighting}
\end{Shaded}

\begin{tabular}{l|l|r|l}
\hline
initials & state & age & time\\
\hline
vib & MA & 61 & 6:01\\
\hline
adc & TX & 45 & 5:45\\
\hline
kme & CT & 50 & 4:19\\
\hline
\end{tabular}

\hypertarget{hide-the-code}{%
\subsection{Hide the code:}\label{hide-the-code}}

If we enter the \texttt{echo\ =\ FALSE} option in the R chunk (see the .Rmd file). This prevents the R code from being printed to your document; you just see the results.

\begin{tabular}{l|l|r|l}
\hline
initials & state & age & time\\
\hline
vib & MA & 61 & 6:01\\
\hline
adc & TX & 45 & 5:45\\
\hline
kme & CT & 50 & 4:19\\
\hline
\end{tabular}

\hypertarget{part-class-activities}{%
\part*{Class Activities}\label{part-class-activities}}
\addcontentsline{toc}{part}{Class Activities}

\hypertarget{class-activity-0}{%
\chapter{Class Activity 0}\label{class-activity-0}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the required libraries}
\FunctionTok{library}\NormalTok{(credentials) }\CommentTok{\# to help with PAT access}
\FunctionTok{library}\NormalTok{(gitcreds)}
\FunctionTok{library}\NormalTok{(usethis)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# STEPS INVOLVED TO ESTABLISH GIT CREDENTIALS / PAT}

\CommentTok{\# Step 1}

\CommentTok{\# usethis::use\_git\_config(user.name = "deepbas", user.email = "deepbas99@gmail.com")}

\CommentTok{\# Step 2}

\CommentTok{\# usethis::create\_github\_token()}

\CommentTok{\# Step 3}

\CommentTok{\# if this is the second/subsequent iteration start from here}

\CommentTok{\# gitcreds::gitcreds\_set()}

\CommentTok{\# Verify}

\CommentTok{\# gitcreds::gitcreds\_get()}
\end{Highlighting}
\end{Shaded}

In this worksheet, you will practice creating a GitHub repository using the usethis::use\_github() function and cloning it back to your local machine using RStudio's menu options.

\hypertarget{tutorial-1-creating-and-cloning-a-repository-starting-from-github-to-rstudio}{%
\section{Tutorial 1: Creating and cloning a Repository starting from Github to RStudio}\label{tutorial-1-creating-and-cloning-a-repository-starting-from-github-to-rstudio}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Visit the GitHub website at \url{https://github.com} and sign in using your GitHub account. If you don't have an account yet, you can create one for free.
\item
  Once logged in, click on the ``+'' icon in the top right corner of the webpage, then click on ``New repository''.
\item
  Enter a name for your new repository in the ``Repository name'' field. You may also provide an optional description.
\item
  Choose the visibility of your repository by selecting either ``Public'' or ``Private''. Public repositories are visible to anyone, while private repositories are only visible to you and any collaborators you invite.
\item
  (Optional) Check the box to initialize the repository with a README file.
\item
  Click on the ``Create repository'' button to create your new repository.
\end{enumerate}

This will create a new GitHub repository on your Github account. Follow further to clone the repository to your local folder using RStudio.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Go to your GitHub repository webpage and click on the green ``Code'' button. This will display a dropdown menu with a URL for your repository. Click on the clipboard icon to copy the URL to your clipboard.
\item
  Open RStudio, and from the ``File'' menu, select ``New Project''.
\item
  In the ``New Project'' dialog, choose ``Version Control''.
\item
  Select ``Git'' as the version control system.
\item
  In the ``Repository URL'' field, paste the URL that you copied from your GitHub repository webpage.
\item
  Choose a local directory where you want to clone the repository by clicking on the ``Browse'' button and navigating to the desired folder on your computer.
\item
  Click on ``Create Project'' to clone the GitHub repository to your local computer.
\end{enumerate}

\hypertarget{tutorial-2-creating-a-new-github-repository-using-usethis-r-package-rstudio-to-github-works-only-on-local-rstudio}{%
\section{\texorpdfstring{Tutorial 2: Creating a new GitHub repository using \texttt{usethis} R package (RStudio to Github) (Works ONLY on local RStudio)}{Tutorial 2: Creating a new GitHub repository using usethis R package (RStudio to Github) (Works ONLY on local RStudio)}}\label{tutorial-2-creating-a-new-github-repository-using-usethis-r-package-rstudio-to-github-works-only-on-local-rstudio}}

\hypertarget{prerequisites}{%
\subsection{Prerequisites}\label{prerequisites}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Install the usethis package if you haven't already: install.packages(``usethis'')
\item
  Make sure you have a GitHub account, and you are logged in.
\item
  Configure Git with your name and email address if you haven't already. Run the following commands in the R console, replacing ``Your Name'' and ``\href{mailto:youremail@example.com}{\nolinkurl{youremail@example.com}}'' with your information:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{usethis}\SpecialCharTok{::}\FunctionTok{use\_git\_config}\NormalTok{(}\AttributeTok{user.name =} \StringTok{"Your Name"}\NormalTok{, }\AttributeTok{user.email =} \StringTok{"youremail@example.com"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{3}
\item
  Create a new R project in RStudio by clicking on ``File'' \textgreater{} ``New Project'' \textgreater{} ``New Directory'' \textgreater{} ``New Project.'' Give your project a name and choose a location on your computer to save it. Click ``Create Project.''
\item
  Make a new file or copy and paste a .Rmd file that you want to have in your repo and save it to your requirement.
\end{enumerate}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{5}
\tightlist
\item
  In the R console, load the usethis package:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(usethis)}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{6}
\tightlist
\item
  Initialize a Git repository for your project by running:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{usethis}\SpecialCharTok{::}\FunctionTok{use\_git}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{7}
\tightlist
\item
  Now, let's create a new GitHub repository using the usethis::use\_github() function. Run the following command:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{usethis}\SpecialCharTok{::}\FunctionTok{use\_github}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{8}
\tightlist
\item
  Follow the instructions in the R console, and your GitHub repository will be created. Note the repository URL, as you will need it in the next activity.
\end{enumerate}

\hypertarget{optional-tutorial-3-creating-a-new-github-repository-using-rstudios-git-terminal}{%
\section{(Optional) Tutorial 3: Creating a new GitHub repository using RStudio's Git terminal}\label{optional-tutorial-3-creating-a-new-github-repository-using-rstudios-git-terminal}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Create a new R project in RStudio by clicking on ``File'' \textgreater{} ``New Project'' \textgreater{} ``New Directory'' \textgreater{} ``New Project.'' Give your project a name and choose a location on your computer to save it. Click ``Create Project.''
\item
  Initialize a Git repository for your project. Click on the ``Terminal'' tab in the bottom right pane of RStudio and run the following command:
\end{enumerate}

\begin{verbatim}
git init
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Configure Git with your name and email address if you haven't already. Run the following commands in the terminal, replacing ``Your Name'' and ``\href{mailto:youremail@example.com}{\nolinkurl{youremail@example.com}}'' with your information:
\end{enumerate}

\begin{verbatim}
git config user.name "Your Name"
git config user.email "youremail@example.com"
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  Commit your project files to the Git repository. Run the following commands in the terminal:
\end{enumerate}

\begin{verbatim}
git add .
git commit -m "Initial commit"
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{4}
\item
  Go to your GitHub account, click on the ``+'' icon in the upper right corner, and select ``New repository.'' Give your repository a name (it's recommended to use the same name as your R project), and click ``Create repository.''
\item
  In the ``\ldots or push an existing repository from the command line'' section of your new GitHub repository, copy the commands under this section. It should look similar to the following (replace and with your GitHub username and repository name):
\end{enumerate}

\begin{verbatim}
git remote add origin https://github.com/<your-username>/<your-repo-name>.git
git branch -M main
git push -u origin main
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{6}
\tightlist
\item
  Paste the copied commands into the RStudio terminal and execute them. This will link your local Git repository to the remote GitHub repository and push your initial commit to the GitHub repository.
\end{enumerate}

\hypertarget{class-activity-1}{%
\chapter{Class Activity 1}\label{class-activity-1}}

The \texttt{R} package \texttt{babynames} provides data about the popularity of individual baby names from the US Social Security Administration. Data includes all names used at least 5 times in a year beginning in 1880.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("babynames")  \# uncomment to install}
\FunctionTok{library}\NormalTok{(babynames)}
\end{Highlighting}
\end{Shaded}

Below is the list for first few cases of baby names.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(babynames)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 5
   year sex   name          n   prop
  <dbl> <chr> <chr>     <int>  <dbl>
1  1880 F     Mary       7065 0.0724
2  1880 F     Anna       2604 0.0267
3  1880 F     Emma       2003 0.0205
4  1880 F     Elizabeth  1939 0.0199
5  1880 F     Minnie     1746 0.0179
6  1880 F     Margaret   1578 0.0162
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  How many cases and variables are in the dataset \texttt{babynames}?
\end{enumerate}

\textbf{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(babynames)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1924665       5
\end{verbatim}

There are 1924665 cases and 5 variables in the dataset \texttt{babynames}.

Let's use the package tidyverse to do some exploratory data analysis.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("tidyverse")   \# uncomment to install}
\FunctionTok{library}\NormalTok{(tidyverse)}
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name}\SpecialCharTok{==}\StringTok{\textquotesingle{}Aimee\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 150 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     Aimee    13 0.000133 
 2  1881 F     Aimee    11 0.000111 
 3  1882 F     Aimee    13 0.000112 
 4  1883 F     Aimee    11 0.0000916
 5  1884 F     Aimee    15 0.000109 
 6  1885 F     Aimee    17 0.000120 
 7  1886 F     Aimee    17 0.000111 
 8  1887 F     Aimee    18 0.000116 
 9  1888 F     Aimee    12 0.0000633
10  1889 F     Aimee    16 0.0000846
# ... with 140 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{filtered\_names }\OtherTok{\textless{}{-}}\NormalTok{ babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name}\SpecialCharTok{==}\StringTok{\textquotesingle{}Aimee\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("ggplot2")   \# uncomment to install}
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{filtered\_names, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{year, }\AttributeTok{y=}\NormalTok{prop)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{colour=}\NormalTok{sex)) }\SpecialCharTok{+} 
  \FunctionTok{xlab}\NormalTok{(}\StringTok{\textquotesingle{}Year\textquotesingle{}}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{ylab}\NormalTok{(}\StringTok{\textquotesingle{}Prop. of Babies Named Aimee\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\includegraphics[width=1\linewidth]{class_activity_1_files/figure-latex/trend-1} \caption{A trend chart}\label{fig:trend}
\end{figure}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  What do you see in the Figure 1? Explain in a few sentences.
\end{enumerate}

Click for answer

\textbf{Answer:}

In Figure 1, we can see the proportion of babies named Aimee by year for both males and females. We notice that the name Aimee has been more popular among females than males throughout the years. There is a peak in popularity around the 1970s for female babies, and then the popularity declines.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Repeat question 2 to infer how does the proportion of babies with your first name trend over time. Examine the generated plot and describe the trend of your name's popularity over time. Consider the following points:
\end{enumerate}

Has the popularity of your name increased, decreased, or remained stable over the years? Is there a noticeable difference in popularity between sexes? Are there any interesting patterns or trends, such as sudden increases or decreases in popularity?

\textbf{Answer:} Answers will vary.

\vspace*{0.2in}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Replace \textquotesingle{}YourName\textquotesingle{} with your first name}
\NormalTok{your\_name }\OtherTok{\textless{}{-}} \StringTok{"Dee"}

\NormalTok{your\_name\_data }\OtherTok{\textless{}{-}}\NormalTok{ babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==}\NormalTok{ your\_name)}

\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{your\_name\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{year, }\AttributeTok{y=}\NormalTok{prop)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{colour=}\NormalTok{sex)) }\SpecialCharTok{+} 
  \FunctionTok{xlab}\NormalTok{(}\StringTok{\textquotesingle{}Year\textquotesingle{}}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{ylab}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{\textquotesingle{}Prop. of Babies Named\textquotesingle{}}\NormalTok{, your\_name))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_1_files/figure-latex/unnamed-chunk-6-1}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  Compare the popularity of your first name with a randomly chosen name from the dataset. Examine the generated plot and compare the popularity of your first name with the randomly chosen name. Consider the following points:
\end{enumerate}

Are there differences in popularity trends between the two names? Is one name consistently more popular than the other, or do their popularity levels change over time? Are there any interesting patterns or trends in the data, such as periods of rapid increase or decrease in popularity?

\textbf{Answer} Answers will vary

\vspace*{0.2in}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Replace \textquotesingle{}YourName\textquotesingle{} with your first name}
\NormalTok{your\_name\_data }\OtherTok{\textless{}{-}}\NormalTok{ babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{\textquotesingle{}Dee\textquotesingle{}}\NormalTok{)}

\CommentTok{\# Replace \textquotesingle{}RandomName\textquotesingle{} with a randomly chosen name from the dataset}
\NormalTok{random\_name\_data }\OtherTok{\textless{}{-}}\NormalTok{ babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{\textquotesingle{}Max\textquotesingle{}}\NormalTok{)}

\CommentTok{\# Combine the two datasets}
\NormalTok{combined\_data }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(your\_name\_data, random\_name\_data)}

\CommentTok{\# Plot the data}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{combined\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{year, }\AttributeTok{y=}\NormalTok{prop)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{colour=}\NormalTok{sex, }\AttributeTok{linetype=}\NormalTok{name)) }\SpecialCharTok{+} 
  \FunctionTok{xlab}\NormalTok{(}\StringTok{\textquotesingle{}Year\textquotesingle{}}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_1_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{extras-optional}{%
\section{Extras (optional)}\label{extras-optional}}

\hypertarget{part-1-setting-working-directory-and-loading-data}{%
\subsection{Part 1: Setting Working Directory and Loading Data}\label{part-1-setting-working-directory-and-loading-data}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Set your working directory to a folder on your computer where you would like to save your R scripts and data files.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Replace \textquotesingle{}your\_directory\_path\textquotesingle{} with the path to your desired folder}
\CommentTok{\# setwd("your\_directory\_path")}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Load the mtcars dataset which comes preloaded with R. This dataset consists of various car features and their corresponding miles per gallon (mpg) values.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(mtcars)}
\FunctionTok{head}\NormalTok{(mtcars)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                   mpg cyl disp  hp drat    wt  qsec vs am
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0
                  gear carb
Mazda RX4            4    4
Mazda RX4 Wag        4    4
Datsun 710           4    1
Hornet 4 Drive       3    1
Hornet Sportabout    3    2
Valiant              3    1
\end{verbatim}

\hypertarget{part-2-downloading-packages}{%
\subsection{Part 2: Downloading Packages}\label{part-2-downloading-packages}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Install the ``tidyverse'' package, which is a collection of useful R packages for data manipulation, exploration, and visualization.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Uncomment the line below to install the package}
\CommentTok{\# install.packages("tidyverse")}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Load the ``tidyverse'' package into your R session.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\hypertarget{part-3-creating-and-compiling-an-r-markdown-file}{%
\subsection{Part 3: Creating and Compiling an R Markdown File}\label{part-3-creating-and-compiling-an-r-markdown-file}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Create a new R Markdown file in RStudio by clicking on ``File'' \textgreater{} ``New File'' \textgreater{} ``R Markdown\ldots{}''. Save the file in your working directory.
\item
  Add the following code to your R Markdown file to create a scatter plot of the mtcars dataset, showing the relationship between miles per gallon (mpg) and the weight of the car (wt).
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Create a scatter plot}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ mtcars, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ wt, }\AttributeTok{y =}\NormalTok{ mpg)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Weight (1000 lbs)"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{ylab}\NormalTok{(}\StringTok{"Miles per Gallon"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_1_files/figure-latex/unnamed-chunk-12-1}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Knit your R Markdown file to create an output document. Click the ``Knit'' button at the top of the RStudio script editor, and choose the output format you prefer (e.g., HTML, PDF, or Word).
\end{enumerate}

\vspace*{0.5in}

\hypertarget{questions}{%
\section{Questions}\label{questions}}

\hypertarget{how-does-the-weight-of-a-car-wt-affect-its-miles-per-gallon-mpg-based-on-the-scatter-plot-you-created}{%
\subsection{1. How does the weight of a car (wt) affect its miles per gallon (mpg) based on the scatter plot you created?}\label{how-does-the-weight-of-a-car-wt-affect-its-miles-per-gallon-mpg-based-on-the-scatter-plot-you-created}}

Click for answer

\textbf{Answer:}

Based on the scatter plot, there appears to be a negative relationship between the weight of a car (wt) and its miles per gallon (mpg). As the weight of a car increases, its fuel efficiency (mpg) tends to decrease.

\vspace*{0.5in}

\hypertarget{what-is-the-importance-of-setting-a-working-directory-in-r}{%
\subsection{2. What is the importance of setting a working directory in R?}\label{what-is-the-importance-of-setting-a-working-directory-in-r}}

Click for answer

\textbf{Answer:}

Setting a working directory in R is important because it determines the default location where R will read from or write to when loading or saving files. This makes it easier to keep your files organized and ensures that your R scripts can access the necessary files without needing to specify the full file paths. It also simplifies sharing your R projects with others since the file paths within your scripts will be relative to the working directory.

\vspace*{0.5in}

\hypertarget{explain-the-role-of-r-markdown-in-creating-reproducible-research-documents.}{%
\subsection{3. Explain the role of R Markdown in creating reproducible research documents.}\label{explain-the-role-of-r-markdown-in-creating-reproducible-research-documents.}}

Click for answer

\textbf{Answer:}

R Markdown plays a crucial role in creating reproducible research documents by allowing you to combine text, code, and output (e.g., tables, figures) within a single document. This integration of narrative, data, and results makes it easier to document your data analysis process, ensuring that others can easily understand, reproduce, and build upon your work. R Markdown also supports various output formats (e.g., HTML, PDF, Word) to make it easy to share your research findings with others.

\hypertarget{class-activity-2}{%
\chapter{Class Activity 2}\label{class-activity-2}}

Let's practice some common data assignments and manipulations in R.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Create a vector of all integers from 4 to 10, and save it as \texttt{a1}.
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a1 }\OtherTok{\textless{}{-}} \DecValTok{4}\SpecialCharTok{:}\DecValTok{10}
\NormalTok{a1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  4  5  6  7  8  9 10
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Create a vector of \emph{even} integers from 4 to 10, and save it as \texttt{a2}.
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a2 }\OtherTok{\textless{}{-}} \FunctionTok{seq}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{10}\NormalTok{, }\AttributeTok{by=}\DecValTok{2}\NormalTok{)}
\NormalTok{a2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  4  6  8 10
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  What do you get when you add \texttt{a1} to \texttt{a2}?
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a1\_plus\_a2 }\OtherTok{\textless{}{-}}\NormalTok{ a1 }\SpecialCharTok{+}\NormalTok{ a2}
\NormalTok{a1\_plus\_a2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  8 11 14 17 12 15 18
\end{verbatim}

\textbf{Answer:} When you add \texttt{a1} to \texttt{a2}, you get a vector containing the element-wise sum: 8, 11, 14, 17, 12, 15, 18.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  What does the command \texttt{sum(a1)} do?
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sum\_a1 }\OtherTok{\textless{}{-}} \FunctionTok{sum}\NormalTok{(a1)}
\NormalTok{sum\_a1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 49
\end{verbatim}

\textbf{Answer:} The command \texttt{sum(a1)} calculates the sum of all elements in the vector \texttt{a1}. In this case, it returns 49.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{4}
\tightlist
\item
  What does the command \texttt{length(a1)} do?
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{length\_a1 }\OtherTok{\textless{}{-}} \FunctionTok{length}\NormalTok{(a1)}
\NormalTok{length\_a1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 7
\end{verbatim}

\textbf{Answer:} The command \texttt{length(a1)} returns the number of elements in the vector \texttt{a1}. In this case, there are 7 elements.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{5}
\tightlist
\item
  Use the \texttt{sum} and \texttt{length} commands to calculate the average of the values in \texttt{a1}.
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{average\_a1 }\OtherTok{\textless{}{-}} \FunctionTok{sum}\NormalTok{(a1) }\SpecialCharTok{/} \FunctionTok{length}\NormalTok{(a1)}
\NormalTok{average\_a1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 7
\end{verbatim}

\textbf{Answer:} The average of the values in \texttt{a1} is 7.

\hypertarget{extras-optional-1}{%
\section{Extras (Optional)}\label{extras-optional-1}}

In this worksheet, you will learn how to use the \texttt{write\_csv()} function from the \texttt{readr} package to save a data object from your R session to a file in your working directory.

First, let's load the necessary package.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

Suppose we have a simple data frame called \texttt{my\_data}, with three columns: \texttt{Name}, \texttt{Age}, and \texttt{City}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{Name =} \FunctionTok{c}\NormalTok{(}\StringTok{"Alice"}\NormalTok{, }\StringTok{"Bob"}\NormalTok{, }\StringTok{"Charlie"}\NormalTok{, }\StringTok{"David"}\NormalTok{),}
                      \AttributeTok{Age =} \FunctionTok{c}\NormalTok{(}\DecValTok{25}\NormalTok{, }\DecValTok{30}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{35}\NormalTok{),}
                      \AttributeTok{City =} \FunctionTok{c}\NormalTok{(}\StringTok{"New York"}\NormalTok{, }\StringTok{"Los Angeles"}\NormalTok{, }\StringTok{"Chicago"}\NormalTok{, }\StringTok{"San Francisco"}\NormalTok{))}
\NormalTok{my\_data}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     Name Age          City
1   Alice  25      New York
2     Bob  30   Los Angeles
3 Charlie  22       Chicago
4   David  35 San Francisco
\end{verbatim}

Now we want to save this data frame as a CSV file in our working directory. To do this, we will use the \texttt{write\_csv()} function. The first argument is the data object you want to save, and the second argument is the file name (including the .csv extension).

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_csv}\NormalTok{(my\_data, }\StringTok{"my\_data.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

This command will save \texttt{my\_data} as a file called \texttt{my\_data.csv} in your working directory.

\textbf{Question 1:} What is the purpose of the \texttt{write\_csv()} function?

Click for answer

\textbf{Answer:}

The \texttt{write\_csv()} function is used to save a data object from an R session to a CSV file in your working directory.

\textbf{Question 2:} How do you save a data frame called \texttt{my\_data} as a file named ``example\_data.csv''?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Your code here}
\end{Highlighting}
\end{Shaded}

Click for answer

\textbf{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_csv}\NormalTok{(my\_data, }\StringTok{"example\_data.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\textbf{Question 3:} If you want to save a data frame called \texttt{students} as a file named ``student\_data.csv'', what would be the appropriate command?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Your code here}
\end{Highlighting}
\end{Shaded}

Click for answer

\textbf{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_csv}\NormalTok{(students, }\StringTok{"student\_data.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{class-activity-3}{%
\chapter{Class Activity 3}\label{class-activity-3}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# some interesting data objects}
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{3}\NormalTok{,}\DecValTok{6}\NormalTok{,}\DecValTok{9}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{10}\NormalTok{)}
\NormalTok{x.mat }\OtherTok{\textless{}{-}} \FunctionTok{cbind}\NormalTok{(x, }\DecValTok{2}\SpecialCharTok{*}\NormalTok{x)}
\NormalTok{x.df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x=}\NormalTok{x,}\AttributeTok{double.x=}\NormalTok{x}\SpecialCharTok{*}\DecValTok{2}\NormalTok{)}
\NormalTok{my.list }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\AttributeTok{myVec=}\NormalTok{x, }\AttributeTok{myDf=}\NormalTok{x.df, }\AttributeTok{myString=}\FunctionTok{c}\NormalTok{(}\StringTok{"hi"}\NormalTok{,}\StringTok{"bye"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\hypertarget{question-1-data-types}{%
\section{Question 1: data types}\label{question-1-data-types}}

\begin{itemize}
\tightlist
\item
  What data type is \texttt{x}?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{typeof}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "double"
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What data type is \texttt{c(x,\ x/2)}?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{typeof}\NormalTok{(}\FunctionTok{c}\NormalTok{(x, x}\SpecialCharTok{/}\DecValTok{2}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "double"
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What data type is \texttt{c(x,NA)}? What data type is \texttt{c(x,"NA")}?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{typeof}\NormalTok{(}\FunctionTok{c}\NormalTok{(x, }\ConstantTok{NA}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "double"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{typeof}\NormalTok{(}\FunctionTok{c}\NormalTok{(x, }\StringTok{"NA"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "character"
\end{verbatim}

\hypertarget{question-2-subsetting-and-coercion}{%
\section{Question 2: Subsetting and coercion}\label{question-2-subsetting-and-coercion}}

\begin{itemize}
\tightlist
\item
  How can we reverse the order of entries in \texttt{x}?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{rev}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 10  5  9  6  3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\FunctionTok{length}\NormalTok{(x)}\SpecialCharTok{:}\DecValTok{1}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 10  5  9  6  3
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What does \texttt{which(x\ \textless{}\ 5)} equal?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{which}\NormalTok{(x}\SpecialCharTok{\textless{}}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Extract the element of x that corresponds to the location in the preceding question.
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\NormalTok{x[}\FunctionTok{which}\NormalTok{(x}\SpecialCharTok{\textless{}}\DecValTok{5}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What does \texttt{sum(c(TRUE,FALSE,TRUE,FALSE))} equal?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{sum}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{,}\ConstantTok{FALSE}\NormalTok{,}\ConstantTok{TRUE}\NormalTok{,}\ConstantTok{FALSE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What does \texttt{sum(x{[}c(TRUE,FALSE,TRUE,FALSE){]})} equal?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{sum}\NormalTok{(x[}\FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{,}\ConstantTok{FALSE}\NormalTok{,}\ConstantTok{TRUE}\NormalTok{,}\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{)])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 22
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What does \texttt{sum(x\ \textless{}\ 5)} equal?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{sum}\NormalTok{(x }\SpecialCharTok{\textless{}} \DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What does \texttt{sum(x{[}x\ \textless{}\ 5{]})} equal?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{sum}\NormalTok{(x[x }\SpecialCharTok{\textless{}} \DecValTok{5}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Why \texttt{dim(x.mat{[}1:2,1{]})} return \texttt{NULL} while \texttt{dim(x.mat{[}1:2,1:2{]})} returns a dimension?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{dim}\NormalTok{(x.mat[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{,}\DecValTok{1}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
NULL
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(x.mat[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2 2
\end{verbatim}

\hypertarget{question-3-lists}{%
\section{Question 3: Lists}\label{question-3-lists}}

\begin{itemize}
\tightlist
\item
  Using \texttt{my.list}, show three ways to write one command that gives the 3rd entry of variable \texttt{x} in data frame \texttt{myDf}
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\NormalTok{my.list[[}\DecValTok{1}\NormalTok{]][}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.list[[}\StringTok{"myVec"}\NormalTok{]][}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.list[}\DecValTok{1}\NormalTok{]}\SpecialCharTok{$}\NormalTok{myVec[}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.list}\SpecialCharTok{$}\NormalTok{myVec[}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What class of object does the command \texttt{my.list{[}3{]}} return?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{class}\NormalTok{(my.list[}\DecValTok{3}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "list"
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What class of object does the command \texttt{my.list{[}{[}3{]}{]}} return?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{class}\NormalTok{(my.list[[}\DecValTok{3}\NormalTok{]])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "character"
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What class of object does the command \texttt{unlist(my.list)} return? Why are all the entries \texttt{character}s?
\end{itemize}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code}
\FunctionTok{class}\NormalTok{(}\FunctionTok{unlist}\NormalTok{(my.list))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "character"
\end{verbatim}

\hypertarget{class-activity-4}{%
\chapter{Class Activity 4}\label{class-activity-4}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Load the required libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(datasauRus)}
\end{Highlighting}
\end{Shaded}

\hypertarget{your-turn-1}{%
\section{Your turn 1}\label{your-turn-1}}

This worksheet will guide you through creating various plots using the \texttt{ggplot2} package in R. We will be using the \texttt{datasaurus}\_dozen dataset from the \texttt{datasauRus} package for demonstration purposes. The dataset contains 13 different datasets, and we'll use them to create a variety of plots.

\hypertarget{scatterplot}{%
\subsection{Scatterplot}\label{scatterplot}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Run the following code.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data, }\AttributeTok{mapping =} \FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x, }\AttributeTok{y =}\NormalTok{ y)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-3-1}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  You \emph{must} remember to put the aesthetic mappings in the \texttt{aes()} function! What happens if you forget?
\end{enumerate}

Click for answer

\emph{Answer:}

If you forget to put the aesthetic mappings inside the aes() function, ggplot2 will not be able to map the variables to the aesthetics correctly, and you might encounter an error or unexpected behavior in your plot.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Add a layer and see what happens}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data , }\AttributeTok{x =}\NormalTok{ x , }\AttributeTok{y =}\NormalTok{ y)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-4-1}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  The aesthetic mappings can be specified in the geom layer if you prefer, instead of the main \texttt{ggplot()} call. Give it a try:
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Rebuild the scatterplot with your aesthetic mapping in the geom layer}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data) }\SpecialCharTok{+}
   \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x, }\AttributeTok{y =}\NormalTok{ y)) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-5-1}

\hypertarget{bar-plot}{%
\subsection{Bar Plot}\label{bar-plot}}

In this problem, we'll explore creating a bar plot using the \texttt{datasaurus}\_dozen dataset.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Create a new data frame containing the count of observations in each dataset.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dataset\_counts }\OtherTok{\textless{}{-}}\NormalTok{ datasaurus\_dozen }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(dataset) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{count =} \FunctionTok{n}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Create a bar plot showing the number of observations in each dataset.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dataset\_counts, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ dataset, }\AttributeTok{y =}\NormalTok{ count)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{histogram}{%
\subsection{Histogram}\label{histogram}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Create a histogram of the \texttt{x} variable for the \texttt{dino} dataset.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \DecValTok{1}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-8-1}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Overlay a density curve on the histogram.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =} \FunctionTok{after\_stat}\NormalTok{(density)), }\AttributeTok{binwidth =} \DecValTok{2}\NormalTok{, }\AttributeTok{fill =} \StringTok{"lightblue"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_density}\NormalTok{(}\AttributeTok{color =} \StringTok{"red"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-9-1}

\hypertarget{boxplot}{%
\subsection{Boxplot}\label{boxplot}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Create a boxplot of the x variable for each dataset in datasaurus\_dozen.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ datasaurus\_dozen, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ dataset, }\AttributeTok{y =}\NormalTok{ x)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-10-1}

\hypertarget{faceting}{%
\subsection{Faceting}\label{faceting}}

Click for answer

\emph{Answer:}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Create a scatterplot of \texttt{x} vs.~\texttt{y} for each dataset in \texttt{datasaurus\_dozen} using \texttt{facet\_wrap()}.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ datasaurus\_dozen, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x, }\AttributeTok{y =}\NormalTok{ y)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{facet\_wrap}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{ dataset) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-11-1}

\hypertarget{variable-transformation}{%
\subsection{Variable Transformation}\label{variable-transformation}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  The scatterplot of the \texttt{dino} dataset without any transformations is given below.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x, }\AttributeTok{y =}\NormalTok{ y)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{() }\OtherTok{{-}\textgreater{}}\NormalTok{ p1}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Now, apply the square root transformation to both the \texttt{x} and \texttt{y} axes using the \texttt{scale\_x\_sqrt()} and \texttt{scale\_y\_sqrt()} functions in the \texttt{dino} dataset.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x, }\AttributeTok{y =}\NormalTok{ y)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_sqrt}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{scale\_y\_sqrt}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{() }\OtherTok{{-}\textgreater{}}\NormalTok{ p2}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Finally, use \texttt{grid.arrange()} function from \texttt{gridExtra} package to plot the above two plots side-by-side. Which plot do you prefer and why?
\end{enumerate}

Click for answer

\emph{Answer:} The second plot is more revealing of a dinosaur than the first plot.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(gridExtra)}
\FunctionTok{grid.arrange}\NormalTok{(p1, p2, }\AttributeTok{nrow =} \DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-14-1}

\hypertarget{optional-lne-plot}{%
\subsection{(Optional) Lne plot}\label{optional-lne-plot}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Create a line plot of the \texttt{x} variable over the \texttt{y} variable for the \texttt{dino} dataset. To make it more interesting, let's first calculate the rolling mean of the \texttt{y} variable.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dino\_data }\OtherTok{\textless{}{-}}\NormalTok{ dino\_data }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(x) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{rolling\_mean\_y =}\NormalTok{ zoo}\SpecialCharTok{::}\FunctionTok{rollmean}\NormalTok{(y, }\AttributeTok{k =} \DecValTok{5}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NA}\NormalTok{))}

\CommentTok{\# Line plot}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ dino\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x, }\AttributeTok{y =}\NormalTok{ rolling\_mean\_y)) }\SpecialCharTok{+}
  \FunctionTok{geom\_line}\NormalTok{(}\AttributeTok{color =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_4_files/figure-latex/unnamed-chunk-15-1}

\hypertarget{class-activity-5}{%
\chapter{Class Activity 5}\label{class-activity-5}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Load the required libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(ggthemes)}
\end{Highlighting}
\end{Shaded}

\hypertarget{problem-1-changing-color-and-shape-scales}{%
\section{Problem 1: Changing color and shape scales}\label{problem-1-changing-color-and-shape-scales}}

In this problem, you will learn about the effects of changing colors, scales, and shapes in \texttt{ggplot2} for both gradient and discrete color choices. You will be given a series of questions and examples to enhance your understanding. Consider the following scatter plot

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Generate sample data}
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{42}\NormalTok{)}
\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Category =} \FunctionTok{factor}\NormalTok{(}\FunctionTok{sample}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\DecValTok{50}\NormalTok{, }\AttributeTok{replace =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{labels =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"C"}\NormalTok{)),}
  \AttributeTok{X =} \DecValTok{10} \SpecialCharTok{\^{}} \FunctionTok{rnorm}\NormalTok{(}\DecValTok{50}\NormalTok{, }\AttributeTok{mean =} \DecValTok{2}\NormalTok{, }\AttributeTok{sd =} \DecValTok{1}\NormalTok{),}
  \AttributeTok{Y =} \FunctionTok{rnorm}\NormalTok{(}\DecValTok{50}\NormalTok{, }\AttributeTok{mean =} \DecValTok{0}\NormalTok{, }\AttributeTok{sd =} \DecValTok{1}\NormalTok{)}
\NormalTok{)}

\NormalTok{p }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ X, }\AttributeTok{y =}\NormalTok{ Y, }\AttributeTok{color =}\NormalTok{ Category)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{size =} \DecValTok{3}\NormalTok{)}

\NormalTok{p}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-2-1}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Modify the scatter plot to use custom colors for each category using \texttt{scale\_color\_manual()}. What is the effect of changing the colors on the plot's readability?
\end{enumerate}

Click for answer

\emph{Answer:} Changing colors using \texttt{scale\_color\_manual()} allows for better distinction between categories and enhances the plot's readability.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ X, }\AttributeTok{y =}\NormalTok{ Y, }\AttributeTok{color =}\NormalTok{ Category)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{size =} \DecValTok{3}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_manual}\NormalTok{(}\AttributeTok{values =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"} \OtherTok{=} \StringTok{"red"}\NormalTok{, }\StringTok{"B"} \OtherTok{=} \StringTok{"blue"}\NormalTok{, }\StringTok{"C"} \OtherTok{=} \StringTok{"green"}\NormalTok{))}
\NormalTok{p}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-3-1}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Modify the scatter plot to use custom shapes for each category using \texttt{scale\_shape\_manual()}. What is the effect of changing the shapes on the plot's readability?
\end{enumerate}

Click for answer

\emph{Answer:} Changing the shapes using scale\_shape\_manual() helps to distinguish between categories and improves the plot's readability

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ X, }\AttributeTok{y =}\NormalTok{ Y, }\AttributeTok{shape =}\NormalTok{ Category)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{size =} \DecValTok{3}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_shape\_manual}\NormalTok{(}\AttributeTok{values =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"} \OtherTok{=} \DecValTok{16}\NormalTok{, }\StringTok{"B"} \OtherTok{=} \DecValTok{17}\NormalTok{, }\StringTok{"C"} \OtherTok{=} \DecValTok{18}\NormalTok{))}

\NormalTok{p}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-4-1}

\hypertarget{problem-2-us-maps}{%
\section{Problem 2: US maps}\label{problem-2-us-maps}}

Now, let's learn about the effect of changing various coordinate systems in \texttt{ggplot2} using a map example from the \texttt{usmap} package. We will explore the different types of coordinate systems available in ggplot2 and how they can be applied to the map visualization.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("usmap")   \#uncomment to install}
\FunctionTok{library}\NormalTok{(usmap)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a.-plot-a-simple-map-of-the-united-states-using-ggplot2-and-the-usmap-package.}{%
\subsection{\texorpdfstring{a. Plot a simple map of the United States using \texttt{ggplot2} and the \texttt{usmap} package.}{a. Plot a simple map of the United States using ggplot2 and the usmap package.}}\label{a.-plot-a-simple-map-of-the-united-states-using-ggplot2-and-the-usmap-package.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{us }\OtherTok{\textless{}{-}} \FunctionTok{plot\_usmap}\NormalTok{()}
\NormalTok{us}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-6-1}

\hypertarget{b.-apply-the-coord_flip-function-to-the-map-to-flip-the-x-and-y-axes.}{%
\subsection{\texorpdfstring{b. Apply the \texttt{coord\_flip()} function to the map to flip the x and y axes.}{b. Apply the coord\_flip() function to the map to flip the x and y axes.}}\label{b.-apply-the-coord_flip-function-to-the-map-to-flip-the-x-and-y-axes.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{us\_flipped }\OtherTok{\textless{}{-}}\NormalTok{ us }\SpecialCharTok{+} \FunctionTok{coord\_flip}\NormalTok{()}
\NormalTok{us\_flipped}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{c.-apply-the-coord_polar-function-to-the-map-to-transform-the-plot-to-a-polar-coordinate-system}{%
\subsection{\texorpdfstring{c.~Apply the \texttt{coord\_polar()} function to the map to transform the plot to a polar coordinate system}{c.~Apply the coord\_polar() function to the map to transform the plot to a polar coordinate system}}\label{c.-apply-the-coord_polar-function-to-the-map-to-transform-the-plot-to-a-polar-coordinate-system}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{us\_polar }\OtherTok{\textless{}{-}}\NormalTok{ us }\SpecialCharTok{+} \FunctionTok{coord\_polar}\NormalTok{()}
\NormalTok{us\_polar}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-8-1}

\hypertarget{d.-apply-the-coord_quickmap-function-to-the-map-to-provide-an-approximation-for-a-map-projection.}{%
\subsection{\texorpdfstring{d.~Apply the \texttt{coord\_quickmap()} function to the map to provide an approximation for a map projection.}{d.~Apply the coord\_quickmap() function to the map to provide an approximation for a map projection.}}\label{d.-apply-the-coord_quickmap-function-to-the-map-to-provide-an-approximation-for-a-map-projection.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{us\_quickmap }\OtherTok{\textless{}{-}}\NormalTok{ us }\SpecialCharTok{+} \FunctionTok{coord\_quickmap}\NormalTok{()}
\NormalTok{us\_quickmap}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-9-1}

\hypertarget{problem-3-chloropeth-map}{%
\section{Problem 3: Chloropeth map}\label{problem-3-chloropeth-map}}

In today's class we created \texttt{cloropleth} maps of states in the US based on ACS data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{states }\OtherTok{\textless{}{-}} \FunctionTok{map\_data}\NormalTok{(}\StringTok{"state"}\NormalTok{)}
\NormalTok{ACS }\OtherTok{\textless{}{-}}\NormalTok{ ACS }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/ACS.csv"}\NormalTok{)}
\NormalTok{ACS }\OtherTok{\textless{}{-}}\NormalTok{ dplyr}\SpecialCharTok{::}\FunctionTok{filter}\NormalTok{(ACS, }\SpecialCharTok{!}\NormalTok{(region  }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"Alaska"}\NormalTok{, }\StringTok{"Hawaii"}\NormalTok{))) }\CommentTok{\# only 48+D.C.}
\NormalTok{ACS}\SpecialCharTok{$}\NormalTok{region }\OtherTok{\textless{}{-}} \FunctionTok{tolower}\NormalTok{(ACS}\SpecialCharTok{$}\NormalTok{region)  }\CommentTok{\# lower case (match states regions)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a-mapping-median-income}{%
\subsection{(a) Mapping median income}\label{a-mapping-median-income}}

Create a \texttt{cloropleth} plot that uses color to create a \texttt{MedianIncome} map of the US.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# map median income}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{ACS) }\SpecialCharTok{+} \FunctionTok{coord\_map}\NormalTok{() }\SpecialCharTok{+} 
  \FunctionTok{geom\_map}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{map\_id =}\NormalTok{ region, }\AttributeTok{fill =}\NormalTok{ MedianIncome), }\AttributeTok{map =}\NormalTok{ states) }\SpecialCharTok{+}
  \FunctionTok{expand\_limits}\NormalTok{(}\AttributeTok{x=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{long, }\AttributeTok{y=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{lat) }\SpecialCharTok{+} \FunctionTok{ggtitle}\NormalTok{(}\StringTok{"Median Income"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-11-1}

\hypertarget{b-mapping-deviations-from-national-median-income}{%
\subsection{(b) Mapping deviations from national median income}\label{b-mapping-deviations-from-national-median-income}}

The median income in the US in 2016 was estimated to be \$27,000. Redraw your map in (a) to visualize each state's deviation from national median income.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# compare state income to national income}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{ACS) }\SpecialCharTok{+} \FunctionTok{coord\_map}\NormalTok{() }\SpecialCharTok{+} 
  \FunctionTok{geom\_map}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{map\_id =}\NormalTok{ region, }\AttributeTok{fill =}\NormalTok{ MedianIncome }\SpecialCharTok{{-}} \DecValTok{27000}\NormalTok{), }\AttributeTok{map =}\NormalTok{ states) }\SpecialCharTok{+}
  \FunctionTok{expand\_limits}\NormalTok{(}\AttributeTok{x=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{long, }\AttributeTok{y=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{lat) }\SpecialCharTok{+} \FunctionTok{ggtitle}\NormalTok{(}\StringTok{"Deviation from national median income"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-12-1}

\hypertarget{c-changing-numerically-scaled-color}{%
\subsection{(c) Changing numerically scaled color}\label{c-changing-numerically-scaled-color}}

You should use a \emph{diverging} color for (b) to highlight larger deviations from the national median. Add \texttt{scale\_fill\_distiller} to the map from (b) and select a diverging palette.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# change to a diverging color}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{ACS) }\SpecialCharTok{+} \FunctionTok{coord\_map}\NormalTok{() }\SpecialCharTok{+} 
  \FunctionTok{geom\_map}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{map\_id =}\NormalTok{ region, }\AttributeTok{fill =}\NormalTok{ MedianIncome }\SpecialCharTok{{-}} \DecValTok{27000}\NormalTok{), }\AttributeTok{map =}\NormalTok{ states) }\SpecialCharTok{+}
  \FunctionTok{expand\_limits}\NormalTok{(}\AttributeTok{x=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{long, }\AttributeTok{y=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{lat) }\SpecialCharTok{+} \FunctionTok{ggtitle}\NormalTok{(}\StringTok{"Deviation from national median income"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{scale\_fill\_distiller}\NormalTok{(}\AttributeTok{type =} \StringTok{"div"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-13-1}

\hypertarget{d-fixing-a-midpoint-on-a-diverging-scale}{%
\subsection{(d) Fixing a midpoint on a diverging scale}\label{d-fixing-a-midpoint-on-a-diverging-scale}}

Use \texttt{scale\_fill\_gradient2} to fix a midpoint scale value at white color, with diverging colors for larger positive and negative values. Apply these colors to your map in (b) and fix the \texttt{midpoint} at an appropriate value.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# change to a gradient fill color}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data=}\NormalTok{ACS) }\SpecialCharTok{+} \FunctionTok{coord\_map}\NormalTok{() }\SpecialCharTok{+} 
  \FunctionTok{geom\_map}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{map\_id =}\NormalTok{ region, }\AttributeTok{fill =}\NormalTok{ MedianIncome }\SpecialCharTok{{-}} \DecValTok{27000}\NormalTok{), }\AttributeTok{map =}\NormalTok{ states) }\SpecialCharTok{+}
  \FunctionTok{expand\_limits}\NormalTok{(}\AttributeTok{x=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{long, }\AttributeTok{y=}\NormalTok{states}\SpecialCharTok{$}\NormalTok{lat) }\SpecialCharTok{+} \FunctionTok{ggtitle}\NormalTok{(}\StringTok{"Deviation from national median income"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{scale\_fill\_gradient2}\NormalTok{(}
    \AttributeTok{low =} \StringTok{"lightblue"}\NormalTok{,    }\CommentTok{\# Set the low color to red}
    \AttributeTok{mid =} \StringTok{"white"}\NormalTok{, }\CommentTok{\# Set the mid color to yellow}
    \AttributeTok{high =} \StringTok{"maroon"}\NormalTok{, }\CommentTok{\# Set the high color to green}
    \AttributeTok{midpoint =} \DecValTok{0}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-14-1}

\hypertarget{optional}{%
\section{(Optional)}\label{optional}}

Let's learn how to create a polar bar plot with custom colors.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Category =} \FunctionTok{factor}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{12}\NormalTok{, }\AttributeTok{labels =}\NormalTok{ month.abb),}
  \AttributeTok{Value =} \FunctionTok{c}\NormalTok{(}\DecValTok{30}\NormalTok{, }\DecValTok{28}\NormalTok{, }\DecValTok{50}\NormalTok{, }\DecValTok{45}\NormalTok{, }\DecValTok{60}\NormalTok{, }\DecValTok{75}\NormalTok{, }\DecValTok{80}\NormalTok{, }\DecValTok{77}\NormalTok{, }\DecValTok{60}\NormalTok{, }\DecValTok{48}\NormalTok{, }\DecValTok{32}\NormalTok{, }\DecValTok{20}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Category, }\AttributeTok{y =}\NormalTok{ Value, }\AttributeTok{fill =}\NormalTok{ Category)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{, }\AttributeTok{width =} \DecValTok{1}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{coord\_polar}\NormalTok{(}\AttributeTok{theta =} \StringTok{"y"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_brewer}\NormalTok{(}\AttributeTok{palette =} \StringTok{"Set3"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Polar Bar Plot Example"}\NormalTok{, }\AttributeTok{x =} \StringTok{"Month"}\NormalTok{, }\AttributeTok{y =} \StringTok{"Value"}\NormalTok{)}
\NormalTok{p}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_5_files/figure-latex/unnamed-chunk-16-1}

\hypertarget{class-activity-6}{%
\chapter{Class Activity 6}\label{class-activity-6}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(babynames)}
\end{Highlighting}
\end{Shaded}

We will work with the \texttt{babynames} dataset again in this class activity. The header of the dataset looks like this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{(}\FunctionTok{head}\NormalTok{(babynames))}
\end{Highlighting}
\end{Shaded}

\begin{tabular}{r|l|l|r|r}
\hline
year & sex & name & n & prop\\
\hline
1880 & F & Mary & 7065 & 0.0723836\\
\hline
1880 & F & Anna & 2604 & 0.0266790\\
\hline
1880 & F & Emma & 2003 & 0.0205215\\
\hline
1880 & F & Elizabeth & 1939 & 0.0198658\\
\hline
1880 & F & Minnie & 1746 & 0.0178884\\
\hline
1880 & F & Margaret & 1578 & 0.0161672\\
\hline
\end{tabular}

In this tutorial, we will learn about the five main verbs of dplyr and how to use them to manipulate data:

\begin{itemize}
\tightlist
\item
  \texttt{select()}: Choose columns from a data frame
\item
  \texttt{filter()}: Choose rows based on a condition
\item
  \texttt{arrange()}: Sort the rows of a data frame
\item
  \texttt{mutate()}: Add new columns based on existing columns
\item
  \texttt{summarise()}: Aggregate data and compute summary statistics
\end{itemize}

\hypertarget{problem-1-select}{%
\section{\texorpdfstring{Problem 1: \texttt{select()}}{Problem 1: select()}}\label{problem-1-select}}

Which of these is NOT a way to select the \texttt{name} and \texttt{n} columns together?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{select}\NormalTok{(babynames, }\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(year, sex, prop))  }\CommentTok{\#1}
\FunctionTok{select}\NormalTok{(babynames, name}\SpecialCharTok{:}\NormalTok{n)   }\CommentTok{\#2}
\FunctionTok{select}\NormalTok{(babynames, }\FunctionTok{starts\_with}\NormalTok{(}\StringTok{"n"}\NormalTok{)) }\CommentTok{\#3}
\FunctionTok{select}\NormalTok{(babynames, }\FunctionTok{ends\_with}\NormalTok{(}\StringTok{"n"}\NormalTok{))  }\CommentTok{\#4}
\end{Highlighting}
\end{Shaded}

Click for answer

\emph{Answer:} 4 is not the way to select the \texttt{name} and \texttt{n} columns together

\hypertarget{problem-2-filter}{%
\section{\texorpdfstring{Problem 2: \texttt{filter()}}{Problem 2: filter()}}\label{problem-2-filter}}

Use \texttt{filter()} with the logical operators to extract:

\hypertarget{a.-all-of-the-names-where-prop-is-greater-than-or-equal-to-0.08}{%
\subsection{a. All of the names where prop is greater than or equal to 0.08}\label{a.-all-of-the-names-where-prop-is-greater-than-or-equal-to-0.08}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(babynames, prop }\SpecialCharTok{\textgreater{}=} \FloatTok{0.08}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 5
   year sex   name        n   prop
  <dbl> <chr> <chr>   <int>  <dbl>
1  1880 M     John     9655 0.0815
2  1880 M     William  9532 0.0805
3  1881 M     John     8769 0.0810
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# alternate}
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(prop }\SpecialCharTok{\textgreater{}=} \FloatTok{0.08}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 5
   year sex   name        n   prop
  <dbl> <chr> <chr>   <int>  <dbl>
1  1880 M     John     9655 0.0815
2  1880 M     William  9532 0.0805
3  1881 M     John     8769 0.0810
\end{verbatim}

\hypertarget{b.-all-of-the-babies-named-rose}{%
\subsection{b. All of the babies named ``Rose''}\label{b.-all-of-the-babies-named-rose}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Rose"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 247 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     Rose    700 0.00717  
 2  1880 M     Rose      7 0.0000591
 3  1881 F     Rose    734 0.00743  
 4  1882 F     Rose    886 0.00766  
 5  1883 F     Rose    877 0.00730  
 6  1883 M     Rose      5 0.0000445
 7  1884 F     Rose   1060 0.00770  
 8  1884 M     Rose      5 0.0000407
 9  1885 F     Rose   1164 0.00820  
10  1885 M     Rose      9 0.0000776
# ... with 237 more rows
\end{verbatim}

\hypertarget{c.-use-filter-to-choose-all-rows-where-name-is-john-and-sex-is-m.}{%
\subsection{c.~Use filter() to choose all rows where name is ``John'' and sex is ``M''.}\label{c.-use-filter-to-choose-all-rows-where-name-is-john-and-sex-is-m.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"John"}\NormalTok{, sex }\SpecialCharTok{==} \StringTok{"M"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 138 x 5
    year sex   name      n   prop
   <dbl> <chr> <chr> <int>  <dbl>
 1  1880 M     John   9655 0.0815
 2  1881 M     John   8769 0.0810
 3  1882 M     John   9557 0.0783
 4  1883 M     John   8894 0.0791
 5  1884 M     John   9388 0.0765
 6  1885 M     John   8756 0.0755
 7  1886 M     John   9026 0.0758
 8  1887 M     John   8110 0.0742
 9  1888 M     John   9247 0.0712
10  1889 M     John   8548 0.0718
# ... with 128 more rows
\end{verbatim}

\hypertarget{problem-3-arrange}{%
\section{\texorpdfstring{Problem 3: \texttt{arrange()}}{Problem 3: arrange()}}\label{problem-3-arrange}}

\hypertarget{a.-use-arrange-to-sort-the-babynames-dataset-by-the-prop-column-in-descending-order.}{%
\subsection{\texorpdfstring{a. Use \texttt{arrange()} to sort the babynames dataset by the prop column in descending order.}{a. Use arrange() to sort the babynames dataset by the prop column in descending order.}}\label{a.-use-arrange-to-sort-the-babynames-dataset-by-the-prop-column-in-descending-order.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{arrange}\NormalTok{(}\FunctionTok{desc}\NormalTok{(prop))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1,924,665 x 5
    year sex   name        n   prop
   <dbl> <chr> <chr>   <int>  <dbl>
 1  1880 M     John     9655 0.0815
 2  1881 M     John     8769 0.0810
 3  1880 M     William  9532 0.0805
 4  1883 M     John     8894 0.0791
 5  1881 M     William  8524 0.0787
 6  1882 M     John     9557 0.0783
 7  1884 M     John     9388 0.0765
 8  1882 M     William  9298 0.0762
 9  1886 M     John     9026 0.0758
10  1885 M     John     8756 0.0755
# ... with 1,924,655 more rows
\end{verbatim}

\hypertarget{b.-use-arrange-to-sort-the-babynames-dataset-by-year-ascending-and-then-by-prop-descending.}{%
\subsection{\texorpdfstring{b. Use \texttt{arrange()} to sort the babynames dataset by year (ascending) and then by prop (descending).}{b. Use arrange() to sort the babynames dataset by year (ascending) and then by prop (descending).}}\label{b.-use-arrange-to-sort-the-babynames-dataset-by-year-ascending-and-then-by-prop-descending.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{arrange}\NormalTok{(year, }\FunctionTok{desc}\NormalTok{(prop))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1,924,665 x 5
    year sex   name        n   prop
   <dbl> <chr> <chr>   <int>  <dbl>
 1  1880 M     John     9655 0.0815
 2  1880 M     William  9532 0.0805
 3  1880 F     Mary     7065 0.0724
 4  1880 M     James    5927 0.0501
 5  1880 M     Charles  5348 0.0452
 6  1880 M     George   5126 0.0433
 7  1880 M     Frank    3242 0.0274
 8  1880 F     Anna     2604 0.0267
 9  1880 M     Joseph   2632 0.0222
10  1880 M     Thomas   2534 0.0214
# ... with 1,924,655 more rows
\end{verbatim}

\hypertarget{problem-4-mutate}{%
\section{\texorpdfstring{Problem 4: \texttt{mutate()}}{Problem 4: mutate()}}\label{problem-4-mutate}}

\hypertarget{a.-use-mutate-to-create-a-new-column-called-decade-which-contains-the-decade-the-record-is-in-e.g.-1990-for-the-years-1990-1999.}{%
\subsection{\texorpdfstring{a. Use \texttt{mutate()} to create a new column called decade which contains the decade the record is in (e.g., 1990 for the years 1990-1999).}{a. Use mutate() to create a new column called decade which contains the decade the record is in (e.g., 1990 for the years 1990-1999).}}\label{a.-use-mutate-to-create-a-new-column-called-decade-which-contains-the-decade-the-record-is-in-e.g.-1990-for-the-years-1990-1999.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{decade =}\NormalTok{ (year }\SpecialCharTok{\%/\%} \DecValTok{10}\NormalTok{) }\SpecialCharTok{*} \DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1,924,665 x 6
    year sex   name          n   prop decade
   <dbl> <chr> <chr>     <int>  <dbl>  <dbl>
 1  1880 F     Mary       7065 0.0724   1880
 2  1880 F     Anna       2604 0.0267   1880
 3  1880 F     Emma       2003 0.0205   1880
 4  1880 F     Elizabeth  1939 0.0199   1880
 5  1880 F     Minnie     1746 0.0179   1880
 6  1880 F     Margaret   1578 0.0162   1880
 7  1880 F     Ida        1472 0.0151   1880
 8  1880 F     Alice      1414 0.0145   1880
 9  1880 F     Bertha     1320 0.0135   1880
10  1880 F     Sarah      1288 0.0132   1880
# ... with 1,924,655 more rows
\end{verbatim}

\hypertarget{problem-5-summarize-or-summarise}{%
\section{\texorpdfstring{Problem 5: \texttt{summarize()} or \texttt{summarise()}}{Problem 5: summarize() or summarise()}}\label{problem-5-summarize-or-summarise}}

Use the codes mentioned so far to compute three statistics:

\begin{itemize}
\tightlist
\item
  the total number of children who ever had your name
\item
  the maximum number of children given your name in a single year
\item
  the mean number of children given your name per year/decade (optional)
\end{itemize}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Dee"}\NormalTok{, sex }\SpecialCharTok{==} \StringTok{"M"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 136 x 5
    year sex   name      n     prop
   <dbl> <chr> <chr> <int>    <dbl>
 1  1880 M     Dee      20 0.000169
 2  1881 M     Dee      32 0.000296
 3  1882 M     Dee      23 0.000188
 4  1883 M     Dee      22 0.000196
 5  1884 M     Dee      27 0.000220
 6  1885 M     Dee      28 0.000241
 7  1886 M     Dee      26 0.000218
 8  1887 M     Dee      39 0.000357
 9  1888 M     Dee      35 0.000269
10  1889 M     Dee      24 0.000202
# ... with 126 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Dee"}\NormalTok{, sex }\SpecialCharTok{==} \StringTok{"M"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{max\_number =} \FunctionTok{max}\NormalTok{(n))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 1
  max_number
       <int>
1        125
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Dee"}\NormalTok{, sex }\SpecialCharTok{==} \StringTok{"M"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{decade =}\NormalTok{ (year }\SpecialCharTok{\%/\%} \DecValTok{10}\NormalTok{) }\SpecialCharTok{*} \DecValTok{10}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(decade) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{total =} \FunctionTok{sum}\NormalTok{(n),}
            \AttributeTok{max =} \FunctionTok{max}\NormalTok{(n), }
            \AttributeTok{mean =} \FunctionTok{mean}\NormalTok{(n))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 14 x 4
   decade total   max   mean
    <dbl> <int> <int>  <dbl>
 1   1880   276    39  27.6 
 2   1890   271    43  27.1 
 3   1900   302    38  30.2 
 4   1910   818   125  81.8 
 5   1920  1090   125 109   
 6   1930  1010   118 101   
 7   1940   967   120  96.7 
 8   1950   957   118  95.7 
 9   1960   683   102  68.3 
10   1970   380    57  38   
11   1980   217    30  21.7 
12   1990   130    17  13   
13   2000    87    13   9.67
14   2010    52    12   7.43
\end{verbatim}

\hypertarget{problem-6}{%
\section{Problem 6}\label{problem-6}}

\hypertarget{a.-use-min_rank-and-mutate-to-rank-each-row-in-babynames-from-largest-prop-to-smallest-prop.}{%
\subsection{\texorpdfstring{a. Use \texttt{min\_rank()} and \texttt{mutate()} to rank each row in babynames from largest prop to smallest prop.}{a. Use min\_rank() and mutate() to rank each row in babynames from largest prop to smallest prop.}}\label{a.-use-min_rank-and-mutate-to-rank-each-row-in-babynames-from-largest-prop-to-smallest-prop.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{rank =} \FunctionTok{min\_rank}\NormalTok{(}\FunctionTok{desc}\NormalTok{(prop))) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{arrange}\NormalTok{(rank)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1,924,665 x 6
    year sex   name        n   prop  rank
   <dbl> <chr> <chr>   <int>  <dbl> <int>
 1  1880 M     John     9655 0.0815     1
 2  1881 M     John     8769 0.0810     2
 3  1880 M     William  9532 0.0805     3
 4  1883 M     John     8894 0.0791     4
 5  1881 M     William  8524 0.0787     5
 6  1882 M     John     9557 0.0783     6
 7  1884 M     John     9388 0.0765     7
 8  1882 M     William  9298 0.0762     8
 9  1886 M     John     9026 0.0758     9
10  1885 M     John     8756 0.0755    10
# ... with 1,924,655 more rows
\end{verbatim}

\hypertarget{b.-compute-each-names-rank-within-its-year-and-sex.}{%
\subsection{b. Compute each name's rank within its year and sex.}\label{b.-compute-each-names-rank-within-its-year-and-sex.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(year, sex) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{rank =} \FunctionTok{min\_rank}\NormalTok{(}\FunctionTok{desc}\NormalTok{(prop)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1,924,665 x 6
# Groups:   year, sex [276]
    year sex   name          n   prop  rank
   <dbl> <chr> <chr>     <int>  <dbl> <int>
 1  1880 F     Mary       7065 0.0724     1
 2  1880 F     Anna       2604 0.0267     2
 3  1880 F     Emma       2003 0.0205     3
 4  1880 F     Elizabeth  1939 0.0199     4
 5  1880 F     Minnie     1746 0.0179     5
 6  1880 F     Margaret   1578 0.0162     6
 7  1880 F     Ida        1472 0.0151     7
 8  1880 F     Alice      1414 0.0145     8
 9  1880 F     Bertha     1320 0.0135     9
10  1880 F     Sarah      1288 0.0132    10
# ... with 1,924,655 more rows
\end{verbatim}

\hypertarget{c.-then-compute-the-median-rank-for-each-combination-of-name-and-sex-and-arrange-the-results-from-highest-median-rank-to-lowest.}{%
\subsection{c.~Then compute the median rank for each combination of name and sex, and arrange the results from highest median rank to lowest.}\label{c.-then-compute-the-median-rank-for-each-combination-of-name-and-sex-and-arrange-the-results-from-highest-median-rank-to-lowest.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(year, sex) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{rank =} \FunctionTok{min\_rank}\NormalTok{(}\FunctionTok{desc}\NormalTok{(prop))) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(name, sex) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{score =} \FunctionTok{median}\NormalTok{(rank)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(score) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 107,973 x 3
# Groups:   name [97,310]
   name      sex   score
   <chr>     <chr> <dbl>
 1 Mary      F       1  
 2 James     M       3  
 3 John      M       3  
 4 William   M       4  
 5 Robert    M       6  
 6 Michael   M       7.5
 7 Charles   M       9  
 8 Elizabeth F      10  
 9 Joseph    M      10  
10 Thomas    M      11  
# ... with 107,963 more rows
\end{verbatim}

\hypertarget{class-activity-7}{%
\chapter{Class Activity 7}\label{class-activity-7}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(babynames)}
\end{Highlighting}
\end{Shaded}

\hypertarget{problem-1-boolean-operators}{%
\section{Problem 1: Boolean Operators}\label{problem-1-boolean-operators}}

Use Boolean operators to alter the code below to return only the rows that contain:

\hypertarget{a.-girls-named-rhea}{%
\subsection{a. Girls named Rhea}\label{a.-girls-named-rhea}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(babynames, name }\SpecialCharTok{==} \StringTok{"Rhea"}\NormalTok{, sex }\SpecialCharTok{==} \StringTok{"F"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 136 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1882 F     Rhea      7 0.0000605
 2  1883 F     Rhea      8 0.0000666
 3  1884 F     Rhea     13 0.0000945
 4  1885 F     Rhea     11 0.0000775
 5  1886 F     Rhea     13 0.0000846
 6  1887 F     Rhea     14 0.0000901
 7  1888 F     Rhea     20 0.000106 
 8  1889 F     Rhea     31 0.000164 
 9  1890 F     Rhea     39 0.000193 
10  1891 F     Rhea     24 0.000122 
# ... with 126 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%}  \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Rhea"}\NormalTok{, sex }\SpecialCharTok{==} \StringTok{"F"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 136 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1882 F     Rhea      7 0.0000605
 2  1883 F     Rhea      8 0.0000666
 3  1884 F     Rhea     13 0.0000945
 4  1885 F     Rhea     11 0.0000775
 5  1886 F     Rhea     13 0.0000846
 6  1887 F     Rhea     14 0.0000901
 7  1888 F     Rhea     20 0.000106 
 8  1889 F     Rhea     31 0.000164 
 9  1890 F     Rhea     39 0.000193 
10  1891 F     Rhea     24 0.000122 
# ... with 126 more rows
\end{verbatim}

\hypertarget{b.-names-that-were-used-by-exactly-5-or-6-children-in-1990}{%
\subsection{b. Names that were used by exactly 5 or 6 children in 1990}\label{b.-names-that-were-used-by-exactly-5-or-6-children-in-1990}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(babynames, year }\SpecialCharTok{==} \DecValTok{1990}\NormalTok{, n }\SpecialCharTok{==} \DecValTok{5} \SpecialCharTok{|}\NormalTok{ n }\SpecialCharTok{==} \DecValTok{6}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6,144 x 5
    year sex   name         n       prop
   <dbl> <chr> <chr>    <int>      <dbl>
 1  1990 F     Aariel       6 0.00000292
 2  1990 F     Aarion       6 0.00000292
 3  1990 F     Abagael      6 0.00000292
 4  1990 F     Abbye        6 0.00000292
 5  1990 F     Abiola       6 0.00000292
 6  1990 F     Abreanna     6 0.00000292
 7  1990 F     Abygail      6 0.00000292
 8  1990 F     Acadia       6 0.00000292
 9  1990 F     Adilenne     6 0.00000292
10  1990 F     Adriena      6 0.00000292
# ... with 6,134 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(year }\SpecialCharTok{==} \StringTok{"1990"}\NormalTok{, n }\SpecialCharTok{==} \DecValTok{5} \SpecialCharTok{|}\NormalTok{ n }\SpecialCharTok{==} \DecValTok{6}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6,144 x 5
    year sex   name         n       prop
   <dbl> <chr> <chr>    <int>      <dbl>
 1  1990 F     Aariel       6 0.00000292
 2  1990 F     Aarion       6 0.00000292
 3  1990 F     Abagael      6 0.00000292
 4  1990 F     Abbye        6 0.00000292
 5  1990 F     Abiola       6 0.00000292
 6  1990 F     Abreanna     6 0.00000292
 7  1990 F     Abygail      6 0.00000292
 8  1990 F     Acadia       6 0.00000292
 9  1990 F     Adilenne     6 0.00000292
10  1990 F     Adriena      6 0.00000292
# ... with 6,134 more rows
\end{verbatim}

\hypertarget{c.-names-that-are-one-of-apple-yoroi-ada}{%
\subsection{c.~Names that are one of Apple, Yoroi, Ada}\label{c.-names-that-are-one-of-apple-yoroi-ada}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(babynames, name }\SpecialCharTok{==} \StringTok{"Apple"} \SpecialCharTok{|}\NormalTok{ name }\SpecialCharTok{==} \StringTok{"Yoroi"} \SpecialCharTok{|}\NormalTok{ name }\SpecialCharTok{==} \StringTok{"Ada"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 200 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     Ada     652 0.00668  
 2  1881 F     Ada     628 0.00635  
 3  1882 F     Ada     689 0.00596  
 4  1883 F     Ada     778 0.00648  
 5  1884 F     Ada     854 0.00621  
 6  1885 F     Ada     876 0.00617  
 7  1885 M     Ada       5 0.0000431
 8  1886 F     Ada     915 0.00595  
 9  1886 M     Ada       6 0.0000504
10  1887 F     Ada     910 0.00586  
# ... with 190 more rows
\end{verbatim}

\hypertarget{d.-store-the-data-tibble-in-part-c-into-a-new-tibble-and-change-all-the-character-columns-to-upper-case.-also-rename-the-n-variable-to-count.}{%
\subsection{\texorpdfstring{d.~Store the data tibble in part c into a new tibble and change all the character columns to upper case. Also, rename the \texttt{n} variable to \texttt{count}.}{d.~Store the data tibble in part c into a new tibble and change all the character columns to upper case. Also, rename the n variable to count.}}\label{d.-store-the-data-tibble-in-part-c-into-a-new-tibble-and-change-all-the-character-columns-to-upper-case.-also-rename-the-n-variable-to-count.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{aya }\OtherTok{\textless{}{-}}\NormalTok{ babynames }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(name }\SpecialCharTok{==} \StringTok{"Apple"} \SpecialCharTok{|}\NormalTok{ name }\SpecialCharTok{==} \StringTok{"Yoroi"} \SpecialCharTok{|}\NormalTok{ name }\SpecialCharTok{==} \StringTok{"Ada"}\NormalTok{)}
\NormalTok{aya }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate\_if}\NormalTok{(is.character, toupper)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 200 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     ADA     652 0.00668  
 2  1881 F     ADA     628 0.00635  
 3  1882 F     ADA     689 0.00596  
 4  1883 F     ADA     778 0.00648  
 5  1884 F     ADA     854 0.00621  
 6  1885 F     ADA     876 0.00617  
 7  1885 M     ADA       5 0.0000431
 8  1886 F     ADA     915 0.00595  
 9  1886 M     ADA       6 0.0000504
10  1887 F     ADA     910 0.00586  
# ... with 190 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{aya }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate\_at}\NormalTok{(}\FunctionTok{vars}\NormalTok{(name), toupper)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 200 x 5
    year sex   name      n      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     ADA     652 0.00668  
 2  1881 F     ADA     628 0.00635  
 3  1882 F     ADA     689 0.00596  
 4  1883 F     ADA     778 0.00648  
 5  1884 F     ADA     854 0.00621  
 6  1885 F     ADA     876 0.00617  
 7  1885 M     ADA       5 0.0000431
 8  1886 F     ADA     915 0.00595  
 9  1886 M     ADA       6 0.0000504
10  1887 F     ADA     910 0.00586  
# ... with 190 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{aya }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename}\NormalTok{(}\AttributeTok{count =}\NormalTok{ n)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 200 x 5
    year sex   name  count      prop
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     Ada     652 0.00668  
 2  1881 F     Ada     628 0.00635  
 3  1882 F     Ada     689 0.00596  
 4  1883 F     Ada     778 0.00648  
 5  1884 F     Ada     854 0.00621  
 6  1885 F     Ada     876 0.00617  
 7  1885 M     Ada       5 0.0000431
 8  1886 F     Ada     915 0.00595  
 9  1886 M     Ada       6 0.0000504
10  1887 F     Ada     910 0.00586  
# ... with 190 more rows
\end{verbatim}

\hypertarget{e.-change-all-the-column-names-to-upper-case-in-the-previous-problem.}{%
\subsection{e. Change all the column names to upper case in the previous problem.}\label{e.-change-all-the-column-names-to-upper-case-in-the-previous-problem.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{aya }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_at}\NormalTok{(}\FunctionTok{vars}\NormalTok{(year}\SpecialCharTok{:}\NormalTok{prop), toupper)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 200 x 5
    YEAR SEX   NAME      N      PROP
   <dbl> <chr> <chr> <int>     <dbl>
 1  1880 F     Ada     652 0.00668  
 2  1881 F     Ada     628 0.00635  
 3  1882 F     Ada     689 0.00596  
 4  1883 F     Ada     778 0.00648  
 5  1884 F     Ada     854 0.00621  
 6  1885 F     Ada     876 0.00617  
 7  1885 M     Ada       5 0.0000431
 8  1886 F     Ada     915 0.00595  
 9  1886 M     Ada       6 0.0000504
10  1887 F     Ada     910 0.00586  
# ... with 190 more rows
\end{verbatim}

\hypertarget{f.-what-do-these-commands-do}{%
\subsection{f.~What do these commands do?}\label{f.-what-do-these-commands-do}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{polluted\_cities }\OtherTok{\textless{}{-}} \FunctionTok{tribble}\NormalTok{(}
       \SpecialCharTok{\textasciitilde{}}\NormalTok{city,   }\SpecialCharTok{\textasciitilde{}}\NormalTok{size, }\SpecialCharTok{\textasciitilde{}}\NormalTok{amount, }
  \StringTok{"New York"}\NormalTok{, }\StringTok{"large"}\NormalTok{,      }\DecValTok{23}\NormalTok{,}
  \StringTok{"New York"}\NormalTok{, }\StringTok{"small"}\NormalTok{,      }\DecValTok{14}\NormalTok{,}
    \StringTok{"London"}\NormalTok{, }\StringTok{"large"}\NormalTok{,      }\DecValTok{22}\NormalTok{,}
    \StringTok{"London"}\NormalTok{, }\StringTok{"small"}\NormalTok{,      }\DecValTok{16}\NormalTok{,}
   \StringTok{"Beijing"}\NormalTok{, }\StringTok{"large"}\NormalTok{,      }\DecValTok{121}\NormalTok{,}
   \StringTok{"Beijing"}\NormalTok{, }\StringTok{"small"}\NormalTok{,      }\DecValTok{56}
\NormalTok{)}

\NormalTok{polluted\_cities}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 3
  city     size  amount
  <chr>    <chr>  <dbl>
1 New York large     23
2 New York small     14
3 London   large     22
4 London   small     16
5 Beijing  large    121
6 Beijing  small     56
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select\_if}\NormalTok{(is.numeric) }\CommentTok{\#1}
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_all}\NormalTok{(toupper) }\CommentTok{\#2}
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_if}\NormalTok{(is.character, toupper) }\CommentTok{\#3}
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_at}\NormalTok{(}\FunctionTok{vars}\NormalTok{(}\FunctionTok{contains}\NormalTok{(}\StringTok{"it"}\NormalTok{)), toupper) }\CommentTok{\#4}
\end{Highlighting}
\end{Shaded}

Click for answer

\emph{answer:}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Selects all numeric columns from the polluted\_cities dataset.
\item
  Renames all column names in the polluted\_cities dataset to uppercase.
\item
  Renames column names with character data type in the polluted\_cities dataset to uppercase.
\item
  Renames column names containing ``it'' in the polluted\_cities dataset to uppercase.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select\_if}\NormalTok{(is.numeric) }\CommentTok{\#1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 1
  amount
   <dbl>
1     23
2     14
3     22
4     16
5    121
6     56
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_all}\NormalTok{(toupper) }\CommentTok{\#2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 3
  CITY     SIZE  AMOUNT
  <chr>    <chr>  <dbl>
1 New York large     23
2 New York small     14
3 London   large     22
4 London   small     16
5 Beijing  large    121
6 Beijing  small     56
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_if}\NormalTok{(is.character, toupper) }\CommentTok{\#3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 3
  CITY     SIZE  amount
  <chr>    <chr>  <dbl>
1 New York large     23
2 New York small     14
3 London   large     22
4 London   small     16
5 Beijing  large    121
6 Beijing  small     56
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{polluted\_cities }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename\_at}\NormalTok{(}\FunctionTok{vars}\NormalTok{(}\FunctionTok{contains}\NormalTok{(}\StringTok{"it"}\NormalTok{)), toupper) }\CommentTok{\#4}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 3
  CITY     size  amount
  <chr>    <chr>  <dbl>
1 New York large     23
2 New York small     14
3 London   large     22
4 London   small     16
5 Beijing  large    121
6 Beijing  small     56
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

Let's look at an interesting example on how to join related information on various artists, bands, songs, and their labels.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{artists }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{first =} \FunctionTok{c}\NormalTok{(}\StringTok{"Jimmy"}\NormalTok{, }\StringTok{"George"}\NormalTok{, }\StringTok{"Mick"}\NormalTok{, }\StringTok{"Tom"}\NormalTok{, }\StringTok{"Davy"}\NormalTok{, }\StringTok{"John"}\NormalTok{,}
                            \StringTok{"Paul"}\NormalTok{, }\StringTok{"Jimmy"}\NormalTok{, }\StringTok{"Joe"}\NormalTok{, }\StringTok{"Elvis"}\NormalTok{, }\StringTok{"Keith"}\NormalTok{, }\StringTok{"Paul"}\NormalTok{, }
                            \StringTok{"Ringo"}\NormalTok{, }\StringTok{"Joe"}\NormalTok{, }\StringTok{"Brian"}\NormalTok{, }\StringTok{"Nancy"}\NormalTok{), }
                  \AttributeTok{last =} \FunctionTok{c}\NormalTok{(}\StringTok{"Buffett"}\NormalTok{, }\StringTok{"Harrison"}\NormalTok{, }\StringTok{"Jagger"}\NormalTok{, }\StringTok{"Jones"}\NormalTok{, }\StringTok{"Jones"}\NormalTok{, }
                           \StringTok{"Lennon"}\NormalTok{, }\StringTok{"McCartney"}\NormalTok{, }\StringTok{"Page"}\NormalTok{, }\StringTok{"Perry"}\NormalTok{, }\StringTok{"Presley"}\NormalTok{,}
                           \StringTok{"Richards"}\NormalTok{, }\StringTok{"Simon"}\NormalTok{, }\StringTok{"Starr"}\NormalTok{, }\StringTok{"Walsh"}\NormalTok{, }\StringTok{"Wilson"}\NormalTok{, }\StringTok{"Wilson"}\NormalTok{), }
                  \AttributeTok{instrument =} \FunctionTok{c}\NormalTok{(}\StringTok{"Guitar"}\NormalTok{, }\StringTok{"Guitar"}\NormalTok{, }\StringTok{"Vocals"}\NormalTok{, }\StringTok{"Vocals"}\NormalTok{, }\StringTok{"Vocals"}\NormalTok{,}
                                 \StringTok{"Guitar"}\NormalTok{, }\StringTok{"Bass"}\NormalTok{, }\StringTok{"Guitar"}\NormalTok{, }\StringTok{"Guitar"}\NormalTok{, }\StringTok{"Vocals"}\NormalTok{, }\StringTok{"Guitar"}\NormalTok{, }
                                 \StringTok{"Guitar"}\NormalTok{, }\StringTok{"Drums"}\NormalTok{, }\StringTok{"Guitar"}\NormalTok{, }\StringTok{"Vocals"}\NormalTok{, }\StringTok{"Vocals"}\NormalTok{))}


\NormalTok{bands }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{first =} \FunctionTok{c}\NormalTok{(}\StringTok{"John"}\NormalTok{, }\StringTok{"John Paul"}\NormalTok{, }\StringTok{"Jimmy"}\NormalTok{, }\StringTok{"Robert"}\NormalTok{, }\StringTok{"George"}\NormalTok{, }\StringTok{"John"}\NormalTok{, }
                          \StringTok{"Paul"}\NormalTok{, }\StringTok{"Ringo"}\NormalTok{, }\StringTok{"Jimmy"}\NormalTok{, }\StringTok{"Mick"}\NormalTok{, }\StringTok{"Keith"}\NormalTok{, }\StringTok{"Charlie"}\NormalTok{, }\StringTok{"Ronnie"}\NormalTok{), }
                \AttributeTok{last =} \FunctionTok{c}\NormalTok{(}\StringTok{"Bonham"}\NormalTok{, }\StringTok{"Jones"}\NormalTok{, }\StringTok{"Page"}\NormalTok{, }\StringTok{"Plant"}\NormalTok{, }\StringTok{"Harrison"}\NormalTok{, }\StringTok{"Lennon"}\NormalTok{,}
                         \StringTok{"McCartney"}\NormalTok{, }\StringTok{"Starr"}\NormalTok{, }\StringTok{"Buffett"}\NormalTok{, }\StringTok{"Jagger"}\NormalTok{, }\StringTok{"Richards"}\NormalTok{, }\StringTok{"Watts"}\NormalTok{, }\StringTok{"Wood"}\NormalTok{), }
                \AttributeTok{band =} \FunctionTok{c}\NormalTok{(}\StringTok{"Led Zeppelin"}\NormalTok{, }\StringTok{"Led Zeppelin"}\NormalTok{, }\StringTok{"Led Zeppelin"}\NormalTok{, }\StringTok{"Led Zeppelin"}\NormalTok{,}
                         \StringTok{"The Beatles"}\NormalTok{, }\StringTok{"The Beatles"}\NormalTok{, }\StringTok{"The Beatles"}\NormalTok{, }\StringTok{"The Beatles"}\NormalTok{,}
                         \StringTok{"The Coral Reefers"}\NormalTok{, }\StringTok{"The Rolling Stones"}\NormalTok{, }\StringTok{"The Rolling Stones"}\NormalTok{,}
                         \StringTok{"The Rolling Stones"}\NormalTok{, }\StringTok{"The Rolling Stones"}\NormalTok{))}

\NormalTok{albums }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{album =} \FunctionTok{c}\NormalTok{(}\StringTok{"A Hard Day\textquotesingle{}s Night"}\NormalTok{, }\StringTok{"Magical Mystery Tour"}\NormalTok{, }\StringTok{"Beggar\textquotesingle{}s Banquet"}\NormalTok{,}
                           \StringTok{"Abbey Road"}\NormalTok{, }\StringTok{"Led Zeppelin IV"}\NormalTok{, }\StringTok{"The Dark Side of the Moon"}\NormalTok{, }\StringTok{"Aerosmith"}\NormalTok{,}
                           \StringTok{"Rumours"}\NormalTok{, }\StringTok{"Hotel California"}\NormalTok{),}
                 \AttributeTok{band =} \FunctionTok{c}\NormalTok{(}\StringTok{"The Beatles"}\NormalTok{, }\StringTok{"The Beatles"}\NormalTok{, }\StringTok{"The Rolling Stones"}\NormalTok{, }\StringTok{"The Beatles"}\NormalTok{, }
                          \StringTok{"Led Zeppelin"}\NormalTok{, }\StringTok{"Pink Floyd"}\NormalTok{, }\StringTok{"Aerosmith"}\NormalTok{, }\StringTok{"Fleetwood Mac"}\NormalTok{, }\StringTok{"Eagles"}\NormalTok{), }
                 \AttributeTok{year =} \FunctionTok{c}\NormalTok{(}\DecValTok{1964}\NormalTok{,}\DecValTok{1967}\NormalTok{,}\DecValTok{1968}\NormalTok{,}\DecValTok{1969}\NormalTok{,}\DecValTok{1971}\NormalTok{,}\DecValTok{1973}\NormalTok{,}\DecValTok{1973}\NormalTok{,}\DecValTok{1977}\NormalTok{,}\DecValTok{1982}\NormalTok{))}


\NormalTok{songs }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{song =} \FunctionTok{c}\NormalTok{(}\StringTok{"Come Together"}\NormalTok{, }\StringTok{"Dream On"}\NormalTok{, }\StringTok{"Hello, Goodbye"}\NormalTok{, }\StringTok{"It\textquotesingle{}s Not Unusual"}\NormalTok{),}
                \AttributeTok{album  =} \FunctionTok{c}\NormalTok{(}\StringTok{"Abbey Road"}\NormalTok{, }\StringTok{"Aerosmith"}\NormalTok{, }\StringTok{"Magical Mystery Tour"}\NormalTok{, }\StringTok{"Along Came Jones"}\NormalTok{), }
                \AttributeTok{first =} \FunctionTok{c}\NormalTok{(}\StringTok{"John"}\NormalTok{, }\StringTok{"Steven"}\NormalTok{, }\StringTok{"Paul"}\NormalTok{, }\StringTok{"Tom"}\NormalTok{), }
                \AttributeTok{last =} \FunctionTok{c}\NormalTok{(}\StringTok{"Lennon"}\NormalTok{, }\StringTok{"Tyler"}\NormalTok{, }\StringTok{"McCartney"}\NormalTok{, }\StringTok{"Jones"}\NormalTok{))}


\NormalTok{labels }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{album =} \FunctionTok{c}\NormalTok{(}\StringTok{"Abbey Road"}\NormalTok{, }\StringTok{"A Hard Days Night"}\NormalTok{, }\StringTok{"Magical Mystery Tour"}\NormalTok{,}
                           \StringTok{"Led Zeppelin IV"}\NormalTok{, }\StringTok{"The Dark Side of the Moon"}\NormalTok{, }\StringTok{"Hotel California"}\NormalTok{, }
                           \StringTok{"Rumours"}\NormalTok{, }\StringTok{"Aerosmith"}\NormalTok{, }\StringTok{"Beggar\textquotesingle{}s Banquet"}\NormalTok{), }
                 \AttributeTok{label =} \FunctionTok{c}\NormalTok{(}\StringTok{"Apple"}\NormalTok{, }\StringTok{"Parlophone"}\NormalTok{, }\StringTok{"Parlophone"}\NormalTok{, }\StringTok{"Atlantic"}\NormalTok{, }\StringTok{"Harvest"}\NormalTok{,}
                           \StringTok{"Asylum"}\NormalTok{, }\StringTok{"Warner Brothers"}\NormalTok{, }\StringTok{"Columbia"}\NormalTok{, }\StringTok{"Decca"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

Let's take a glimpse of the tibbles \texttt{artists} and \texttt{bands}. Notice that there are different number of rows in the dataset.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(artists)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 16
Columns: 3
$ first      <chr> "Jimmy", "George", "Mick", "Tom", "Davy~
$ last       <chr> "Buffett", "Harrison", "Jagger", "Jones~
$ instrument <chr> "Guitar", "Guitar", "Vocals", "Vocals",~
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(bands)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 13
Columns: 3
$ first <chr> "John", "John Paul", "Jimmy", "Robert", "Geo~
$ last  <chr> "Bonham", "Jones", "Page", "Plant", "Harriso~
$ band  <chr> "Led Zeppelin", "Led Zeppelin", "Led Zeppeli~
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(albums)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 9
Columns: 3
$ album <chr> "A Hard Day's Night", "Magical Mystery Tour"~
$ band  <chr> "The Beatles", "The Beatles", "The Rolling S~
$ year  <dbl> 1964, 1967, 1968, 1969, 1971, 1973, 1973, 19~
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(songs)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 4
Columns: 4
$ song  <chr> "Come Together", "Dream On", "Hello, Goodbye~
$ album <chr> "Abbey Road", "Aerosmith", "Magical Mystery ~
$ first <chr> "John", "Steven", "Paul", "Tom"
$ last  <chr> "Lennon", "Tyler", "McCartney", "Jones"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(labels)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 9
Columns: 2
$ album <chr> "Abbey Road", "A Hard Days Night", "Magical ~
$ label <chr> "Apple", "Parlophone", "Parlophone", "Atlant~
\end{verbatim}

\hypertarget{problem-2-joining-artists-and-bands-data}{%
\section{Problem 2: Joining artists and bands data}\label{problem-2-joining-artists-and-bands-data}}

\hypertarget{a.-join-the-artists-and-bands-tibbles-using-left_join-right_join-and-full_join.-verify-that-the-datasets-obtained-from-left_join-and-right_join-are-the-same-using-setequal.}{%
\subsection{\texorpdfstring{a. Join the artists and bands tibbles using \texttt{left\_join()}, \texttt{right\_join()}, and \texttt{full\_join()}. Verify that the datasets obtained from \texttt{left\_join()} and \texttt{right\_join()} are the same using \texttt{setequal()}.}{a. Join the artists and bands tibbles using left\_join(), right\_join(), and full\_join(). Verify that the datasets obtained from left\_join() and right\_join() are the same using setequal().}}\label{a.-join-the-artists-and-bands-tibbles-using-left_join-right_join-and-full_join.-verify-that-the-datasets-obtained-from-left_join-and-right_join-are-the-same-using-setequal.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{bands2 }\OtherTok{\textless{}{-}} \FunctionTok{left\_join}\NormalTok{(bands, artists, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{, }\StringTok{"last"}\NormalTok{))}
\NormalTok{bands3 }\OtherTok{\textless{}{-}} \FunctionTok{right\_join}\NormalTok{(artists, bands, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{, }\StringTok{"last"}\NormalTok{))}
\NormalTok{full\_bands }\OtherTok{\textless{}{-}} \FunctionTok{full\_join}\NormalTok{(artists, bands, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{, }\StringTok{"last"}\NormalTok{))}

\CommentTok{\# Check if the datasets are the same}
\FunctionTok{setequal}\NormalTok{(bands2, bands3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\hypertarget{b.-use-the-pipe-operator-to-create-one-table-that-combines-all-information-from-artists-bands-albums-songs-and-labels.}{%
\subsection{\texorpdfstring{b. Use the pipe operator, \texttt{\%\textgreater{}\%}, to create one table that combines all information from \texttt{artists}, \texttt{bands}, \texttt{albums}, \texttt{songs}, and \texttt{labels.}}{b. Use the pipe operator, \%\textgreater\%, to create one table that combines all information from artists, bands, albums, songs, and labels.}}\label{b.-use-the-pipe-operator-to-create-one-table-that-combines-all-information-from-artists-bands-albums-songs-and-labels.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{all\_info }\OtherTok{\textless{}{-}}\NormalTok{ artists }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{full\_join}\NormalTok{(bands, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{, }\StringTok{"last"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{full\_join}\NormalTok{(songs, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{, }\StringTok{"last"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{full\_join}\NormalTok{(albums, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"album"}\NormalTok{, }\StringTok{"band"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{full\_join}\NormalTok{(labels, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"album"}\NormalTok{))}
\NormalTok{all\_info}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 30 x 8
   first  last      instrument band  song  album  year label
   <chr>  <chr>     <chr>      <chr> <chr> <chr> <dbl> <chr>
 1 Jimmy  Buffett   Guitar     The ~ <NA>  <NA>     NA <NA> 
 2 George Harrison  Guitar     The ~ <NA>  <NA>     NA <NA> 
 3 Mick   Jagger    Vocals     The ~ <NA>  <NA>     NA <NA> 
 4 Tom    Jones     Vocals     <NA>  It's~ Alon~    NA <NA> 
 5 Davy   Jones     Vocals     <NA>  <NA>  <NA>     NA <NA> 
 6 John   Lennon    Guitar     The ~ Come~ Abbe~  1969 Apple
 7 Paul   McCartney Bass       The ~ Hell~ Magi~  1967 Parl~
 8 Jimmy  Page      Guitar     Led ~ <NA>  <NA>     NA <NA> 
 9 Joe    Perry     Guitar     <NA>  <NA>  <NA>     NA <NA> 
10 Elvis  Presley   Vocals     <NA>  <NA>  <NA>     NA <NA> 
# ... with 20 more rows
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{problem-3-filtering-and-counting-rows-in-the-data}{%
\section{Problem 3: Filtering and counting rows in the data}\label{problem-3-filtering-and-counting-rows-in-the-data}}

\hypertarget{a.-collect-artists-that-have-songs-provided-and-return-rows-of-artists-that-dont-have-bands-info.}{%
\subsection{a. Collect artists that have songs provided, and return rows of artists that don't have bands info.}\label{a.-collect-artists-that-have-songs-provided-and-return-rows-of-artists-that-dont-have-bands-info.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Artists with songs}
\NormalTok{artists\_with\_songs }\OtherTok{\textless{}{-}}\NormalTok{ artists }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{semi\_join}\NormalTok{(songs, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{, }\StringTok{"last"}\NormalTok{))}

\CommentTok{\# Artists without bands info}
\NormalTok{artists\_without\_bands }\OtherTok{\textless{}{-}}\NormalTok{ artists }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{anti\_join}\NormalTok{(bands, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"first"}\NormalTok{,}\StringTok{"last"}\NormalTok{))}

\NormalTok{artists\_with\_songs}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 3
  first last      instrument
  <chr> <chr>     <chr>     
1 Tom   Jones     Vocals    
2 John  Lennon    Guitar    
3 Paul  McCartney Bass      
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{artists\_without\_bands}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 8 x 3
  first last    instrument
  <chr> <chr>   <chr>     
1 Tom   Jones   Vocals    
2 Davy  Jones   Vocals    
3 Joe   Perry   Guitar    
4 Elvis Presley Vocals    
5 Paul  Simon   Guitar    
6 Joe   Walsh   Guitar    
7 Brian Wilson  Vocals    
8 Nancy Wilson  Vocals    
\end{verbatim}

\hypertarget{b.-collect-the-albums-made-by-a-band-count-the-number-of-rows-find-the-rows-of-songs-that-match-a-row-in-labels-and-count-the-number-of-rows.}{%
\subsection{b. Collect the albums made by a band, count the number of rows, find the rows of songs that match a row in labels, and count the number of rows.}\label{b.-collect-the-albums-made-by-a-band-count-the-number-of-rows-find-the-rows-of-songs-that-match-a-row-in-labels-and-count-the-number-of-rows.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Albums made by a band}
\NormalTok{albums\_by\_band }\OtherTok{\textless{}{-}}\NormalTok{ albums }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{semi\_join}\NormalTok{(bands, }\AttributeTok{by =} \StringTok{"band"}\NormalTok{)}
\NormalTok{n\_albums\_by\_band }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(albums\_by\_band)}

\CommentTok{\# Rows of songs that match a row in labels}
\NormalTok{songs\_with\_labels }\OtherTok{\textless{}{-}}\NormalTok{ songs }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{semi\_join}\NormalTok{(labels, }\AttributeTok{by =} \StringTok{"album"}\NormalTok{)}
\NormalTok{n\_songs\_with\_labels }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(songs\_with\_labels)}

\NormalTok{n\_albums\_by\_band}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{n\_songs\_with\_labels}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\hypertarget{class-activity-8}{%
\chapter{Class Activity 8}\label{class-activity-8}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(lubridate)}
\end{Highlighting}
\end{Shaded}

\hypertarget{your-turn-1-1}{%
\section{Your turn 1}\label{your-turn-1-1}}

The following code chinks create the data objects used in this exercise. Please run the chunks and answer the questions.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DBP\_wide }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{id =}\NormalTok{ letters[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{4}\NormalTok{],}
 \AttributeTok{sex =} \FunctionTok{c}\NormalTok{(}\StringTok{"F"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"F"}\NormalTok{),}
 \AttributeTok{v1.DBP =} \FunctionTok{c}\NormalTok{(}\DecValTok{88}\NormalTok{, }\DecValTok{84}\NormalTok{, }\DecValTok{102}\NormalTok{, }\DecValTok{70}\NormalTok{),}
 \AttributeTok{v2.DBP =} \FunctionTok{c}\NormalTok{(}\DecValTok{78}\NormalTok{, }\DecValTok{78}\NormalTok{, }\DecValTok{96}\NormalTok{, }\DecValTok{76}\NormalTok{),}
 \AttributeTok{v3.DBP =} \FunctionTok{c}\NormalTok{(}\DecValTok{94}\NormalTok{, }\DecValTok{82}\NormalTok{, }\DecValTok{94}\NormalTok{, }\DecValTok{74}\NormalTok{),}
 \AttributeTok{age=}\FunctionTok{c}\NormalTok{(}\DecValTok{23}\NormalTok{, }\DecValTok{56}\NormalTok{, }\DecValTok{41}\NormalTok{, }\DecValTok{38}\NormalTok{)}
\NormalTok{ )}
\NormalTok{DBP\_wide}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 4 x 6
  id    sex   v1.DBP v2.DBP v3.DBP   age
  <chr> <chr>  <dbl>  <dbl>  <dbl> <dbl>
1 a     F         88     78     94    23
2 b     M         84     78     82    56
3 c     M        102     96     94    41
4 d     F         70     76     74    38
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{BP\_wide }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{id =}\NormalTok{ letters[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{4}\NormalTok{],}
                     \AttributeTok{sex =} \FunctionTok{c}\NormalTok{(}\StringTok{"F"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"F"}\NormalTok{),}
                     \AttributeTok{SBP\_v1 =} \FunctionTok{c}\NormalTok{(}\DecValTok{130}\NormalTok{, }\DecValTok{120}\NormalTok{, }\DecValTok{130}\NormalTok{, }\DecValTok{119}\NormalTok{),}
                     \AttributeTok{SBP\_v2 =} \FunctionTok{c}\NormalTok{(}\DecValTok{110}\NormalTok{, }\DecValTok{116}\NormalTok{, }\DecValTok{136}\NormalTok{, }\DecValTok{106}\NormalTok{),}
                     \AttributeTok{SBP\_v3 =} \FunctionTok{c}\NormalTok{(}\DecValTok{112}\NormalTok{, }\DecValTok{122}\NormalTok{, }\DecValTok{138}\NormalTok{, }\DecValTok{118}\NormalTok{))}
\NormalTok{BP\_wide}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 4 x 5
  id    sex   SBP_v1 SBP_v2 SBP_v3
  <chr> <chr>  <dbl>  <dbl>  <dbl>
1 a     F        130    110    112
2 b     M        120    116    122
3 c     M        130    136    138
4 d     F        119    106    118
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{BP\_long }\OtherTok{\textless{}{-}}\NormalTok{ BP\_wide }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{pivot\_longer}\NormalTok{(}\AttributeTok{names\_to =} \StringTok{"visit"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"SBP"}\NormalTok{, SBP\_v1}\SpecialCharTok{:}\NormalTok{SBP\_v3) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{visit =} \FunctionTok{parse\_number}\NormalTok{(visit))}
\NormalTok{BP\_long}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 12 x 4
   id    sex   visit   SBP
   <chr> <chr> <dbl> <dbl>
 1 a     F         1   130
 2 a     F         2   110
 3 a     F         3   112
 4 b     M         1   120
 5 b     M         2   116
 6 b     M         3   122
 7 c     M         1   130
 8 c     M         2   136
 9 c     M         3   138
10 d     F         1   119
11 d     F         2   106
12 d     F         3   118
\end{verbatim}

\hypertarget{a.-create-a-long-dataframe-from-dbp_wide-based-on-the-repeated-dbp-columns-and-save-it-as-dbp_long.}{%
\subsection{\texorpdfstring{a. Create a long dataframe from \texttt{DBP\_wide} based on the repeated DBP columns and save it as \texttt{DBP\_long}.}{a. Create a long dataframe from DBP\_wide based on the repeated DBP columns and save it as DBP\_long.}}\label{a.-create-a-long-dataframe-from-dbp_wide-based-on-the-repeated-dbp-columns-and-save-it-as-dbp_long.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DBP\_long }\OtherTok{\textless{}{-}}\NormalTok{ DBP\_wide }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{pivot\_longer}\NormalTok{(}\AttributeTok{names\_to =} \StringTok{"visit"}\NormalTok{,}
               \AttributeTok{values\_to =} \StringTok{"DBP"}\NormalTok{,}
               \AttributeTok{cols =}\NormalTok{ v1.DBP}\SpecialCharTok{:}\NormalTok{v3.DBP)}
\NormalTok{DBP\_long}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 12 x 5
   id    sex     age visit    DBP
   <chr> <chr> <dbl> <chr>  <dbl>
 1 a     F        23 v1.DBP    88
 2 a     F        23 v2.DBP    78
 3 a     F        23 v3.DBP    94
 4 b     M        56 v1.DBP    84
 5 b     M        56 v2.DBP    78
 6 b     M        56 v3.DBP    82
 7 c     M        41 v1.DBP   102
 8 c     M        41 v2.DBP    96
 9 c     M        41 v3.DBP    94
10 d     F        38 v1.DBP    70
11 d     F        38 v2.DBP    76
12 d     F        38 v3.DBP    74
\end{verbatim}

\hypertarget{b.-clean-up-the-visit-column-of-dbp_long-so-that-the-values-are-1-2-3-and-save-it-as-dbp_long.}{%
\subsection{\texorpdfstring{b. Clean up the visit column of \texttt{DBP\_long} so that the values are 1, 2, 3, and save it as \texttt{DBP\_long}.}{b. Clean up the visit column of DBP\_long so that the values are 1, 2, 3, and save it as DBP\_long.}}\label{b.-clean-up-the-visit-column-of-dbp_long-so-that-the-values-are-1-2-3-and-save-it-as-dbp_long.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DBP\_long }\OtherTok{\textless{}{-}}\NormalTok{ DBP\_long }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{visit =} \FunctionTok{parse\_number}\NormalTok{(visit))}
\NormalTok{DBP\_long}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 12 x 5
   id    sex     age visit   DBP
   <chr> <chr> <dbl> <dbl> <dbl>
 1 a     F        23     1    88
 2 a     F        23     2    78
 3 a     F        23     3    94
 4 b     M        56     1    84
 5 b     M        56     2    78
 6 b     M        56     3    82
 7 c     M        41     1   102
 8 c     M        41     2    96
 9 c     M        41     3    94
10 d     F        38     1    70
11 d     F        38     2    76
12 d     F        38     3    74
\end{verbatim}

\hypertarget{c.-make-dbp_long-wide-with-column-names-visit.1-visit.2-visit.3-for-the-dbp-values-and-save-it-as-dbp_wide2}{%
\subsection{\texorpdfstring{c.~Make \texttt{DBP\_long} wide with column names visit.1, visit.2, visit.3 for the DBP values, and save it as \texttt{DBP\_wide2}}{c.~Make DBP\_long wide with column names visit.1, visit.2, visit.3 for the DBP values, and save it as DBP\_wide2}}\label{c.-make-dbp_long-wide-with-column-names-visit.1-visit.2-visit.3-for-the-dbp-values-and-save-it-as-dbp_wide2}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DBP\_wide2 }\OtherTok{\textless{}{-}}\NormalTok{ DBP\_long }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{pivot\_wider}\NormalTok{(}\AttributeTok{names\_from =} \StringTok{"visit"}\NormalTok{,}
              \AttributeTok{values\_from =} \StringTok{"DBP"}\NormalTok{,}
              \AttributeTok{names\_prefix =} \StringTok{"visit."}\NormalTok{)}
\NormalTok{DBP\_wide2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 4 x 6
  id    sex     age visit.1 visit.2 visit.3
  <chr> <chr> <dbl>   <dbl>   <dbl>   <dbl>
1 a     F        23      88      78      94
2 b     M        56      84      78      82
3 c     M        41     102      96      94
4 d     F        38      70      76      74
\end{verbatim}

\hypertarget{d.-join-dbp_long-with-bp_long2-to-create-a-single-data-frame-with-columns-id-sex-visit-sbp-dbp-and-age.-save-this-as-bp_both_long.}{%
\subsection{\texorpdfstring{d.~Join \texttt{DBP\_long} with \texttt{BP\_long2} to create a single data frame with columns id, sex, visit, SBP, DBP, and age. Save this as \texttt{BP\_both\_long.}}{d.~Join DBP\_long with BP\_long2 to create a single data frame with columns id, sex, visit, SBP, DBP, and age. Save this as BP\_both\_long.}}\label{d.-join-dbp_long-with-bp_long2-to-create-a-single-data-frame-with-columns-id-sex-visit-sbp-dbp-and-age.-save-this-as-bp_both_long.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{BP\_both\_long }\OtherTok{\textless{}{-}} \FunctionTok{left\_join}\NormalTok{(BP\_long, DBP\_long, }\AttributeTok{by =} \FunctionTok{c}\NormalTok{(}\StringTok{"id"}\NormalTok{, }\StringTok{"sex"}\NormalTok{, }\StringTok{"visit"}\NormalTok{))}
\NormalTok{BP\_both\_long}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 12 x 6
   id    sex   visit   SBP   age   DBP
   <chr> <chr> <dbl> <dbl> <dbl> <dbl>
 1 a     F         1   130    23    88
 2 a     F         2   110    23    78
 3 a     F         3   112    23    94
 4 b     M         1   120    56    84
 5 b     M         2   116    56    78
 6 b     M         3   122    56    82
 7 c     M         1   130    41   102
 8 c     M         2   136    41    96
 9 c     M         3   138    41    94
10 d     F         1   119    38    70
11 d     F         2   106    38    76
12 d     F         3   118    38    74
\end{verbatim}

\hypertarget{e.-calculate-the-mean-sbp-and-dbp-for-each-visit-and-save-the-result-as-mean_bp_by_visit.}{%
\subsection{\texorpdfstring{e. Calculate the mean SBP and DBP for each visit and save the result as \texttt{mean\_BP\_by\_visit.}}{e. Calculate the mean SBP and DBP for each visit and save the result as mean\_BP\_by\_visit.}}\label{e.-calculate-the-mean-sbp-and-dbp-for-each-visit-and-save-the-result-as-mean_bp_by_visit.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mean\_BP\_by\_visit }\OtherTok{\textless{}{-}}\NormalTok{ BP\_both\_long }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(visit) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{mean\_SBP =} \FunctionTok{mean}\NormalTok{(SBP),}
            \AttributeTok{mean\_DBP =} \FunctionTok{mean}\NormalTok{(DBP))}
\NormalTok{mean\_BP\_by\_visit}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 3
  visit mean_SBP mean_DBP
  <dbl>    <dbl>    <dbl>
1     1     125.       86
2     2     117        82
3     3     122.       86
\end{verbatim}

\hypertarget{your-turn-2}{%
\section{Your turn 2}\label{your-turn-2}}

\hypertarget{a.-parsing-complex-dates-use-dmy_hms-to-parse-the-following-date-time-string-25-dec-2020-173000}{%
\subsection{\texorpdfstring{a. Parsing Complex Dates: Use \texttt{dmy\_hms()} to parse the following date-time string: ``25-Dec-2020 17:30:00''}{a. Parsing Complex Dates: Use dmy\_hms() to parse the following date-time string: ``25-Dec-2020 17:30:00''}}\label{a.-parsing-complex-dates-use-dmy_hms-to-parse-the-following-date-time-string-25-dec-2020-173000}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{parsed\_date }\OtherTok{\textless{}{-}} \FunctionTok{dmy\_hms}\NormalTok{(}\StringTok{"25{-}Dec{-}2020 17:30:00"}\NormalTok{)}
\NormalTok{parsed\_date}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "2020-12-25 17:30:00 UTC"
\end{verbatim}

\hypertarget{b.-advanced-date-arithmetic-calculate-the-exact-age-in-years-for-someone-born-on-1995-05-15-093000.}{%
\subsection{b. Advanced Date Arithmetic: Calculate the exact age in years for someone born on ``1995-05-15 09:30:00''.}\label{b.-advanced-date-arithmetic-calculate-the-exact-age-in-years-for-someone-born-on-1995-05-15-093000.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dob }\OtherTok{\textless{}{-}} \FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"1995{-}05{-}15 09:30:00"}\NormalTok{)}
\NormalTok{exact\_age }\OtherTok{\textless{}{-}} \FunctionTok{as.duration}\NormalTok{(}\FunctionTok{interval}\NormalTok{(dob, }\FunctionTok{now}\NormalTok{())) }\SpecialCharTok{/} \FunctionTok{dyears}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\NormalTok{exact\_age}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 27.96934
\end{verbatim}

\hypertarget{c.-creating-date-time-objects-create-a-date-time-object-for-march-15-2020-133000-using-make_datetime.}{%
\subsection{\texorpdfstring{c.~Creating Date-Time Objects: Create a date-time object for March 15, 2020, 13:30:00 using \texttt{make\_datetime()}.}{c.~Creating Date-Time Objects: Create a date-time object for March 15, 2020, 13:30:00 using make\_datetime().}}\label{c.-creating-date-time-objects-create-a-date-time-object-for-march-15-2020-133000-using-make_datetime.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{new\_date\_time }\OtherTok{\textless{}{-}} \FunctionTok{make\_datetime}\NormalTok{(}\DecValTok{2020}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{15}\NormalTok{, }\DecValTok{13}\NormalTok{, }\DecValTok{30}\NormalTok{, }\DecValTok{0}\NormalTok{)}
\NormalTok{new\_date\_time}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "2020-03-15 13:30:00 UTC"
\end{verbatim}

\hypertarget{d.-extracting-components-from-date-time-objects-extract-the-year-month-as-a-number-day-hour-and-minute-from-2022-07-01-144500.}{%
\subsection{d.~Extracting Components from Date-Time Objects: Extract the year, month (as a number), day, hour, and minute from ``2022-07-01 14:45:00''.}\label{d.-extracting-components-from-date-time-objects-extract-the-year-month-as-a-number-day-hour-and-minute-from-2022-07-01-144500.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{example\_date\_time }\OtherTok{\textless{}{-}} \FunctionTok{ymd\_hms}\NormalTok{(}\StringTok{"2022{-}07{-}01 14:45:00"}\NormalTok{)}
\NormalTok{extracted\_components }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{year =} \FunctionTok{year}\NormalTok{(example\_date\_time),}
  \AttributeTok{month =} \FunctionTok{month}\NormalTok{(example\_date\_time),}
  \AttributeTok{day =} \FunctionTok{day}\NormalTok{(example\_date\_time),}
  \AttributeTok{hour =} \FunctionTok{hour}\NormalTok{(example\_date\_time),}
  \AttributeTok{minute =} \FunctionTok{minute}\NormalTok{(example\_date\_time)}
\NormalTok{)}
\NormalTok{extracted\_components}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 5
   year month   day  hour minute
  <dbl> <dbl> <int> <int>  <int>
1  2022     7     1    14     45
\end{verbatim}

\hypertarget{e.-advanced-date-time-arithmetic-with-periods-add-2-months-and-15-days-to-2021-08-01.}{%
\subsection{e. Advanced Date-Time Arithmetic with Periods: Add 2 months and 15 days to ``2021-08-01''.}\label{e.-advanced-date-time-arithmetic-with-periods-add-2-months-and-15-days-to-2021-08-01.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{initial\_date }\OtherTok{\textless{}{-}} \FunctionTok{ymd}\NormalTok{(}\StringTok{"2021{-}08{-}01"}\NormalTok{)}
\NormalTok{new\_date }\OtherTok{\textless{}{-}}\NormalTok{ initial\_date }\SpecialCharTok{+} \FunctionTok{months}\NormalTok{(}\DecValTok{2}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{days}\NormalTok{(}\DecValTok{15}\NormalTok{)}
\NormalTok{new\_date}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "2021-10-16"
\end{verbatim}

\hypertarget{f.-duration-and-time-differences-calculate-the-duration-in-days-weeks-months-and-years-between-2019-04-01-and-2022-04-01.}{%
\subsection{f.~Duration and Time Differences: Calculate the duration in days, weeks, months, and years between ``2019-04-01'' and ``2022-04-01''.}\label{f.-duration-and-time-differences-calculate-the-duration-in-days-weeks-months-and-years-between-2019-04-01-and-2022-04-01.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{start\_date }\OtherTok{\textless{}{-}} \FunctionTok{ymd}\NormalTok{(}\StringTok{"2019{-}04{-}01"}\NormalTok{)}
\NormalTok{end\_date }\OtherTok{\textless{}{-}} \FunctionTok{ymd}\NormalTok{(}\StringTok{"2022{-}04{-}01"}\NormalTok{)}
\NormalTok{time\_diff }\OtherTok{\textless{}{-}}\NormalTok{ end\_date }\SpecialCharTok{{-}}\NormalTok{ start\_date}
\NormalTok{duration\_days }\OtherTok{\textless{}{-}} \FunctionTok{as.duration}\NormalTok{(time\_diff)}
\NormalTok{duration\_weeks }\OtherTok{\textless{}{-}}\NormalTok{ duration\_days }\SpecialCharTok{/} \FunctionTok{dweeks}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\NormalTok{duration\_months }\OtherTok{\textless{}{-}}\NormalTok{ duration\_days }\SpecialCharTok{/} \FunctionTok{dmonths}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\NormalTok{duration\_years }\OtherTok{\textless{}{-}}\NormalTok{ duration\_days }\SpecialCharTok{/} \FunctionTok{dyears}\NormalTok{(}\DecValTok{1}\NormalTok{)}

\NormalTok{duration\_results }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{days =}\NormalTok{ duration\_days,}
  \AttributeTok{weeks =}\NormalTok{ duration\_weeks,}
  \AttributeTok{months =}\NormalTok{ duration\_months,}
  \AttributeTok{years =}\NormalTok{ duration\_years}
\NormalTok{)}
\NormalTok{duration\_results}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 4
  days                 weeks months years
  <Duration>           <dbl>  <dbl> <dbl>
1 94694400s (~3 years)  157.   36.0  3.00
\end{verbatim}

\hypertarget{class-activity-9}{%
\chapter{Class Activity 9}\label{class-activity-9}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\hypertarget{your-turn-1-2}{%
\section{Your Turn 1}\label{your-turn-1-2}}

\hypertarget{a-read_csv}{%
\subsection{\texorpdfstring{a) \texttt{read\_csv()}}{a) read\_csv()}}\label{a-read_csv}}

Use \texttt{read\_csv()} to import the \texttt{desserts} data set from \url{https://raw.githubusercontent.com/deepbas/statdatasets/main/desserts.csv}. Use \texttt{glimpse} to see if the data import is alright.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{url }\OtherTok{\textless{}{-}} \StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/desserts.csv"}
\NormalTok{desserts }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(url)}
\FunctionTok{glimpse}\NormalTok{(desserts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 549
Columns: 16
$ series                <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ episode               <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ baker                 <chr> "Annetha", "David", "Edd", "~
$ technical             <chr> "2nd", "3rd", "1st", "N/A", ~
$ result                <chr> "IN", "IN", "IN", "IN", "IN"~
$ uk_airdate            <chr> "17 August 2010", "17 August~
$ us_season             <dbl> NA, NA, NA, NA, NA, NA, NA, ~
$ us_airdate            <date> NA, NA, NA, NA, NA, NA, NA,~
$ showstopper_chocolate <chr> "chocolate", "chocolate", "n~
$ showstopper_dessert   <chr> "other", "other", "other", "~
$ showstopper_fruit     <chr> "no fruit", "no fruit", "no ~
$ showstopper_nut       <chr> "no nut", "no nut", "no nut"~
$ signature_chocolate   <chr> "no chocolate", "chocolate",~
$ signature_dessert     <chr> "cake", "cake", "cake", "cak~
$ signature_fruit       <chr> "no fruit", "fruit", "fruit"~
$ signature_nut         <chr> "no nut", "no nut", "no nut"~
\end{verbatim}

\hypertarget{b-are-there-any-issues-with-the-data-import-if-so-what-are-they}{%
\subsection{b) Are there any issues with the data import? If so, what are they?}\label{b-are-there-any-issues-with-the-data-import-if-so-what-are-they}}

Click for answer

\emph{Answer:} Based on the output of glimpse, we can see that the `technical' column should be a numeric column and the `uk\_airdate' column should be a date column. We can also identify any issues with missing values.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# your r{-}code}

\NormalTok{desserts }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(url,}
  \AttributeTok{col\_types =} \FunctionTok{list}\NormalTok{(}
    \AttributeTok{technical =} \FunctionTok{col\_number}\NormalTok{(),}
    \AttributeTok{uk\_airdate =} \FunctionTok{col\_date}\NormalTok{()}
\NormalTok{  )}
\NormalTok{)}

\FunctionTok{problems}\NormalTok{(desserts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 556 x 5
     row   col expected        actual         file 
   <int> <int> <chr>           <chr>          <chr>
 1     2     6 date in ISO8601 17 August 2010 ""   
 2     3     6 date in ISO8601 17 August 2010 ""   
 3     4     6 date in ISO8601 17 August 2010 ""   
 4     5     4 a number        N/A            ""   
 5     5     6 date in ISO8601 17 August 2010 ""   
 6     6     6 date in ISO8601 17 August 2010 ""   
 7     7     4 a number        N/A            ""   
 8     7     6 date in ISO8601 17 August 2010 ""   
 9     8     6 date in ISO8601 17 August 2010 ""   
10     9     4 a number        N/A            ""   
# ... with 546 more rows
\end{verbatim}

\hypertarget{c-import-the-dataset-with-correct-data-types-if-needed.-fix-the-problems-if-any.}{%
\subsection{c) Import the dataset with correct data types, if needed. Fix the problems, if any.}\label{c-import-the-dataset-with-correct-data-types-if-needed.-fix-the-problems-if-any.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{desserts }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(url,}
  \AttributeTok{col\_types =} \FunctionTok{list}\NormalTok{(}
    \AttributeTok{technical =} \FunctionTok{col\_number}\NormalTok{(),}
    \AttributeTok{uk\_airdate =} \FunctionTok{col\_date}\NormalTok{()}
\NormalTok{  )}
\NormalTok{)}

\FunctionTok{problems}\NormalTok{(desserts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 556 x 5
     row   col expected        actual         file 
   <int> <int> <chr>           <chr>          <chr>
 1     2     6 date in ISO8601 17 August 2010 ""   
 2     3     6 date in ISO8601 17 August 2010 ""   
 3     4     6 date in ISO8601 17 August 2010 ""   
 4     5     4 a number        N/A            ""   
 5     5     6 date in ISO8601 17 August 2010 ""   
 6     6     6 date in ISO8601 17 August 2010 ""   
 7     7     4 a number        N/A            ""   
 8     7     6 date in ISO8601 17 August 2010 ""   
 9     8     6 date in ISO8601 17 August 2010 ""   
10     9     4 a number        N/A            ""   
# ... with 546 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{desserts }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(url,}
    \AttributeTok{col\_types =} \FunctionTok{list}\NormalTok{(}
    \AttributeTok{technical =} \FunctionTok{col\_number}\NormalTok{(), }
    \AttributeTok{uk\_airdate =} \FunctionTok{col\_date}\NormalTok{(}\AttributeTok{format =} \StringTok{"\%d \%B \%Y"}\NormalTok{)}
\NormalTok{  ) }
\NormalTok{)}

\FunctionTok{problems}\NormalTok{(desserts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 7 x 5
    row   col expected actual file 
  <int> <int> <chr>    <chr>  <chr>
1     5     4 a number N/A    ""   
2     7     4 a number N/A    ""   
3     9     4 a number N/A    ""   
4    11     4 a number N/A    ""   
5    35     4 a number N/A    ""   
6    36     4 a number N/A    ""   
7    37     4 a number N/A    ""   
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{desserts }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(url,}
  \AttributeTok{col\_types =} \FunctionTok{list}\NormalTok{(}
    \AttributeTok{technical =} \FunctionTok{col\_number}\NormalTok{(), }
    \AttributeTok{uk\_airdate =} \FunctionTok{col\_date}\NormalTok{(}\AttributeTok{format =} \StringTok{"\%d \%B \%Y"}\NormalTok{)}
\NormalTok{  ),}
  \AttributeTok{na =} \FunctionTok{c}\NormalTok{(}\StringTok{""}\NormalTok{, }\StringTok{"NA"}\NormalTok{, }\StringTok{"N/A"}\NormalTok{)}
\NormalTok{)}

\FunctionTok{problems}\NormalTok{(desserts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 0 x 5
# ... with 5 variables: row <int>, col <int>,
#   expected <chr>, actual <chr>, file <chr>
\end{verbatim}

\hypertarget{your-turn-2-1}{%
\section{Your Turn 2}\label{your-turn-2-1}}

Use the appropriate \texttt{read\_\textless{}type\textgreater{}()} function to import the following data sets:

\begin{itemize}
\item
  \texttt{https://deepbas.io/data/simple-1.dat}
\item
  \texttt{https://deepbas.io/data/mild-1.csv}
\item
  \texttt{https://deepbas.io/data/tricky-1.csv}
\item
  \texttt{https://deepbas.io/data/tricky-2.csv}
\end{itemize}

Identify and fix any issues you encounter.

\hypertarget{a-importing-simple-data}{%
\subsection{a) Importing simple data:}\label{a-importing-simple-data}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{simple1 }\OtherTok{\textless{}{-}}\NormalTok{ readr}\SpecialCharTok{::}\FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://deepbas.io/data/simple{-}1.dat"}\NormalTok{)}
\FunctionTok{problems}\NormalTok{(simple1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 0 x 5
# ... with 5 variables: row <int>, col <int>,
#   expected <chr>, actual <chr>, file <chr>
\end{verbatim}

\hypertarget{b-importing-mildly-tricky-data}{%
\subsection{b) Importing mildly tricky data:}\label{b-importing-mildly-tricky-data}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mild1 }\OtherTok{\textless{}{-}}\NormalTok{ readr}\SpecialCharTok{::}\FunctionTok{read\_delim}\NormalTok{(}\StringTok{"https://deepbas.io/data/mild{-}1.csv"}\NormalTok{, }\AttributeTok{delim =} \StringTok{"|"}\NormalTok{)}
\FunctionTok{problems}\NormalTok{(mild1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 0 x 5
# ... with 5 variables: row <int>, col <int>,
#   expected <chr>, actual <chr>, file <chr>
\end{verbatim}

\hypertarget{c-importing-tricky-data-1}{%
\subsection{c) Importing tricky data 1:}\label{c-importing-tricky-data-1}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tricky1 }\OtherTok{\textless{}{-}}  \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://deepbas.io/data/tricky{-}1.csv"}\NormalTok{)}
\FunctionTok{problems}\NormalTok{(tricky1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 5
    row   col expected  actual    file 
  <int> <int> <chr>     <chr>     <chr>
1     4     4 5 columns 4 columns ""   
2     7     4 5 columns 4 columns ""   
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Fix missing values}
\NormalTok{tricky1[}\DecValTok{3}\NormalTok{, ] }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(tricky1[}\DecValTok{3}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{], }\ConstantTok{NA}\NormalTok{, tricky1[}\DecValTok{3}\NormalTok{, }\DecValTok{3}\SpecialCharTok{:}\DecValTok{4}\NormalTok{])}
\NormalTok{tricky1[}\DecValTok{6}\NormalTok{, ] }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(tricky1[}\DecValTok{4}\NormalTok{, }\DecValTok{1}\NormalTok{], }\ConstantTok{NA}\NormalTok{, tricky1[}\DecValTok{4}\NormalTok{, }\DecValTok{3}\SpecialCharTok{:}\DecValTok{5}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\hypertarget{d-importing-tricky-data-2}{%
\subsection{d) Importing tricky data 2:}\label{d-importing-tricky-data-2}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tricky2 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://deepbas.io/data/tricky{-}2.csv"}\NormalTok{)}
\FunctionTok{problems}\NormalTok{(tricky2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 0 x 5
# ... with 5 variables: row <int>, col <int>,
#   expected <chr>, actual <chr>, file <chr>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Fix missing values}
\NormalTok{tricky2\_part1 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://deepbas.io/data/tricky{-}2.csv"}\NormalTok{, }\AttributeTok{n\_max =} \DecValTok{7}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{separate}\NormalTok{(city, }\FunctionTok{c}\NormalTok{(}\StringTok{"city"}\NormalTok{, }\StringTok{"state"}\NormalTok{), }\AttributeTok{sep =} \StringTok{","}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{7}\NormalTok{))}

\NormalTok{tricky2\_part2 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}
  \StringTok{"https://deepbas.io/data/tricky{-}2.csv"}\NormalTok{,}
  \AttributeTok{skip =} \DecValTok{8}\NormalTok{, }
  \AttributeTok{col\_names =} \FunctionTok{c}\NormalTok{(}\StringTok{"iata"}\NormalTok{, }\StringTok{"airport"}\NormalTok{, }\StringTok{"city"}\NormalTok{, }\StringTok{"state"}\NormalTok{,  }\StringTok{"latitude"}\NormalTok{, }\StringTok{"longitude"}\NormalTok{)}
\NormalTok{)}

\CommentTok{\# Combine parts}
\NormalTok{data\_combined }\OtherTok{\textless{}{-}} \FunctionTok{full\_join}\NormalTok{(tricky2\_part1, tricky2\_part2)}
\end{Highlighting}
\end{Shaded}

\hypertarget{class-activity-10}{%
\chapter{Class Activity 10}\label{class-activity-10}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(tidyr)}
\end{Highlighting}
\end{Shaded}

\hypertarget{your-turn-1-3}{%
\section{Your Turn 1}\label{your-turn-1-3}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{students }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{id =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{24}\NormalTok{,}
  \AttributeTok{grade =} \FunctionTok{sample}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"9th"}\NormalTok{, }\StringTok{"10th"}\NormalTok{, }\StringTok{"11th"}\NormalTok{), }\DecValTok{24}\NormalTok{, }\AttributeTok{replace =} \ConstantTok{TRUE}\NormalTok{),}
  \AttributeTok{region =} \FunctionTok{sample}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"North America"}\NormalTok{, }\StringTok{"Europe"}\NormalTok{, }\StringTok{"Asia"}\NormalTok{, }\StringTok{"South America"}\NormalTok{, }\StringTok{"Middle East"}\NormalTok{, }\StringTok{"Africa"}\NormalTok{), }\DecValTok{24}\NormalTok{, }\AttributeTok{replace =} \ConstantTok{TRUE}\NormalTok{),}
  \AttributeTok{score =} \FunctionTok{round}\NormalTok{(}\FunctionTok{runif}\NormalTok{(}\DecValTok{24}\NormalTok{,}\DecValTok{50}\NormalTok{, }\DecValTok{100}\NormalTok{))}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a.-create-a-new-column-grade_fac-by-converting-the-grade-column-into-a-factor.-reorder-the-levels-of-grade_fac-to-be-9th-10th-and-11th.-sort-the-dataset-based-on-the-grade_fac-column.}{%
\subsection{\texorpdfstring{a. Create a new column \texttt{grade\_fac} by converting the grade column into a factor. Reorder the levels of \texttt{grade\_fac} to be ``9th'', ``10th'', and ``11th''. Sort the dataset based on the \texttt{grade\_fac} column.}{a. Create a new column grade\_fac by converting the grade column into a factor. Reorder the levels of grade\_fac to be ``9th'', ``10th'', and ``11th''. Sort the dataset based on the grade\_fac column.}}\label{a.-create-a-new-column-grade_fac-by-converting-the-grade-column-into-a-factor.-reorder-the-levels-of-grade_fac-to-be-9th-10th-and-11th.-sort-the-dataset-based-on-the-grade_fac-column.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{students\_a }\OtherTok{\textless{}{-}}\NormalTok{ students }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{grade\_fac =} \FunctionTok{factor}\NormalTok{(grade)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{grade\_fac =} \FunctionTok{fct\_relevel}\NormalTok{(grade\_fac, }\FunctionTok{c}\NormalTok{(}\StringTok{"9th"}\NormalTok{, }\StringTok{"10th"}\NormalTok{, }\StringTok{"11th"}\NormalTok{))) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(grade\_fac) }
\FunctionTok{print}\NormalTok{(students\_a, }\AttributeTok{n =} \DecValTok{24}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 24 x 5
      id grade region        score grade_fac
   <int> <chr> <chr>         <dbl> <fct>    
 1     1 9th   Middle East      69 9th      
 2     4 9th   North America    75 9th      
 3    11 9th   Africa           91 9th      
 4    12 9th   Middle East      89 9th      
 5    14 9th   Middle East      57 9th      
 6    15 9th   North America    63 9th      
 7    17 9th   Africa           84 9th      
 8    21 9th   Asia             91 9th      
 9     2 10th  Africa           81 10th     
10     3 10th  Asia             65 10th     
11     5 10th  North America    69 10th     
12     6 10th  Europe           88 10th     
13     7 10th  North America    60 10th     
14     9 10th  North America    89 10th     
15    13 10th  Africa           70 10th     
16    22 10th  Europe           79 10th     
17    23 10th  Middle East      63 10th     
18    24 10th  Africa           58 10th     
19     8 11th  Africa           69 11th     
20    10 11th  Asia             59 11th     
21    16 11th  Europe           52 11th     
22    18 11th  Asia             75 11th     
23    19 11th  North America    58 11th     
24    20 11th  Middle East      85 11th     
\end{verbatim}

\hypertarget{b.-create-a-new-column-region_fac-by-converting-the-region-column-into-a-factor.-collapse-the-region_fac-levels-into-three-categories-americas-emea-and-asia.-count-the-number-of-students-in-each-collapsed-region-category.}{%
\subsection{\texorpdfstring{b. Create a new column \texttt{region\_fac} by converting the \texttt{region} column into a factor. Collapse the \texttt{region\_fac} levels into three categories: ``Americas'', ``EMEA'' and ``Asia''. Count the number of students in each collapsed region category.}{b. Create a new column region\_fac by converting the region column into a factor. Collapse the region\_fac levels into three categories: ``Americas'', ``EMEA'' and ``Asia''. Count the number of students in each collapsed region category.}}\label{b.-create-a-new-column-region_fac-by-converting-the-region-column-into-a-factor.-collapse-the-region_fac-levels-into-three-categories-americas-emea-and-asia.-count-the-number-of-students-in-each-collapsed-region-category.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{students\_b }\OtherTok{\textless{}{-}}\NormalTok{ students\_a }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{region\_fac =} \FunctionTok{factor}\NormalTok{(region)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{region\_collapsed =} \FunctionTok{fct\_collapse}\NormalTok{(region\_fac, }
                                         \AttributeTok{Americas =} \FunctionTok{c}\NormalTok{(}\StringTok{"North America"}\NormalTok{, }\StringTok{"South America"}\NormalTok{), }
                                         \AttributeTok{EMEA =} \FunctionTok{c}\NormalTok{(}\StringTok{"Europe"}\NormalTok{, }\StringTok{"Middle East"}\NormalTok{, }\StringTok{"Africa"}\NormalTok{), }
                                         \AttributeTok{Asia =} \StringTok{"Asia"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(region\_collapsed)}
\FunctionTok{print}\NormalTok{(students\_b)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 2
  region_collapsed     n
  <fct>            <int>
1 EMEA                14
2 Asia                 4
3 Americas             6
\end{verbatim}

\hypertarget{c.-create-a-new-column-grade_infreq-that-is-a-copy-of-the-grade_fac-column.-reorder-the-levels-of-grade_infreq-based-on-their-frequency-in-the-dataset.-print-the-levels-of-grade_infreq-to-check-the-ordering.}{%
\subsection{\texorpdfstring{c.~Create a new column \texttt{grade\_infreq} that is a copy of the \texttt{grade\_fac} column. Reorder the levels of \texttt{grade\_infreq} based on their frequency in the dataset. Print the levels of \texttt{grade\_infreq} to check the ordering.}{c.~Create a new column grade\_infreq that is a copy of the grade\_fac column. Reorder the levels of grade\_infreq based on their frequency in the dataset. Print the levels of grade\_infreq to check the ordering.}}\label{c.-create-a-new-column-grade_infreq-that-is-a-copy-of-the-grade_fac-column.-reorder-the-levels-of-grade_infreq-based-on-their-frequency-in-the-dataset.-print-the-levels-of-grade_infreq-to-check-the-ordering.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{students\_c }\OtherTok{\textless{}{-}}\NormalTok{ students\_a }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{grade\_infreq =}\NormalTok{ grade\_fac) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{grade\_infreq =} \FunctionTok{fct\_infreq}\NormalTok{(grade\_infreq))}

\FunctionTok{levels}\NormalTok{(students\_c}\SpecialCharTok{$}\NormalTok{grade\_infreq)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "10th" "9th"  "11th"
\end{verbatim}

\hypertarget{d.-create-a-new-column-grade_lumped-by-lumping-the-least-frequent-level-of-the-grade_fac-column-into-an-others-category.-count-the-number-of-students-in-each-of-the-categories-of-the-grade_lumped-column.}{%
\subsection{\texorpdfstring{d.~Create a new column \texttt{grade\_lumped} by lumping the least frequent level of the \texttt{grade\_fac} column into an `Others' category. Count the number of students in each of the categories of the \texttt{grade\_lumped} column.}{d.~Create a new column grade\_lumped by lumping the least frequent level of the grade\_fac column into an `Others' category. Count the number of students in each of the categories of the grade\_lumped column.}}\label{d.-create-a-new-column-grade_lumped-by-lumping-the-least-frequent-level-of-the-grade_fac-column-into-an-others-category.-count-the-number-of-students-in-each-of-the-categories-of-the-grade_lumped-column.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{students\_d }\OtherTok{\textless{}{-}}\NormalTok{ students\_a }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{grade\_lumped =} \FunctionTok{fct\_lump}\NormalTok{(grade\_fac, }\AttributeTok{n =} \DecValTok{1}\NormalTok{, }\AttributeTok{other\_level =} \StringTok{"Others"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(grade\_lumped)}
\NormalTok{students\_d}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 2
  grade_lumped     n
  <fct>        <int>
1 10th            10
2 Others          14
\end{verbatim}

\hypertarget{your-turn-2-2}{%
\section{Your Turn 2}\label{your-turn-2-2}}

Lets import the \texttt{gss\_cat} dataset from the \texttt{forcats} library. This datast contains a sample of categorical variables from the General Social survey.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# import gss\_cat dataset from forcats library}
\NormalTok{forcats}\SpecialCharTok{::}\NormalTok{gss\_cat}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 21,483 x 9
    year marital       age race  rincome partyid relig denom
   <int> <fct>       <int> <fct> <fct>   <fct>   <fct> <fct>
 1  2000 Never marr~    26 White $8000 ~ Ind,ne~ Prot~ Sout~
 2  2000 Divorced       48 White $8000 ~ Not st~ Prot~ Bapt~
 3  2000 Widowed        67 White Not ap~ Indepe~ Prot~ No d~
 4  2000 Never marr~    39 White Not ap~ Ind,ne~ Orth~ Not ~
 5  2000 Divorced       25 White Not ap~ Not st~ None  Not ~
 6  2000 Married        25 White $20000~ Strong~ Prot~ Sout~
 7  2000 Never marr~    36 White $25000~ Not st~ Chri~ Not ~
 8  2000 Divorced       44 White $7000 ~ Ind,ne~ Prot~ Luth~
 9  2000 Married        44 White $25000~ Not st~ Prot~ Other
10  2000 Married        47 White $25000~ Strong~ Prot~ Sout~
# ... with 21,473 more rows, and 1 more variable:
#   tvhours <int>
\end{verbatim}

Use \texttt{gss\_cat} to answer the following questions.

\hypertarget{a.-which-religions-watch-the-least-tv}{%
\subsection{a. Which religions watch the least TV?}\label{a.-which-religions-watch-the-least-tv}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# your r{-}code}
\NormalTok{gss\_cat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{drop\_na}\NormalTok{(tvhours) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(relig) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{tvhours =} \FunctionTok{mean}\NormalTok{(tvhours)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(tvhours, }\FunctionTok{fct\_reorder}\NormalTok{(relig, tvhours))) }\SpecialCharTok{+}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_10_files/figure-latex/unnamed-chunk-8-1}

\hypertarget{b.-do-married-people-watch-more-or-less-tv-than-single-people}{%
\subsection{b. Do married people watch more or less TV than single people?}\label{b.-do-married-people-watch-more-or-less-tv-than-single-people}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# your r{-}code}
\NormalTok{gss\_cat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{drop\_na}\NormalTok{(tvhours) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(marital) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{tvhours =} \FunctionTok{mean}\NormalTok{(tvhours)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(tvhours, }\FunctionTok{fct\_reorder}\NormalTok{(marital, tvhours))) }\SpecialCharTok{+}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_10_files/figure-latex/unnamed-chunk-9-1}

\hypertarget{c.-collapse-the-marital-variable-to-have-levels-married-not_married-and-no_answer.-include-never-married-divorced-and-widowed-in-not_married}{%
\subsection{\texorpdfstring{c.~Collapse the \texttt{marital} variable to have levels \texttt{married}, \texttt{not\_married}, and \texttt{no\_answer}. Include \texttt{"Never\ married"}, \texttt{"Divorced"}, and ``\texttt{Widowed"} in \texttt{not\_married}}{c.~Collapse the marital variable to have levels married, not\_married, and no\_answer. Include "Never married", "Divorced", and ``Widowed" in not\_married}}\label{c.-collapse-the-marital-variable-to-have-levels-married-not_married-and-no_answer.-include-never-married-divorced-and-widowed-in-not_married}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# your r{-}code}
\NormalTok{gss\_cat }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{drop\_na}\NormalTok{(tvhours) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(marital, tvhours) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{maritalStatus =}
      \FunctionTok{fct\_collapse}\NormalTok{(}
\NormalTok{        marital,}
        \AttributeTok{married =} \FunctionTok{c}\NormalTok{(}\StringTok{"Married"}\NormalTok{,}
                    \StringTok{"Separated"}\NormalTok{),}
        \AttributeTok{not\_married =} \FunctionTok{c}\NormalTok{(}\StringTok{"Never married"}\NormalTok{,}
                        \StringTok{"Divorced"}\NormalTok{,}
                        \StringTok{"Widowed"}\NormalTok{),}
        \AttributeTok{no\_answer =} \FunctionTok{c}\NormalTok{(}\StringTok{"No answer"}\NormalTok{)) }
\NormalTok{  ) }\OtherTok{{-}\textgreater{}}\NormalTok{ marital\_c}

\FunctionTok{levels}\NormalTok{(marital\_c}\SpecialCharTok{$}\NormalTok{maritalStatus)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "no_answer"   "not_married" "married"    
\end{verbatim}

\hypertarget{class-activity-11}{%
\chapter{Class Activity 11}\label{class-activity-11}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(stringr)}
\end{Highlighting}
\end{Shaded}

\hypertarget{problem-1}{%
\section{Problem 1}\label{problem-1}}

Let's learn about combining strings with different separators first.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{place }\OtherTok{\textless{}{-}} \StringTok{"Central Park"}
\NormalTok{activity }\OtherTok{\textless{}{-}} \StringTok{"jogging"}
\NormalTok{activities }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"jogging"}\NormalTok{, }\StringTok{"picnicking"}\NormalTok{, }\StringTok{"boating"}\NormalTok{)}
\NormalTok{my\_sentence }\OtherTok{\textless{}{-}} \FunctionTok{str\_c}\NormalTok{(place, }\StringTok{" is great for "}\NormalTok{, activity, }\StringTok{"."}\NormalTok{, }\AttributeTok{sep =} \StringTok{""}\NormalTok{)}
\NormalTok{my\_sentence}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Central Park is great for jogging."
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  What happens when a \texttt{str\_c} entry is a vector?
\end{enumerate}

Click for answer

\emph{Answer:} When an entry in \texttt{str\_c} is a vector, it will combine the strings with each element of the vector, creating multiple combined strings.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_sentences }\OtherTok{\textless{}{-}} \FunctionTok{str\_c}\NormalTok{(place, }\StringTok{" is great for "}\NormalTok{, activities, }\StringTok{"."}\NormalTok{, }\AttributeTok{sep =} \StringTok{""}\NormalTok{)}
\NormalTok{my\_sentences}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Central Park is great for jogging."   
[2] "Central Park is great for picnicking."
[3] "Central Park is great for boating."   
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  How do you combine strings with \texttt{str\_glue}?
\end{enumerate}

Click for answer

\emph{Answer:} You can combine strings with \texttt{str\_glue} using curly braces \texttt{\{\}} to insert variables directly into the string.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_sentence }\OtherTok{\textless{}{-}} \FunctionTok{str\_glue}\NormalTok{(}\StringTok{"\{place\} is great for \{activity\}."}\NormalTok{)}
\NormalTok{my\_sentence}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Central Park is great for jogging.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_sentences1 }\OtherTok{\textless{}{-}} \FunctionTok{str\_glue}\NormalTok{(}\StringTok{"\{place\} is great for \{activities\}."}\NormalTok{)}
\NormalTok{my\_sentences1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Central Park is great for jogging.
Central Park is great for picnicking.
Central Park is great for boating.
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  What does \texttt{str\_flatten} do?
\end{enumerate}

Click for answer

\emph{Answer:} \texttt{str\_flatten} collapses a character vector into a single string by concatenating the elements with a specified separator.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_flatten}\NormalTok{(my\_sentences, }\AttributeTok{collapse =} \StringTok{" and "}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Central Park is great for jogging. and Central Park is great for picnicking. and Central Park is great for boating."
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  What will using a \texttt{\textbackslash{}n} separator do in the command below?
\end{enumerate}

Click for answer

\emph{Answer:} Using a \texttt{\textbackslash{}n} separator in the command will insert a newline character between the strings being combined, making them display on separate lines when printed.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p }\OtherTok{\textless{}{-}} \FunctionTok{str\_c}\NormalTok{(place, }\StringTok{" is great for "}\NormalTok{, activity, }\AttributeTok{sep =} \StringTok{"}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\FunctionTok{writeLines}\NormalTok{(p)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Central Park
 is great for 
jogging
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{4}
\tightlist
\item
  Does \texttt{str\_length} count spaces and special characters??
\end{enumerate}

Click for answer

\emph{Answer:} Yes, \texttt{str\_length} counts spaces and special characters as part of the string's length.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Central Park\n is great for \njogging"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_length}\NormalTok{(p)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 35
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{5}
\tightlist
\item
  How do you count the number of \texttt{e}'s in a string?
\end{enumerate}

Click for answer

\emph{Answer:} You can count the number of \texttt{e}`s in a string using \texttt{str\_count} with a pattern that matches the character 'e'.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{text }\OtherTok{\textless{}{-}} \StringTok{"The quick brown fox jumps over the lazy dog."}
\NormalTok{pattern }\OtherTok{\textless{}{-}} \StringTok{"e"}
\NormalTok{vowel\_count }\OtherTok{\textless{}{-}} \FunctionTok{str\_count}\NormalTok{(text, pattern)}
\NormalTok{vowel\_count}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{6}
\tightlist
\item
  What happens with negative positions?
\end{enumerate}

Click for answer

\emph{Answer:} Negative positions in \texttt{str\_sub} count the positions from the end of the string rather than from the beginning.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_sub}\NormalTok{(my\_sentence, }\AttributeTok{start =} \SpecialCharTok{{-}}\DecValTok{3}\NormalTok{, }\AttributeTok{end =} \SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "ng."
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{7}
\tightlist
\item
  How do you extract a \texttt{substring} with positive and negative positions?
\end{enumerate}

Click for answer

\emph{Answer:} You can extract a \texttt{substring} with positive and negative positions using \texttt{str\_sub} and specifying the start and end positions with either positive or negative numbers.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_sentence }\OtherTok{\textless{}{-}} \StringTok{"Central Park is great for jogging."}
\NormalTok{positive\_substr }\OtherTok{\textless{}{-}} \FunctionTok{str\_sub}\NormalTok{(my\_sentence, }\AttributeTok{start =} \DecValTok{1}\NormalTok{, }\AttributeTok{end =} \DecValTok{12}\NormalTok{)}
\NormalTok{negative\_substr }\OtherTok{\textless{}{-}} \FunctionTok{str\_sub}\NormalTok{(my\_sentence, }\AttributeTok{start =} \SpecialCharTok{{-}}\DecValTok{8}\NormalTok{, }\AttributeTok{end =} \SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\NormalTok{positive\_substr}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Central Park"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{negative\_substr}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "jogging."
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\roman{enumi}.}
\tightlist
\item
  With a vector of positions?
\end{enumerate}

Click for answer

\emph{Answer:} Using a vector of positions with \texttt{str\_sub} will extract \texttt{substrings} starting and ending at the specified positions in the vector.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_sub}\NormalTok{(my\_sentence, }\AttributeTok{start =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{9}\NormalTok{), }\AttributeTok{end =} \FunctionTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{15}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Cent"    "Park is"
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{9}
\tightlist
\item
  How do you extract multiple \texttt{substrings} using a vector of positions?
\end{enumerate}

Click for answer

\emph{Answer:} You can extract multiple \texttt{substrings} using a vector of positions with \texttt{str\_sub} by specifying the start and end positions in separate vectors.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_sentence }\OtherTok{\textless{}{-}} \StringTok{"Central Park is great for jogging."}
\NormalTok{substrs }\OtherTok{\textless{}{-}} \FunctionTok{str\_sub}\NormalTok{(my\_sentence, }\AttributeTok{start =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{14}\NormalTok{, }\DecValTok{24}\NormalTok{), }\AttributeTok{end =} \FunctionTok{c}\NormalTok{(}\DecValTok{12}\NormalTok{, }\DecValTok{19}\NormalTok{, }\DecValTok{30}\NormalTok{))}
\NormalTok{substrs}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Central Park" "is gre"       "or jogg"     
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{problem-2}{%
\section{Problem 2}\label{problem-2}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Use the string parsing functions that you learned today to do tasks described in the comments below:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s1 }\OtherTok{\textless{}{-}} \StringTok{"12\%"}  \CommentTok{\# remove \%}
\NormalTok{s2 }\OtherTok{\textless{}{-}} \StringTok{"New Jersey\_*"}  \CommentTok{\# remove \_*}
\NormalTok{s3 }\OtherTok{\textless{}{-}} \StringTok{"2,150"}    \CommentTok{\# remove comma(,)}
\NormalTok{s4 }\OtherTok{\textless{}{-}} \StringTok{"Learning \#datascience is fun!"}   \CommentTok{\# extract \#datascience}
\NormalTok{s5 }\OtherTok{\textless{}{-}} \StringTok{"123 Main St, Springfield, MA, 01101"}   \CommentTok{\# separate info}
\end{Highlighting}
\end{Shaded}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Cleaning steps}
\NormalTok{s1\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_replace}\NormalTok{(s1, }\StringTok{"\%"}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{s2\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_replace}\NormalTok{(s2, }\StringTok{"\_}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{*"}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{s3\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_replace}\NormalTok{(s3, }\StringTok{","}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{s4\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_extract}\NormalTok{(s4, }\StringTok{"\#}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{w+"}\NormalTok{)}
\NormalTok{s5\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_split}\NormalTok{(s5, }\StringTok{",}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s?"}\NormalTok{)}

\CommentTok{\# Print cleaned strings}
\NormalTok{s1\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "12"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s2\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "New Jersey"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s3\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "2150"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s4\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "#datascience"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s5\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] "123 Main St" "Springfield" "MA"          "01101"      
\end{verbatim}

\hypertarget{problem-3}{%
\section{Problem 3}\label{problem-3}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Use the string parsing functions that you learned today to do tasks described in the comments below:
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s1 }\OtherTok{\textless{}{-}} \StringTok{"25\%"}  \CommentTok{\# remove \%}
\NormalTok{s2 }\OtherTok{\textless{}{-}} \StringTok{"Los Angeles\_\#"}  \CommentTok{\# remove \_\#}
\NormalTok{s3 }\OtherTok{\textless{}{-}} \StringTok{"1,250"}    \CommentTok{\# remove comma(,)}
\NormalTok{s4 }\OtherTok{\textless{}{-}} \StringTok{"Discover \#machinelearning today!"}   \CommentTok{\# extract \#machinelearning}
\NormalTok{s5 }\OtherTok{\textless{}{-}} \StringTok{"456 Main St, San Francisco, CA, 94107"}   \CommentTok{\# separate info}
\end{Highlighting}
\end{Shaded}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Cleaning steps}
\NormalTok{s1\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_replace}\NormalTok{(s1, }\StringTok{"\%"}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{s2\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_replace}\NormalTok{(s2, }\StringTok{"\_\#"}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{s3\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_replace}\NormalTok{(s3, }\StringTok{","}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{s4\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_extract}\NormalTok{(s4, }\StringTok{"\#}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{w+"}\NormalTok{)}
\NormalTok{s5\_clean }\OtherTok{\textless{}{-}} \FunctionTok{str\_split}\NormalTok{(s5, }\StringTok{",}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s?"}\NormalTok{)}

\CommentTok{\# Print cleaned strings}
\NormalTok{s1\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "25"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s2\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Los Angeles"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s3\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "1250"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s4\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "#machinelearning"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{s5\_clean}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] "456 Main St"   "San Francisco" "CA"           
[4] "94107"        
\end{verbatim}

\hypertarget{problem-4}{%
\section{Problem 4}\label{problem-4}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Let's look at the following dataset containing information about movies and their release years. We'll extract the release year from the movie title, create a new column with decades, and count the number of movies in each decade.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Sample dataset}
\NormalTok{movies }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{title =} \FunctionTok{c}\NormalTok{(}
    \StringTok{"The Godfather (1972)"}\NormalTok{, }\StringTok{"Pulp Fiction (1994)"}\NormalTok{, }\StringTok{"The Dark Knight (2008)"}\NormalTok{,}
    \StringTok{"Forrest Gump (1994)"}\NormalTok{, }\StringTok{"The Shawshank Redemption (1994)"}\NormalTok{, }\StringTok{"The Matrix (1999)"}\NormalTok{,}
    \StringTok{"Inception (2010)"}\NormalTok{, }\StringTok{"Interstellar (2014)"}\NormalTok{, }\StringTok{"Parasite (2019)"}\NormalTok{, }\StringTok{"Fight Club (1999)"}
\NormalTok{  )}
\NormalTok{)}
\NormalTok{movies}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 10 x 1
   title                          
   <chr>                          
 1 The Godfather (1972)           
 2 Pulp Fiction (1994)            
 3 The Dark Knight (2008)         
 4 Forrest Gump (1994)            
 5 The Shawshank Redemption (1994)
 6 The Matrix (1999)              
 7 Inception (2010)               
 8 Interstellar (2014)            
 9 Parasite (2019)                
10 Fight Club (1999)              
\end{verbatim}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Processing the dataset}
\NormalTok{movies\_processed }\OtherTok{\textless{}{-}}\NormalTok{ movies }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{release\_year =} \FunctionTok{as.integer}\NormalTok{(}\FunctionTok{str\_extract}\NormalTok{(title, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\}"}\NormalTok{)),}
    \AttributeTok{decade =} \FunctionTok{floor}\NormalTok{(release\_year }\SpecialCharTok{/} \DecValTok{10}\NormalTok{) }\SpecialCharTok{*} \DecValTok{10}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(decade) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{rename}\NormalTok{(}\AttributeTok{num\_movies =}\NormalTok{ n)}

\CommentTok{\# Print the processed dataset}
\NormalTok{movies\_processed}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 4 x 2
  decade num_movies
   <dbl>      <int>
1   1970          1
2   1990          5
3   2000          1
4   2010          3
\end{verbatim}

\hypertarget{class-activity-12}{%
\chapter{Class Activity 12}\label{class-activity-12}}

In-class midterm!

\hypertarget{class-activity-13}{%
\chapter{Class Activity 13}\label{class-activity-13}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(stringr)}
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(readr)}
\end{Highlighting}
\end{Shaded}

In this tutorial, we will learn about string manipulations using regular expressions and the \texttt{stringr} library in R. We will cover different examples and use cases to help you understand the concepts and functions related to string manipulation.

\hypertarget{group-activity-1}{%
\section{Group Activity 1}\label{group-activity-1}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \StringTok{"My SSN is 593{-}29{-}9502 and my age is 55"}
\NormalTok{y }\OtherTok{\textless{}{-}} \StringTok{"My phone number is 612{-}643{-}1539"}
\NormalTok{z }\OtherTok{\textless{}{-}} \StringTok{"My old SSN number is 39532 9423."}
\NormalTok{out }\OtherTok{\textless{}{-}} \FunctionTok{str\_flatten}\NormalTok{(}\FunctionTok{c}\NormalTok{(x,y,z), }\AttributeTok{collapse =} \StringTok{". "}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a.-what-characters-in-x-will-str_view_allx--..--find}{%
\subsection{\texorpdfstring{a. What characters in \texttt{x} will \texttt{str\_view\_all(x,\ "-..-")} find?}{a. What characters in x will str\_view\_all(x, "-..-") find?}}\label{a.-what-characters-in-x-will-str_view_allx--..--find}}

Click for answer

\emph{answer:}

The pattern searches for a dash, followed by any two characters, followed by another dash. In x, it finds ``-29-'' which is a part of the SSN.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(x, }\StringTok{"{-}..{-}"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | My SSN is 593<-29->9502 and my age is 55
\end{verbatim}

\hypertarget{b.-what-pattern-will-str_view_allx--d2--find}{%
\subsection{\texorpdfstring{b. What pattern will \texttt{str\_view\_all(x,\ "-\textbackslash{}\textbackslash{}d\{2\}-")} find?}{b. What pattern will str\_view\_all(x, "-\textbackslash\textbackslash d\{2\}-") find?}}\label{b.-what-pattern-will-str_view_allx--d2--find}}

Click for answer

\emph{answer:}

The pattern searches for a dash, followed by two digits, followed by another dash. In x, it finds the same ``-29-'' as in the previous example, which is a part of the SSN.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(x, }\StringTok{"{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\}{-}"}\NormalTok{)  }\CommentTok{\# "{-}" then 2 digits then "{-}"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | My SSN is 593<-29->9502 and my age is 55
\end{verbatim}

\hypertarget{c.-what-pattern-will-str_view_allout-d2.-find}{%
\subsection{\texorpdfstring{c.~What pattern will \texttt{str\_view\_all(out,\ "\textbackslash{}\textbackslash{}d\{2\}\textbackslash{}\textbackslash{}.*")} find?}{c.~What pattern will str\_view\_all(out, "\textbackslash\textbackslash d\{2\}\textbackslash\textbackslash.*") find?}}\label{c.-what-pattern-will-str_view_allout-d2.-find}}

Click for answer

\emph{answer:}

The pattern searches for two digits followed by an optional period. In out, it finds ``55'' and ``55.'', which represent the age in the first sentence.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(out, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{."}\NormalTok{)  }\CommentTok{\# 2 digits then "."}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | My SSN is 593-29-9502 and my age is< 55.> My phone number is 612-643-1539. My old SSN number is 39532 9423.
\end{verbatim}

\hypertarget{d.-use-str_view_all-to-determine-the-correct-regex-pattern-to-identify-all-ssn-in-out}{%
\subsection{\texorpdfstring{d.~Use \texttt{str\_view\_all} to determine the correct regex pattern to identify all SSN in \texttt{out}}{d.~Use str\_view\_all to determine the correct regex pattern to identify all SSN in out}}\label{d.-use-str_view_all-to-determine-the-correct-regex-pattern-to-identify-all-ssn-in-out}}

We can get the SSN with the usual format (\#\#\#-\#\#-\#\#\#\#) with a regex that has 3, 2, and 4 digits separated by a dash.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(out,}\StringTok{"([0{-}8]}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\}){-}(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\}){-}(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\})"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | My SSN is <593-29-9502> and my age is 55. My phone number is 612-643-1539. My old SSN number is 39532 9423.
\end{verbatim}

This misses the oddly formatted SSN in the third entry. Rather than use a dash, we can specify the divider as \texttt{{[}-\textbackslash{}\textbackslash{}s{]}?} which allows either 0 or 1 occurrences of either a dash or space divider:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(out,}\StringTok{"([0{-}8]}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\})"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | My SSN is <593-29-9502> and my age is 55. My phone number is 612-643-1539. My old SSN number is <39532 9423>.
\end{verbatim}

Click for answer

\emph{answer:}

The first pattern finds the SSNs in the standard format (\#\#\#-\#\#-\#\#\#\#) by searching for 3 digits, a dash, 2 digits, another dash, and 4 digits. The second pattern does the same but allows for a space instead of a dash as a divider. It finds all SSNs in out, including the oddly formatted one in the third sentence.

\hypertarget{e.-write-a-regular-expression-to-extract-dates-in-the-format-yyyy-mm-dd-from-a-given-text.}{%
\subsection{e. Write a regular expression to extract dates in the format YYYY-MM-DD from a given text.}\label{e.-write-a-regular-expression-to-extract-dates-in-the-format-yyyy-mm-dd-from-a-given-text.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{date\_pattern }\OtherTok{\textless{}{-}} \StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\}{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\}{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\}"}
\NormalTok{text }\OtherTok{\textless{}{-}} \StringTok{"The event will take place on 2023{-}07{-}20 and end on 2023{-}07{-}22."}
\FunctionTok{str\_extract\_all}\NormalTok{(text, date\_pattern)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] "2023-07-20" "2023-07-22"
\end{verbatim}

Click for answer

\emph{Answer:} The pattern searches for 4 digits, a dash, 2 digits, another dash, and 2 digits. In the given text, it finds the dates ``2023-07-20'' and ``2023-07-22''.

\hypertarget{f.-write-a-regular-expression-to-extract-all-words-that-start-with-a-capital-letter-in-a-given-text.}{%
\subsection{f.~Write a regular expression to extract all words that start with a capital letter in a given text.}\label{f.-write-a-regular-expression-to-extract-all-words-that-start-with-a-capital-letter-in-a-given-text.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{capital\_pattern }\OtherTok{\textless{}{-}} \StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{b[A{-}Z][a{-}zA{-}Z]*}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{b"}
\NormalTok{text }\OtherTok{\textless{}{-}} \StringTok{"Alice and Bob went to the Market to buy some Groceries."}
\FunctionTok{str\_extract\_all}\NormalTok{(text, capital\_pattern)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] "Alice"     "Bob"       "Market"    "Groceries"
\end{verbatim}

Click for answer

\emph{Answer:} The pattern searches for a word boundary, followed by an uppercase letter, and then any sequence of letters. In the given text, it finds the words ``Alice'', ``Bob'', ``Market'', and ``Groceries''.

\hypertarget{g-optional-create-a-regular-expression-to-match-urls-considering-both-http-and-https-protocols.}{%
\subsection{g (Optional) Create a regular expression to match URLs, considering both http and https protocols.}\label{g-optional-create-a-regular-expression-to-match-urls-considering-both-http-and-https-protocols.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{url\_pattern }\OtherTok{\textless{}{-}} \StringTok{"https?://(?:[a{-}zA{-}Z0{-}9{-}]+}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.)+[a{-}zA{-}Z]\{2,\}(?::}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+)?(?:/}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{S*)?"}
\NormalTok{urls }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"https://www.example.com"}\NormalTok{, }\StringTok{"http://example.org/resource?query=123"}\NormalTok{, }\StringTok{"invalid\_url.example.com"}\NormalTok{)}
\FunctionTok{str\_view}\NormalTok{(urls, url\_pattern)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | <https://www.example.com>
[2] | <http://example.org/resource?query=123>
\end{verbatim}

Click for answer

\emph{Answer:} The pattern searches for either ``\url{http://}'' or ``\url{https://}'', followed by one or more domain segments separated by periods, an optional port number, and an optional path. In the given urls, it matches the first two valid URLs but not the invalid one.

\texttt{https?://:} This part matches the URL protocol (http or https). The \texttt{?} means that the preceding character ``s'' is optional.
\texttt{(?:{[}a-zA-Z0-9-{]}+\textbackslash{}\textbackslash{}.)+:} This part matches the domain name. The \texttt{(?:\ )} is a non-capturing group, and \texttt{{[}a-zA-Z0-9-{]}+} matches one or more alphanumeric characters or hyphens. The \texttt{\textbackslash{}\textbackslash{}}. matches a period (dot), and the + outside the group means that the pattern inside the group should occur one or more times. \texttt{{[}a-zA-Z{]}\{2,\}:} This part matches the top-level domain (TLD), such as .com or .org, which has at least two alphabetic characters. \texttt{(?::\textbackslash{}\textbackslash{}d+)?:} This part is an optional group that matches a colon followed by one or more digits. It is used to specify a port number in the URL. The ? outside the group makes it optional. \texttt{(?:/\textbackslash{}\textbackslash{}S*)?:} This part is another optional group that matches a forward slash followed by zero or more non-whitespace characters (representing the URL path). Again, the \texttt{?} outside the group makes it optional.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{group-activity-2}{%
\section{Group Activity 2}\label{group-activity-2}}

\hypertarget{a.-lets-deal-with-a-number-string-that-is-longer-than-9-digits.}{%
\subsection{a. Let's deal with a number string that is longer than 9 digits.}\label{a.-lets-deal-with-a-number-string-that-is-longer-than-9-digits.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ssn }\OtherTok{\textless{}{-}} \StringTok{"([0{-}8]}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\})"}
\NormalTok{test }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"123{-}45{-}67890"}\NormalTok{,}\StringTok{"1123 45 6789"}\NormalTok{)}
\FunctionTok{str\_view\_all}\NormalTok{(test, ssn)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | <123-45-6789>0
[2] | 1<123 45 6789>
\end{verbatim}

This example captures a 9-digit string as an SSN, but these strings are longer than 9 digits and may not represent an SSN. One way to deal with this is to use the negative lookbehind \texttt{?\textless{}!} and negative lookahead \texttt{?!} operators to ensure that the identified 9-digit string does not have a leading 0 or does not contain more digits.

If we ``look behind'' from the start of the SSN, we should not see another digit:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(test, }\StringTok{"(?\textless{}!}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d)([0{-}8]}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\})"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | <123-45-6789>0
[2] | 1123 45 6789
\end{verbatim}

And if we ``look ahead'' from the end of the SSN, we should not see another digit:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view\_all}\NormalTok{(test, }\StringTok{"(?\textless{}!}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d)([0{-}8]}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{2\})[{-}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]?(}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{4\})(?!}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | 123-45-67890
[2] | 1123 45 6789
\end{verbatim}

For parts b and c, consider the following string.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{string1 }\OtherTok{\textless{}{-}} \StringTok{"100 dollars 100 pesos"}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.-explain-why-the-following-matches-the-first-100-and-not-the-second.}{%
\subsection{b. Explain why the following matches the first 100 and not the second.}\label{b.-explain-why-the-following-matches-the-first-100-and-not-the-second.}}

Click for answer

\emph{answer:} It looks for one or more digits followed by a space and \texttt{dollars}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view}\NormalTok{(string1, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+(?= dollars)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | <100> dollars 100 pesos
\end{verbatim}

\hypertarget{c.-explain-why-the-following-matches-the-second-100-and-not-the-first.}{%
\subsection{c.~Explain why the following matches the second 100 and not the first.}\label{c.-explain-why-the-following-matches-the-second-100-and-not-the-first.}}

Click for answer

\emph{answer:} It looks for one or more digits not followed by either a digit or space followed by \texttt{dollars}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view}\NormalTok{(string1, }\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+(?!}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d| dollars)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | 100 dollars <100> pesos
\end{verbatim}

For parts d and e, please take a look at \texttt{string2}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{string2 }\OtherTok{\textless{}{-}} \StringTok{"USD100 PESO100"}
\end{Highlighting}
\end{Shaded}

\hypertarget{d.-explain-why-the-following-matches-the-first-100-and-not-the-second.}{%
\subsection{d.~Explain why the following matches the first 100 and not the second.}\label{d.-explain-why-the-following-matches-the-first-100-and-not-the-second.}}

Click for answer

\emph{answer:} It looks for exactly 3 digits preceded by USD

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view}\NormalTok{(string2, }\StringTok{"(?\textless{}=USD)}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{3\}"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | USD<100> PESO100
\end{verbatim}

\hypertarget{e.-explain-why-the-following-matches-the-second-100-and-not-the-first.}{%
\subsection{e. Explain why the following matches the second 100 and not the first.}\label{e.-explain-why-the-following-matches-the-second-100-and-not-the-first.}}

Click for answer

\emph{answer:} It looks for exactly 3 digits that is not preceded by USD

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str\_view}\NormalTok{(string2, }\StringTok{"(?\textless{}!USD)}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d\{3\}"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] | USD100 PESO<100>
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{group-activity-3}{%
\section{Group Activity 3}\label{group-activity-3}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tweets}\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/TrumpTweetData.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a.-what-proportion-of-tweets-text-mention-america}{%
\subsection{a. What proportion of tweets (text) mention ``America''?}\label{a.-what-proportion-of-tweets-text-mention-america}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tweets }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{prop =} \FunctionTok{mean}\NormalTok{(}\FunctionTok{str\_detect}\NormalTok{(}\FunctionTok{str\_to\_title}\NormalTok{(text), }\StringTok{"America"}\NormalTok{))) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 1
    prop
   <dbl>
1 0.0926
\end{verbatim}

Click for answer

\emph{Answer:} About 10\% of tweets mention ``America''.

\hypertarget{b.-what-proportion-of-these-tweets-include-great}{%
\subsection{b. What proportion of these tweets include ``great''?}\label{b.-what-proportion-of-these-tweets-include-great}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tweets }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(}\FunctionTok{str\_detect}\NormalTok{(}\FunctionTok{str\_to\_title}\NormalTok{(text), }\StringTok{"America"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{prop =} \FunctionTok{mean}\NormalTok{(}\FunctionTok{str\_detect}\NormalTok{(}\FunctionTok{str\_to\_lower}\NormalTok{(text), }\StringTok{"great"}\NormalTok{))) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 1
   prop
  <dbl>
1   0.4
\end{verbatim}

Click for answer

\emph{Answer:} About 40\% of tweets mention ``great''.

\hypertarget{c.-what-proportion-of-the-tweets-mention}{%
\subsection{\texorpdfstring{c.~What proportion of the tweets mention \texttt{@}?}{c.~What proportion of the tweets mention @?}}\label{c.-what-proportion-of-the-tweets-mention}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tweets }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{ct =} \FunctionTok{str\_count}\NormalTok{(text, }\StringTok{"@"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(text, ct) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{prop =} \FunctionTok{mean}\NormalTok{(ct}\SpecialCharTok{\textgreater{}}\DecValTok{0}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 1
   prop
  <dbl>
1 0.317
\end{verbatim}

Click for answer

\emph{Answer:} About 32\% of tweets mention \texttt{@}.

\hypertarget{d.-remove-the-tweets-having-mentions-.}{%
\subsection{\texorpdfstring{d.~Remove the tweets having mentions \texttt{@}.}{d.~Remove the tweets having mentions @.}}\label{d.-remove-the-tweets-having-mentions-.}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Mentions }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"@[\^{}}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{s]+"}\NormalTok{)}

\NormalTok{tw\_noMentions }\OtherTok{\textless{}{-}}\NormalTok{ tweets }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{textNoMentions =} \FunctionTok{str\_replace\_all}\NormalTok{(text, Mentions, }\StringTok{""}\NormalTok{))}
\NormalTok{tw\_noMentions}\SpecialCharTok{$}\NormalTok{text[}\DecValTok{38}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "My daughter @IvankaTrump will be on @Greta tonight at 7pm. Enjoy! https://t.co/QySC5PLFMy"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tw\_noMentions}\SpecialCharTok{$}\NormalTok{textNoMentions[}\DecValTok{38}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "My daughter  will be on  tonight at 7pm. Enjoy! https://t.co/QySC5PLFMy"
\end{verbatim}

Click for answer

\emph{Answer:} \texttt{@:} This part of the pattern matches the ``@'' symbol, which usually indicates the beginning of a mention in a tweet.
{[}\^{}\textbackslash s{]}+: This part of the pattern matches one or more characters that are NOT whitespaces. The \texttt{\^{}} inside the square brackets \texttt{{[}\ {]}} negates the character class (meaning it matches any character that is NOT in the specified class). The double backslash \texttt{\textbackslash{}\textbackslash{}} is used to escape the backslash in the R string, so the pattern \texttt{\textbackslash{}\textbackslash{}s} represents the whitespace character class \texttt{\textbackslash{}s}. Finally, the + indicates that the pattern should match one or more occurrences of the non-whitespace characters. Together, this regular expression pattern \texttt{@{[}\^{}\textbackslash{}\textbackslash{}s{]}+} matches any mention in a tweet, which usually starts with ``@'' followed by one or more non-whitespace characters.

\hypertarget{e.-what-poportion-of-tweets-originated-from-an-iphone}{%
\subsection{e. What poportion of tweets originated from an iPhone?}\label{e.-what-poportion-of-tweets-originated-from-an-iphone}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tweets }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(source) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarize}\NormalTok{(}\AttributeTok{count =} \FunctionTok{n}\NormalTok{()) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{prop =}\NormalTok{ count }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(count)) }\SpecialCharTok{\%\textgreater{}\%}  \FunctionTok{filter}\NormalTok{(source }\SpecialCharTok{==} \StringTok{"iPhone"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 1 x 3
  source count  prop
  <chr>  <int> <dbl>
1 iPhone   628 0.415
\end{verbatim}

Click for answer

\emph{Answer:} About 42\% of the tweets originated from an iPhone.

\hypertarget{class-activity-14}{%
\chapter{Class Activity 14}\label{class-activity-14}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(wordcloud)}
\FunctionTok{library}\NormalTok{(reshape2)}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(tidyr)}
\FunctionTok{library}\NormalTok{(tidytext)}
\FunctionTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\hypertarget{group-activity-1-1}{%
\section{Group Activity 1}\label{group-activity-1-1}}

\hypertarget{a.-variance-and-skewness}{%
\subsection{a. Variance and Skewness}\label{a.-variance-and-skewness}}

The variance of a random variable \(x\) is defined as:

\[\operatorname{Var}(x)=\frac{1}{n-1} \sum_{i=1}^{n}\left(x_{i}-\bar{x}\right)^{2}\]

where \(x_i = (\sum_i^n x_i)/n\) is the sample mean. Also, the skewness of the random variable \(x\) is defined as:

\[\operatorname{Skew}(x)=\frac{\frac{1}{n-2}\left(\sum_{i=1}^{n}\left(x_{i}-\bar{x}\right)^{3}\right)}{\operatorname{Var}(x)^{3 /2}}\]

Please write functions to calculate the variance and skewness of \(\{12, 45, 54, 34, 56, 30, 67, \text{NA}\}\).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{12}\NormalTok{, }\DecValTok{45}\NormalTok{, }\DecValTok{54}\NormalTok{, }\DecValTok{34}\NormalTok{, }\DecValTok{56}\NormalTok{, }\DecValTok{30}\NormalTok{, }\DecValTok{67}\NormalTok{, }\ConstantTok{NA}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# function to calculate the variance of a vector}
\NormalTok{var }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x)\{}
\NormalTok{  x }\OtherTok{\textless{}{-}} \FunctionTok{na.omit}\NormalTok{(x) }\CommentTok{\# omit NA values}
  \FunctionTok{sum}\NormalTok{((x }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(x)) }\SpecialCharTok{\^{}} \DecValTok{2}\NormalTok{) }\SpecialCharTok{/}\NormalTok{ (}\FunctionTok{length}\NormalTok{(x) }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{var}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 346.619
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# function to calculate the skewness of a vector}
\NormalTok{skewness }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x) \{}
\NormalTok{  x }\OtherTok{\textless{}{-}} \FunctionTok{na.omit}\NormalTok{(x) }\CommentTok{\# omit NA values}
  \FunctionTok{sum}\NormalTok{((x }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(x)) }\SpecialCharTok{\^{}} \DecValTok{3}\NormalTok{) }\SpecialCharTok{/}\NormalTok{((}\FunctionTok{length}\NormalTok{(x) }\SpecialCharTok{{-}} \DecValTok{2}\NormalTok{) }\SpecialCharTok{*} \FunctionTok{var}\NormalTok{(x) }\SpecialCharTok{\^{}}\NormalTok{ (}\DecValTok{3} \SpecialCharTok{/} \DecValTok{2}\NormalTok{))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{skewness}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -0.3930586
\end{verbatim}

\hypertarget{b.-conditions-and-breaks}{%
\subsection{b. Conditions and breaks}\label{b.-conditions-and-breaks}}

Create a function that iterates through a numeric vector and stops when it encounters the first negative number, returning the position of that negative number. If there are no negative numbers in the vector, the function should return a message stating that there are no negative numbers.

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{find\_first\_negative }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x) \{}
\NormalTok{  negative\_positions }\OtherTok{\textless{}{-}} \FunctionTok{which}\NormalTok{(x }\SpecialCharTok{\textless{}} \DecValTok{0}\NormalTok{)}
  
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{length}\NormalTok{(negative\_positions) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{) \{}
    \FunctionTok{return}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"The first negative number is at position"}\NormalTok{, negative\_positions[}\DecValTok{1}\NormalTok{]))}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{return}\NormalTok{(}\StringTok{"There are no negative numbers in the vector"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{test\_vector }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{5}\NormalTok{, }\DecValTok{12}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{7}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DecValTok{15}\NormalTok{)}
\FunctionTok{find\_first\_negative}\NormalTok{(test\_vector)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "The first negative number is at position 3"
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{group-activity-2-1}{%
\section{Group Activity 2}\label{group-activity-2-1}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{musical\_instr\_reviews }\OtherTok{\textless{}{-}}  \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/musicreviews.csv"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{rename}\NormalTok{(}\AttributeTok{ratingOverall =}\NormalTok{ overall)}
\FunctionTok{glimpse}\NormalTok{(musical\_instr\_reviews)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Rows: 10,261
Columns: 3
$ reviewerName  <chr> "cassandra tu \"Yeah, well, that's j~
$ reviewText    <chr> "not much to write about here but it~
$ ratingOverall <dbl> 5, 5, 5, 5, 5, 5, 5, 3, 5, 5, 5, 4, ~
\end{verbatim}

\hypertarget{a.-write-a-function-to-filter-the-dataset-based-on-the-provided-rating}{%
\subsection{a. Write a function to filter the dataset based on the provided rating:}\label{a.-write-a-function-to-filter-the-dataset-based-on-the-provided-rating}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{filter\_reviews\_by\_rating }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(data, rating) \{}
\NormalTok{  data }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(ratingOverall }\SpecialCharTok{==}\NormalTok{ rating)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.-write-a-function-to-process-the-text-and-remove-stop-words}{%
\subsection{b. Write a function to process the text and remove stop words:}\label{b.-write-a-function-to-process-the-text-and-remove-stop-words}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{process\_text }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(data) \{}
\NormalTok{  data }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{select}\NormalTok{(reviewText) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{unnest\_tokens}\NormalTok{(}\AttributeTok{output =}\NormalTok{ word, }\AttributeTok{input =}\NormalTok{ reviewText) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{anti\_join}\NormalTok{(stop\_words)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{c.-write-a-function-to-join-the-processed-text-with-sentiment-data-and-create-a-word-count-table.}{%
\subsection{c.~Write a function to join the processed text with sentiment data and create a word count table.}\label{c.-write-a-function-to-join-the-processed-text-with-sentiment-data-and-create-a-word-count-table.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{create\_word\_count\_table }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(data) \{}
\NormalTok{  data }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{inner\_join}\NormalTok{(}\FunctionTok{get\_sentiments}\NormalTok{(}\StringTok{"bing"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{count}\NormalTok{(word, sentiment, }\AttributeTok{sort =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{    reshape2}\SpecialCharTok{::}\FunctionTok{acast}\NormalTok{(word }\SpecialCharTok{\textasciitilde{}}\NormalTok{ sentiment, }\AttributeTok{value.var =} \StringTok{"n"}\NormalTok{, }\AttributeTok{fill =} \DecValTok{0}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{d.-create-the-final-function-that-takes-the-rating-and-number-of-words-as-input-arguments-and-returns-a-word-cloud-plot.}{%
\subsection{d.~Create the final function that takes the rating and number of words as input arguments and returns a word cloud plot.}\label{d.-create-the-final-function-that-takes-the-rating-and-number-of-words-as-input-arguments-and-returns-a-word-cloud-plot.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{word\_cloud }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(rating, num.words) \{}
\NormalTok{  rating }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(rating)}
\NormalTok{  num.words }\OtherTok{\textless{}{-}} \FunctionTok{as.numeric}\NormalTok{(num.words)}
  
  \ControlFlowTok{if}\NormalTok{ (rating }\SpecialCharTok{\textgreater{}=} \DecValTok{1} \SpecialCharTok{\&}\NormalTok{ rating }\SpecialCharTok{\textless{}=} \DecValTok{5}\NormalTok{) \{}
\NormalTok{    filtered\_reviews }\OtherTok{\textless{}{-}} \FunctionTok{filter\_reviews\_by\_rating}\NormalTok{(musical\_instr\_reviews, rating)}
\NormalTok{    processed\_reviews }\OtherTok{\textless{}{-}} \FunctionTok{process\_text}\NormalTok{(filtered\_reviews)}
\NormalTok{    word\_count\_table }\OtherTok{\textless{}{-}} \FunctionTok{create\_word\_count\_table}\NormalTok{(processed\_reviews)}
    
    \FunctionTok{comparison.cloud}\NormalTok{(}
\NormalTok{      word\_count\_table,}
      \AttributeTok{colors =} \FunctionTok{c}\NormalTok{(}\StringTok{"blue"}\NormalTok{, }\StringTok{"purple"}\NormalTok{),}
      \AttributeTok{scale =} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\FloatTok{0.5}\NormalTok{),}
      \AttributeTok{max.words =}\NormalTok{ num.words,}
      \AttributeTok{title.size =} \DecValTok{2}
\NormalTok{    )}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{warning}\NormalTok{(}\StringTok{" Please enter a rating from 1 to 5"}\NormalTok{)}
\NormalTok{  \}}
\NormalTok{\}}

\FunctionTok{word\_cloud}\NormalTok{(}\AttributeTok{rating =} \StringTok{"4"}\NormalTok{, }\AttributeTok{num.words =} \DecValTok{300}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_14_files/figure-latex/unnamed-chunk-13-1}

\hypertarget{class-activity-15}{%
\chapter{Class Activity 15}\label{class-activity-15}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(stringr)}


\NormalTok{energy }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/energy.csv"}\NormalTok{,}
                    \AttributeTok{col\_type =} \FunctionTok{cols}\NormalTok{(}
                     \AttributeTok{.default =} \FunctionTok{col\_double}\NormalTok{(), }
                      \AttributeTok{Timestamp =} \FunctionTok{col\_datetime}\NormalTok{(}\AttributeTok{format =} \StringTok{""}\NormalTok{),}
                      \AttributeTok{dayWeek =} \FunctionTok{col\_factor}\NormalTok{(}\AttributeTok{levels=}\FunctionTok{c}\NormalTok{(}\StringTok{"Mon"}\NormalTok{,}\StringTok{"Tues"}\NormalTok{,}\StringTok{"Wed"}\NormalTok{,}\StringTok{"Thurs"}\NormalTok{,}\StringTok{"Fri"}\NormalTok{,}\StringTok{"Sat"}\NormalTok{,}\StringTok{"Sun"}\NormalTok{))}
\NormalTok{                     ))}
\end{Highlighting}
\end{Shaded}

\hypertarget{group-activity-1-2}{%
\section{Group Activity 1}\label{group-activity-1-2}}

\hypertarget{a.-if-and-for-loop}{%
\subsection{\texorpdfstring{a. \texttt{if} and \texttt{for} loop}{a. if and for loop}}\label{a.-if-and-for-loop}}

Write a for loop to iterate over the columns of the `energy' dataset and print the names of all columns containing the string ``House''. Please use the function \texttt{colnames()} to extract the column names and store the results in a list.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Create an empty list to store the column names}
\NormalTok{house\_columns }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{()}

\CommentTok{\# Iterate over the columns of the \textquotesingle{}energy\textquotesingle{} dataset}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \FunctionTok{seq\_along}\NormalTok{(}\FunctionTok{colnames}\NormalTok{(energy))) \{}
\NormalTok{  col\_name }\OtherTok{\textless{}{-}} \FunctionTok{colnames}\NormalTok{(energy)[i]}
  
  \CommentTok{\# Check if the column name contains the string "House"}
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{str\_detect}\NormalTok{(col\_name, }\StringTok{"House"}\NormalTok{)) \{}
    \CommentTok{\# Add the column name to the list}
\NormalTok{    house\_columns[[}\FunctionTok{length}\NormalTok{(house\_columns) }\SpecialCharTok{+} \DecValTok{1}\NormalTok{]] }\OtherTok{\textless{}{-}}\NormalTok{ col\_name}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{\# Print the list of house columns}
\NormalTok{house\_columns }\OtherTok{\textless{}{-}} \FunctionTok{unlist}\NormalTok{(house\_columns)}
\NormalTok{house\_columns}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
 [1] "Allen_House"                     
 [2] "Alumni_Guest_House/Johnson_House"
 [3] "Benton_House"                    
 [4] "Berg_House"                      
 [5] "Bird_House"                      
 [6] "Chaney_House"                    
 [7] "Clader_House"                    
 [8] "Dacie_Moses_House"               
 [9] "Douglas_House"                   
[10] "Farm_House"                      
[11] "Geffert_House"                   
[12] "Headley_House"                   
[13] "Henrickson_House"                
[14] "Henry_House"                     
[15] "Hill_House"                      
[16] "Hilton_House"                    
[17] "Hoppin_House_(Alumni)"           
[18] "Huntington_House"                
[19] "Jewett_House"                    
[20] "Jones_House"                     
[21] "Nutting_House"                   
[22] "Page_House_West"                 
[23] "Parish_House_"                   
[24] "Parr_House"                      
[25] "Pollock_House"                   
[26] "Prentice_House"                  
[27] "Rayment_House"                   
[28] "Rice_House"                      
[29] "Rogers_House"                    
[30] "Ryberg_House"                    
[31] "Seccombe_House"                  
[32] "Sperry_House"                    
[33] "Stimson_House"                   
[34] "Strong_House"                    
[35] "Whittier_House"                  
[36] "Wilson_House"                    
\end{verbatim}

\hypertarget{b.-for-loop-and-mean}{%
\subsection{\texorpdfstring{b. \texttt{for} loop and mean}{b. for loop and mean}}\label{b.-for-loop-and-mean}}

Using a for loop, calculate and print the mean energy consumption of houses you identified in part a.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Assuming the house\_columns vector from the previous step}

\CommentTok{\# Create an empty numeric vector to store the mean energy consumption}
\NormalTok{mean\_energy\_consumption }\OtherTok{\textless{}{-}} \FunctionTok{numeric}\NormalTok{()}

\CommentTok{\# Iterate over the house\_columns vector}
\ControlFlowTok{for}\NormalTok{ (house\_col }\ControlFlowTok{in}\NormalTok{ house\_columns) \{}
  \CommentTok{\# Calculate the mean energy consumption for the current house column}
\NormalTok{  mean\_val }\OtherTok{\textless{}{-}} \FunctionTok{mean}\NormalTok{(energy[[house\_col]], }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
  
  \CommentTok{\# Add the mean energy consumption to the vector}
\NormalTok{  mean\_energy\_consumption }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(mean\_energy\_consumption, mean\_val)}
\NormalTok{\}}

\CommentTok{\# Combine the house names and mean energy consumption into a dataframe}
\NormalTok{house\_mean\_energy }\OtherTok{\textless{}{-}} \FunctionTok{bind\_cols}\NormalTok{(}\AttributeTok{House =}\NormalTok{ house\_columns, }\AttributeTok{MeanEnergyConsumption =}\NormalTok{ mean\_energy\_consumption)}

\CommentTok{\# Print the dataframe}
\NormalTok{house\_mean\_energy }\SpecialCharTok{\%\textgreater{}\%}\NormalTok{  knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{tabular}{l|r}
\hline
House & MeanEnergyConsumption\\
\hline
Allen\_House & 0.9821865\\
\hline
Alumni\_Guest\_House/Johnson\_House & 20.2631152\\
\hline
Benton\_House & 1.8849290\\
\hline
Berg\_House & 1.3174340\\
\hline
Bird\_House & 2.3222680\\
\hline
Chaney\_House & 1.0715123\\
\hline
Clader\_House & 0.4646776\\
\hline
Dacie\_Moses\_House & 1.2776465\\
\hline
Douglas\_House & 0.7219500\\
\hline
Farm\_House & 5.0599020\\
\hline
Geffert\_House & 0.9360400\\
\hline
Headley\_House & 1.4555605\\
\hline
Henrickson\_House & 3.4407858\\
\hline
Henry\_House & 1.3639619\\
\hline
Hill\_House & 1.4735884\\
\hline
Hilton\_House & 0.4248030\\
\hline
Hoppin\_House\_(Alumni) & 1.8760474\\
\hline
Huntington\_House & 1.2395238\\
\hline
Jewett\_House & 0.8987697\\
\hline
Jones\_House & 0.8680271\\
\hline
Nutting\_House & 4.3967234\\
\hline
Page\_House\_West & 1.8923490\\
\hline
Parish\_House\_ & 12.6793378\\
\hline
Parr\_House & 9.7210618\\
\hline
Pollock\_House & 1.1831426\\
\hline
Prentice\_House & 0.9089497\\
\hline
Rayment\_House & 0.8005664\\
\hline
Rice\_House & 1.1568457\\
\hline
Rogers\_House & 0.5634289\\
\hline
Ryberg\_House & 1.0729988\\
\hline
Seccombe\_House & 2.6874199\\
\hline
Sperry\_House & 0.7052983\\
\hline
Stimson\_House & 2.0659904\\
\hline
Strong\_House & 2.5410595\\
\hline
Whittier\_House & 1.0424369\\
\hline
Wilson\_House & 1.0435830\\
\hline
\end{tabular}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{group-activity-2-2}{%
\section{Group Activity 2}\label{group-activity-2-2}}

\textbf{1.} Make a data frame of quantiles for \texttt{energy} buildings in columns 9-90 (you will need \texttt{na.rm\ =\ TRUE})

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{qdf }\OtherTok{\textless{}{-}}\NormalTok{ energy }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\DecValTok{9}\SpecialCharTok{:}\DecValTok{90}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{map\_dfc}\NormalTok{(quantile, }\AttributeTok{probs =} \FunctionTok{seq}\NormalTok{(.}\DecValTok{1}\NormalTok{,.}\DecValTok{9}\NormalTok{,.}\DecValTok{1}\NormalTok{), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{qdf}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 9 x 82
  100_Neva~1 104_M~2 106_W~3 Allen~4 Alumn~5 Arbor~6 Art_S~7
       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
1     0.0972    1.04   0.601   0.756    17.0    0.13    0.23
2     0.120     1.11   0.632   0.781    18.1    0.23    0.28
3     0.183     1.18   0.673   0.941    18.4    0.25    0.33
4     0.461     1.18   0.681   0.983    20.3    0.28    0.4 
5     0.710     1.42   0.692   1.00     21.0    0.32    0.47
6     0.795     1.42   0.865   1.01     21.8    0.38    0.57
7     0.915     1.54   1.10    1.07     21.9    0.44    0.73
8     1.11      1.56   1.20    1.07     22      0.52    0.88
9     1.24      1.67   1.27    1.25     22.5    0.71    1.09
# ... with 75 more variables: Benton_House <dbl>,
#   Berg_House <dbl>, Bird_House <dbl>,
#   Boliou_Memorial_Art_Bldg. <dbl>, Burton_Hall <dbl>,
#   `Cassat_Hall_/_James_Hall` <dbl>,
#   `Center_for_Mathematics_&_Computing` <dbl>,
#   Chaney_House <dbl>, Clader_House <dbl>,
#   College_Warehouse <dbl>, Cowling_Gym <dbl>, ...
\end{verbatim}

\textbf{2.} Add a variable to identify the quantile

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{qdf }\OtherTok{\textless{}{-}}\NormalTok{ energy }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\DecValTok{9}\SpecialCharTok{:}\DecValTok{90}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{map\_dfc}\NormalTok{(quantile, }\AttributeTok{probs =} \FunctionTok{seq}\NormalTok{(.}\DecValTok{1}\NormalTok{,.}\DecValTok{9}\NormalTok{,.}\DecValTok{1}\NormalTok{), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}  
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{stat =} \FunctionTok{str\_c}\NormalTok{(}\StringTok{"quantile\_"}\NormalTok{, }\FunctionTok{seq}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{90}\NormalTok{,}\DecValTok{10}\NormalTok{))) }
\NormalTok{qdf}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 9 x 83
  100_Neva~1 104_M~2 106_W~3 Allen~4 Alumn~5 Arbor~6 Art_S~7
       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
1     0.0972    1.04   0.601   0.756    17.0    0.13    0.23
2     0.120     1.11   0.632   0.781    18.1    0.23    0.28
3     0.183     1.18   0.673   0.941    18.4    0.25    0.33
4     0.461     1.18   0.681   0.983    20.3    0.28    0.4 
5     0.710     1.42   0.692   1.00     21.0    0.32    0.47
6     0.795     1.42   0.865   1.01     21.8    0.38    0.57
7     0.915     1.54   1.10    1.07     21.9    0.44    0.73
8     1.11      1.56   1.20    1.07     22      0.52    0.88
9     1.24      1.67   1.27    1.25     22.5    0.71    1.09
# ... with 76 more variables: Benton_House <dbl>,
#   Berg_House <dbl>, Bird_House <dbl>,
#   Boliou_Memorial_Art_Bldg. <dbl>, Burton_Hall <dbl>,
#   `Cassat_Hall_/_James_Hall` <dbl>,
#   `Center_for_Mathematics_&_Computing` <dbl>,
#   Chaney_House <dbl>, Clader_House <dbl>,
#   College_Warehouse <dbl>, Cowling_Gym <dbl>, ...
\end{verbatim}

\textbf{3.} Reshape the data frame to make variables \texttt{stat} (describing the quantile), \texttt{building} and \texttt{quant} (quantile value)

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{qdf }\OtherTok{\textless{}{-}}\NormalTok{ energy }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{select}\NormalTok{(}\DecValTok{9}\SpecialCharTok{:}\DecValTok{90}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{map\_dfc}\NormalTok{(quantile, }\AttributeTok{probs =} \FunctionTok{seq}\NormalTok{(.}\DecValTok{1}\NormalTok{,.}\DecValTok{9}\NormalTok{,.}\DecValTok{1}\NormalTok{), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}  
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{stat =} \FunctionTok{str\_c}\NormalTok{(}\StringTok{"quantile\_"}\NormalTok{, }\FunctionTok{seq}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{90}\NormalTok{,}\DecValTok{10}\NormalTok{))) }\SpecialCharTok{\%\textgreater{}\%}   
  \FunctionTok{pivot\_longer}\NormalTok{(}\AttributeTok{names\_to =} \StringTok{"building"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"quantiles"}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{82}\NormalTok{)}
\NormalTok{qdf}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 738 x 3
   stat        building                         quantiles
   <chr>       <chr>                                <dbl>
 1 quantile_10 100_Nevada_Street                   0.0972
 2 quantile_10 104_Maple_St.                       1.04  
 3 quantile_10 106_Winona_St.                      0.601 
 4 quantile_10 Allen_House                         0.756 
 5 quantile_10 Alumni_Guest_House/Johnson_House   17.0   
 6 quantile_10 Arboretum_Office                    0.13  
 7 quantile_10 Art_Studios                         0.23  
 8 quantile_10 Benton_House                        1.59  
 9 quantile_10 Berg_House                          1.06  
10 quantile_10 Bird_House                          1.42  
# ... with 728 more rows
\end{verbatim}

\textbf{4.} Plot the KWH value for each quantile on the x-axis for the buildings \texttt{Sayles-Hill}, \texttt{Language\_\&\_Dining\_Center}, \texttt{Olin\_Hall\_of\_Science}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{qdf }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(building }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"Sayles{-}Hill"}\NormalTok{ ,}\StringTok{"Language\_\&\_Dining\_Center"}\NormalTok{, }\StringTok{"Olin\_Hall\_of\_Science"}\NormalTok{))  }\SpecialCharTok{\%\textgreater{}\%}  
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{quantiles, }\AttributeTok{y=}\FunctionTok{parse\_number}\NormalTok{(stat), }\AttributeTok{color=}\NormalTok{building)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+} 
  \FunctionTok{geom\_line}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{group=}\NormalTok{building)) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y=}\StringTok{"Percentile (\%)"}\NormalTok{,}\AttributeTok{x=}\StringTok{"KWH"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{breaks=}\FunctionTok{seq}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{90}\NormalTok{,}\AttributeTok{by=}\DecValTok{10}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{class_activity_15_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{class-activity-16}{%
\chapter{Class Activity 16}\label{class-activity-16}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# load the necessary libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(stringr)}
\FunctionTok{library}\NormalTok{(polite)}
\FunctionTok{library}\NormalTok{(rvest)}
\end{Highlighting}
\end{Shaded}

\hypertarget{group-activity-1-3}{%
\section{Group Activity 1}\label{group-activity-1-3}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{url }\OtherTok{\textless{}{-}} \StringTok{\textquotesingle{}https://www.imdb.com/search/title/?groups=best\_picture\_winner\&sort=year,desc\&count=100\&view=advanced\textquotesingle{}}
\NormalTok{webpage }\OtherTok{\textless{}{-}} \FunctionTok{bow}\NormalTok{(url) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{scrape}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

As seen in the slides, we can extract the movie titles using the \texttt{.lister-item-header\ a} css selector.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{title\_data }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\AttributeTok{css =} \StringTok{".lister{-}item{-}header a"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

Now, lets scrape other elements of the webpage one by one using the selector gadget tool.

\hypertarget{a.-use-the-selector-gadget-tool-to-find-the-css-for-extracting-year-the-movie-came-out.}{%
\subsection{a. Use the selector gadget tool to find the CSS for extracting year the movie came out.}\label{a.-use-the-selector-gadget-tool-to-find-the-css-for-extracting-year-the-movie-came-out.}}

\begin{itemize}
\tightlist
\item
  Tidy the data

  \begin{itemize}
  \tightlist
  \item
    Using \texttt{parse\_number()}
  \item
    Using any regex
  \end{itemize}
\end{itemize}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{year\_data }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\AttributeTok{css =} \StringTok{\textquotesingle{}.text{-}muted.unbold\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{parse\_number}\NormalTok{()}

\NormalTok{year\_data1 }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\AttributeTok{css =} \StringTok{\textquotesingle{}.text{-}muted.unbold\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{str\_extract\_all}\NormalTok{(}\StringTok{"[0{-}9]+"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{unlist}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{as.numeric}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.-next-parse-the-webpage-to-produce-a-vector-of-the-descriptions.-tidy-the-description-by-removing-unwanted-regexes.}{%
\subsection{b. Next, parse the webpage to produce a vector of the descriptions. Tidy the description by removing unwanted regexes.}\label{b.-next-parse-the-webpage-to-produce-a-vector-of-the-descriptions.-tidy-the-description-by-removing-unwanted-regexes.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{description\_data }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{\textquotesingle{}.ratings{-}bar+ .text{-}muted\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{str\_trim}\NormalTok{()}
\FunctionTok{head}\NormalTok{(description\_data,}\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "A middle-aged Chinese immigrant is swept up into an insane adventure in which she alone can save existence by exploring other universes and connecting with the lives she could have led."                                                                      
[2] "As a CODA (Child of Deaf Adults) Ruby is the only hearing person in her deaf family. When the family's fishing business is threatened, Ruby finds herself torn between pursuing her passion at Berklee College of Music and her fear of abandoning her parents."
[3] "A woman in her sixties, after losing everything in the Great Recession, embarks on a journey through the American West, living as a van-dwelling modern-day nomad."                                                                                             
\end{verbatim}

\hypertarget{c.-now-parse-the-runtime-data-by-following-similar-tools-used-for-extracting-year.}{%
\subsection{c.~Now, parse the runtime data by following similar tools used for extracting year.}\label{c.-now-parse-the-runtime-data-by-following-similar-tools-used-for-extracting-year.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{runtime\_data }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{\textquotesingle{}.runtime\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{parse\_number}\NormalTok{()}
\FunctionTok{head}\NormalTok{(runtime\_data)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 139 111 107 132 130 123
\end{verbatim}

\hypertarget{d.-do-the-same-for-getting-the-ratings-data-using-an-appropriate-selector.}{%
\subsection{d.~Do the same for getting the ratings data using an appropriate selector.}\label{d.-do-the-same-for-getting-the-ratings-data-using-an-appropriate-selector.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{rating\_data }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{\textquotesingle{}.ratings{-}imdb{-}rating\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{as.numeric}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\hypertarget{e.-finally-get-the-number-of-votes-following-similar-tools}{%
\subsection{e. Finally, get the number of votes following similar tools}\label{e.-finally-get-the-number-of-votes-following-similar-tools}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{votes\_data }\OtherTok{\textless{}{-}}\NormalTok{ webpage }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{\textquotesingle{}.sort{-}num\_votes{-}visible span:nth{-}child(2)\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{parse\_number}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

We can combine all the information we scraped to produce a nice table that we ca use for further analysis. Please run the following code, once you are done with the prior codes.

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{movies\_df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{Year =}\NormalTok{ year\_data,}
                      \AttributeTok{Title =}\NormalTok{ title\_data,}
                      \AttributeTok{Description =}\NormalTok{ description\_data, }
                      \AttributeTok{Runtime =}\NormalTok{ runtime\_data,}
                      \AttributeTok{Rating =}\NormalTok{ rating\_data,}
                      \AttributeTok{Votes =}\NormalTok{ votes\_data) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{as\_tibble}\NormalTok{()}
\NormalTok{movies\_df }\SpecialCharTok{\%\textgreater{}\%}\NormalTok{ knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{tabular}{r|l|l|r|r|r}
\hline
Year & Title & Description & Runtime & Rating & Votes\\
\hline
2022 & Everything Everywhere All at Once & A middle-aged Chinese immigrant is swept up into an insane adventure in which she alone can save existence by exploring other universes and connecting with the lives she could have led. & 139 & 7.9 & 437434\\
\hline
2021 & CODA & As a CODA (Child of Deaf Adults) Ruby is the only hearing person in her deaf family. When the family's fishing business is threatened, Ruby finds herself torn between pursuing her passion at Berklee College of Music and her fear of abandoning her parents. & 111 & 8.0 & 144597\\
\hline
2020 & Nomadland & A woman in her sixties, after losing everything in the Great Recession, embarks on a journey through the American West, living as a van-dwelling modern-day nomad. & 107 & 7.3 & 169615\\
\hline
2019 & Parasite & Greed and class discrimination threaten the newly formed symbiotic relationship between the wealthy Park family and the destitute Kim clan. & 132 & 8.5 & 847458\\
\hline
2018 & Green Book & A working-class Italian-American bouncer becomes the driver for an African-American classical pianist on a tour of venues through the 1960s American South. & 130 & 8.2 & 515564\\
\hline
2017 & The Shape of Water & At a top secret research facility in the 1960s, a lonely janitor forms a unique relationship with an amphibious creature that is being held in captivity. & 123 & 7.3 & 431027\\
\hline
2016 & Moonlight & A young African-American man grapples with his identity and sexuality while experiencing the everyday struggles of childhood, adolescence, and burgeoning adulthood. & 111 & 7.4 & 317179\\
\hline
2015 & Spotlight & The true story of how the Boston Globe uncovered the massive scandal of child molestation and cover-up within the local Catholic Archdiocese, shaking the entire Catholic Church to its core. & 129 & 8.1 & 480621\\
\hline
2014 & Birdman or (The Unexpected Virtue of Ignorance) & A washed-up superhero actor attempts to revive his fading career by writing, directing, and starring in a Broadway production. & 119 & 7.7 & 643930\\
\hline
2013 & 12 Years a Slave & In the antebellum United States, Solomon Northup, a free black man from upstate New York, is abducted and sold into slavery. & 134 & 8.1 & 713945\\
\hline
2012 & Argo & Acting under the cover of a Hollywood producer scouting a location for a science fiction film, a CIA agent launches a dangerous operation to rescue six Americans in Tehran during the U.S. hostage crisis in Iran in 1979. & 120 & 7.7 & 623498\\
\hline
2011 & The Artist & An egomaniacal film star develops a relationship with a young dancer against the backdrop of Hollywood's silent era. & 100 & 7.9 & 244514\\
\hline
2010 & The King's Speech & The story of King George VI, his impromptu ascension to the throne of the British Empire in 1936, and the speech therapist who helped the unsure monarch overcome his stammer. & 118 & 8.0 & 690535\\
\hline
2008 & Slumdog Millionaire & A Mumbai teenager reflects on his life after being accused of cheating on the Indian version of "Who Wants to be a Millionaire?". & 120 & 8.0 & 857254\\
\hline
2008 & The Hurt Locker & During the Iraq War, a Sergeant recently assigned to an army bomb squad is put at odds with his squad mates due to his maverick way of handling his work. & 131 & 7.5 & 460166\\
\hline
2007 & No Country for Old Men & Violence and mayhem ensue after a hunter stumbles upon a drug deal gone wrong and more than two million dollars in cash near the Rio Grande. & 122 & 8.2 & 997583\\
\hline
2006 & The Departed & An undercover cop and a mole in the police attempt to identify each other while infiltrating an Irish gang in South Boston. & 151 & 8.5 & 1351334\\
\hline
2004 & Crash & Los Angeles citizens with vastly separate lives collide in interweaving stories of race, loss and redemption. & 112 & 7.7 & 441820\\
\hline
2004 & Million Dollar Baby & A determined woman works with a hardened boxing trainer to become a professional. & 132 & 8.1 & 698320\\
\hline
2003 & The Lord of the Rings: The Return of the King & Gandalf and Aragorn lead the World of Men against Sauron's army to draw his gaze from Frodo and Sam as they approach Mount Doom with the One Ring. & 201 & 9.0 & 1880929\\
\hline
2002 & Chicago & Two death-row murderesses develop a fierce rivalry while competing for publicity, celebrity, and a sleazy lawyer's attention. & 113 & 7.2 & 235232\\
\hline
2001 & A Beautiful Mind & After John Nash, a brilliant but asocial mathematician, accepts secret work in cryptography, his life takes a turn for the nightmarish. & 135 & 8.2 & 947726\\
\hline
2000 & Gladiator & A former Roman General sets out to exact vengeance against the corrupt emperor who murdered his family and sent him into slavery. & 155 & 8.5 & 1530528\\
\hline
1999 & American Beauty & A sexually frustrated suburban father has a mid-life crisis after becoming infatuated with his daughter's best friend. & 122 & 8.3 & 1171034\\
\hline
1998 & Shakespeare in Love & The world's greatest ever playwright, William Shakespeare, is young, out of ideas and short of cash, but meets his ideal woman and is inspired to write one of his most famous plays. & 123 & 7.1 & 228974\\
\hline
1997 & Titanic & A seventeen-year-old aristocrat falls in love with a kind but poor artist aboard the luxurious, ill-fated R.M.S. Titanic. & 194 & 7.9 & 1215681\\
\hline
1996 & The English Patient & At the close of World War II, a young nurse tends to a badly-burned plane crash victim. His past is shown in flashbacks, revealing an involvement in a fateful love affair. & 162 & 7.4 & 194573\\
\hline
1995 & Braveheart & Scottish warrior William Wallace leads his countrymen in a rebellion to free his homeland from the tyranny of King Edward I of England. & 178 & 8.4 & 1053089\\
\hline
1994 & Forrest Gump & The presidencies of Kennedy and Johnson, the Vietnam War, the Watergate scandal and other historical events unfold from the perspective of an Alabama man with an IQ of 75, whose only desire is to be reunited with his childhood sweetheart. & 142 & 8.8 & 2127884\\
\hline
1993 & Schindler's List & In German-occupied Poland during World War II, industrialist Oskar Schindler gradually becomes concerned for his Jewish workforce after witnessing their persecution by the Nazis. & 195 & 9.0 & 1380499\\
\hline
1992 & Unforgiven & Retired Old West gunslinger William Munny reluctantly takes on one last job, with the help of his old partner Ned Logan and a young man, The "Schofield Kid." & 130 & 8.2 & 419603\\
\hline
1991 & The Silence of the Lambs & A young F.B.I. cadet must receive the help of an incarcerated and manipulative cannibal killer to help catch another serial killer, a madman who skins his victims. & 118 & 8.6 & 1462210\\
\hline
1990 & Dances with Wolves & Lieutenant John Dunbar, assigned to a remote western Civil War outpost, finds himself engaging with a neighbouring Sioux settlement, causing him to question his own purpose. & 181 & 8.0 & 275220\\
\hline
1989 & Driving Miss Daisy & An old Jewish woman and her African-American chauffeur in the American South have a relationship that grows and improves over the years. & 99 & 7.3 & 113315\\
\hline
1988 & Rain Man & After a selfish L.A. yuppie learns his estranged father left a fortune to an autistic-savant brother in Ohio that he didn't know existed, he absconds with his brother and sets out across the country, hoping to gain a larger inheritance. & 133 & 8.0 & 525344\\
\hline
1987 & The Last Emperor & Dramatization of China's last emperor, Puyi. & 163 & 7.7 & 106885\\
\hline
1986 & Platoon & Chris Taylor, a neophyte recruit in Vietnam, finds himself caught in a battle of wills between two sergeants, one good and the other evil. A shrewd examination of the brutality of war and the duality of man in conflict. & 120 & 8.1 & 422229\\
\hline
1985 & Out of Africa & In 20th-century colonial Kenya, a Danish baroness/plantation owner has a passionate love affair with a free-spirited big-game hunter. & 161 & 7.1 & 82870\\
\hline
1984 & Amadeus & The life, success and troubles of Wolfgang Amadeus Mozart, as told by Antonio Salieri, the contemporaneous composer who was deeply jealous of Mozart's talent and claimed to have murdered him. & 160 & 8.4 & 408632\\
\hline
1983 & Terms of Endearment & Follows hard-to-please Aurora looking for love and her daughter's family problems. & 132 & 7.4 & 62576\\
\hline
1982 & Gandhi & The life of the lawyer who became the famed leader of the Indian revolts against the British rule through his philosophy of nonviolent protest. & 191 & 8.0 & 235937\\
\hline
1981 & Chariots of Fire & Two British track athletes, one a determined Jew and the other a devout Christian, are driven to win in the 1924 Olympics as they wrestle with issues of pride and conscience. & 125 & 7.1 & 63241\\
\hline
1980 & Ordinary People & The accidental death of the older son of an affluent family deeply strains the relationships among the bitter mother, the good-natured father and the guilt-ridden younger son. & 124 & 7.7 & 54209\\
\hline
1979 & Kramer vs. Kramer & After his wife leaves him, a work-obsessed Manhattan advertising executive is forced to learn long-neglected parenting skills, but a heated custody battle over the couple's young son deepens the wounds left by the separation. & 105 & 7.8 & 149077\\
\hline
1978 & The Deer Hunter & An in-depth examination of the ways in which the Vietnam War impacts and disrupts the lives of several friends in a small steel mill town in Pennsylvania. & 183 & 8.1 & 345812\\
\hline
1977 & Annie Hall & Alvy Singer, a divorced Jewish comedian, reflects on his relationship with ex-lover Annie Hall, an aspiring nightclub singer, which ended abruptly just like his previous marriages. & 93 & 8.0 & 269864\\
\hline
1976 & Rocky & A small-time Philadelphia boxer gets a supremely rare chance to fight the world heavyweight champion in a bout in which he strives to go the distance for his self-respect. & 120 & 8.1 & 596064\\
\hline
1975 & One Flew Over the Cuckoo's Nest & In the Fall of 1963, a Korean War veteran and criminal pleads insanity and is admitted to a mental institution, where he rallies up the scared patients against the tyrannical nurse. & 133 & 8.7 & 1025544\\
\hline
1974 & The Godfather Part II & The early life and career of Vito Corleone in 1920s New York City is portrayed, while his son, Michael, expands and tightens his grip on the family crime syndicate. & 202 & 9.0 & 1296287\\
\hline
1973 & The Sting & Two grifters team up to pull off the ultimate con. & 129 & 8.3 & 268855\\
\hline
1972 & The Godfather & The aging patriarch of an organized crime dynasty in postwar New York City transfers control of his clandestine empire to his reluctant youngest son. & 175 & 9.2 & 1901481\\
\hline
1971 & The French Connection & A pair of NYPD detectives in the Narcotics Bureau stumble onto a heroin smuggling ring based in Marseilles, but stopping them and capturing their leaders proves an elusive goal. & 104 & 7.7 & 127172\\
\hline
1970 & Patton & The World War II phase of the career of controversial American general George S. Patton. & 172 & 7.9 & 104759\\
\hline
1969 & Midnight Cowboy & A naive hustler travels from Texas to New York City to seek personal fortune, finding a new friend in the process. & 113 & 7.8 & 114643\\
\hline
1968 & Oliver! & After being sold to a mortician, young orphan Oliver Twist runs away and meets a group of boys trained to be pickpockets by an elderly mentor in 1830s London. & 153 & 7.4 & 39877\\
\hline
1967 & In the Heat of the Night & A black Philadelphia police detective is mistakenly suspected of a local murder while passing through a racially hostile Mississippi town, and after being cleared is reluctantly asked by the police chief to investigate the case. & 110 & 7.9 & 79174\\
\hline
1966 & A Man for All Seasons & The story of Sir Thomas More, who stood up to King Henry VIII when the King rejected the Roman Catholic Church to obtain a divorce and remarry. & 120 & 7.7 & 35778\\
\hline
1965 & The Sound of Music & A young novice is sent by her convent in 1930s Austria to become a governess to the seven children of a widowed naval officer. & 172 & 8.1 & 243695\\
\hline
1964 & My Fair Lady & In 1910s London, snobbish phonetics professor Henry Higgins agrees to a wager that he can make crude flower girl, Eliza Doolittle, presentable in high society. & 170 & 7.8 & 98206\\
\hline
1963 & Tom Jones & The romantic and chivalrous adventures of adopted bastard Tom Jones in 18th-century England. & 129 & 6.4 & 13656\\
\hline
1962 & Lawrence of Arabia & The story of T.E. Lawrence, the English officer who successfully united and led the diverse, often warring, Arab tribes during World War I in order to fight the Turks. & 218 & 8.3 & 300206\\
\hline
1961 & West Side Story & Two youngsters from rival New York City gangs fall in love, but tensions between their respective friends build toward tragedy. & 153 & 7.6 & 117149\\
\hline
1960 & The Apartment & A Manhattan insurance clerk tries to rise in his company by letting its executives use his apartment for trysts, but complications and a romance of his own ensue. & 125 & 8.3 & 185997\\
\hline
1959 & Ben-Hur & After a Jewish prince is betrayed and sent into slavery by a Roman friend in 1st-century Jerusalem, he regains his freedom and comes back for revenge. & 212 & 8.1 & 244571\\
\hline
1958 & Gigi & Weary of the conventions of Parisian society, a rich playboy and a youthful courtesan-in-training enjoy a platonic friendship which may not stay platonic for long. & 115 & 6.6 & 23661\\
\hline
1957 & The Bridge on the River Kwai & British POWs are forced to build a railway bridge across the river Kwai for their Japanese captors in occupied Burma, not knowing that the allied forces are planning a daring commando raid through the jungle to destroy it. & 161 & 8.1 & 225080\\
\hline
1956 & Around the World in 80 Days & A Victorian Englishman bets that with the new steamships and railways he can circumnavigate the globe in eighty days. & 175 & 6.7 & 28541\\
\hline
1955 & Marty & A middle-aged butcher and a school teacher who have given up on the idea of love meet at a dance and fall for each other. & 90 & 7.7 & 25439\\
\hline
1954 & On the Waterfront & An ex-prize fighter turned New Jersey longshoreman struggles to stand up to his corrupt union bosses, including his older brother, as he starts to connect with the grieving sister of one of the syndicate's victims. & 108 & 8.1 & 158133\\
\hline
1953 & From Here to Eternity & At a U.S. Army base in 1941 Hawaii, a private is cruelly punished for not boxing on his unit's team, while his commanding officer's wife and top aide begin a tentative affair. & 118 & 7.6 & 48694\\
\hline
1952 & The Greatest Show on Earth & The dramatic lives of trapeze artists, a clown, and an elephant trainer are told against a background of circus spectacle. & 152 & 6.6 & 15303\\
\hline
1951 & An American in Paris & Three friends struggle to find work in Paris. Things become more complicated when two of them fall in love with the same woman. & 114 & 7.2 & 35167\\
\hline
1950 & All About Eve & A seemingly timid but secretly ruthless ingÃ©nue insinuates herself into the lives of an aging Broadway star and her circle of theater friends. & 138 & 8.2 & 133688\\
\hline
1949 & All the King's Men & The rise and fall of a corrupt politician, who makes his friends richer and retains power by dint of a populist appeal. & 110 & 7.4 & 15732\\
\hline
1948 & Hamlet & Prince Hamlet struggles over whether or not he should kill his uncle, whom he suspects has murdered his father, the former king. & 154 & 7.6 & 17623\\
\hline
1947 & Gentleman's Agreement & A reporter pretends to be Jewish in order to cover a story on anti-Semitism, and personally discovers the true depths of bigotry and hatred. & 118 & 7.2 & 17089\\
\hline
1946 & The Best Years of Our Lives & Three World War II veterans, two of them traumatized or disabled, return home to the American midwest to discover that they and their families have been irreparably changed. & 170 & 8.1 & 66831\\
\hline
1945 & The Lost Weekend & The desperate life of a chronic alcoholic is followed through a four-day drinking bout. & 101 & 7.9 & 38519\\
\hline
1944 & Going My Way & When young Father O'Malley arrives at St. Dominic's, old Father Fitzgibbon doesn't think much of the church's newest member. & 126 & 7.0 & 12563\\
\hline
1942 & Casablanca & A cynical expatriate American cafe owner struggles to decide whether or not to help his former lover and her fugitive husband escape the Nazis in French Morocco. & 102 & 8.5 & 581806\\
\hline
1942 & Mrs. Miniver & A British family struggles to survive the first months of World War II. & 134 & 7.6 & 18538\\
\hline
1941 & How Green Was My Valley & At the turn of the century in a Welsh mining village, the Morgans, he stern, she gentle, raise coal-mining sons and hope their youngest will find a better life. & 118 & 7.7 & 25234\\
\hline
1940 & Rebecca & A self-conscious woman juggles adjusting to her new role as an aristocrat's wife and avoiding being intimidated by his first wife's spectral presence. & 130 & 8.1 & 140426\\
\hline
1939 & Gone with the Wind & American motion picture classic in which a manipulative woman and a roguish man conduct a turbulent romance during the Civil War and Reconstruction periods. & 238 & 8.2 & 321638\\
\hline
1938 & You Can't Take It with You & The son of a snobbish Wall Street banker becomes engaged to a woman from a good-natured but decidedly eccentric family, not realizing that his father is trying to force her family from their home for a real estate development. & 126 & 7.8 & 26727\\
\hline
1937 & The Life of Emile Zola & The biopic of the famous French muckraking writer and his involvement in fighting the injustice of the Dreyfus Affair. & 116 & 7.2 & 8596\\
\hline
1936 & The Great Ziegfeld & The ups and downs of Florenz Ziegfeld Jr., famed producer of extravagant stage revues, are portrayed. & 176 & 6.6 & 8565\\
\hline
1935 & Mutiny on the Bounty & First mate Fletcher Christian leads a revolt against his sadistic commander, Captain Bligh, in this classic seafaring adventure, based on the real-life 1789 mutiny. & 132 & 7.6 & 23910\\
\hline
1934 & It Happened One Night & A renegade reporter trailing a young runaway heiress for a big story joins her on a bus heading from Florida to New York, and they end up stuck with each other when the bus leaves them behind at one of the stops. & 105 & 8.1 & 106896\\
\hline
1933 & Cavalcade & A portrayal of the triumphs and tragedies of two English families, the upper-crust Marryots and the working-class Bridgeses, from 1899 to 1933. & 112 & 5.8 & 5541\\
\hline
1932 & Grand Hotel & A group of very different individuals staying at a luxurious hotel in Berlin deal with each of their respective dramas. & 112 & 7.3 & 20092\\
\hline
1931 & Cimarron & A newspaper editor settles in an Oklahoma boom town with his reluctant wife at the end of the nineteenth century. & 123 & 5.8 & 6569\\
\hline
1930 & All Quiet on the Western Front & A German youth eagerly enters World War I, but his enthusiasm wanes as he gets a firsthand view of the horror. & 152 & 8.1 & 65328\\
\hline
1929 & The Broadway Melody & A pair of sisters from the vaudeville circuit try to make it big time on Broadway, but matters of the heart complicate the attempt. & 100 & 5.6 & 7606\\
\hline
1927 & Sunrise & A sophisticated city woman seduces a farmer and convinces him to murder his wife and join her in the city, but he ends up rekindling his romance with his wife when he changes his mind at the last moment. & 94 & 8.1 & 52219\\
\hline
1927 & Wings & Two young men, one rich, one middle class, who are in love with the same woman, become fighter pilots in World War I. & 144 & 7.6 & 13624\\
\hline
\end{tabular}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{group-activity-2-3}{%
\section{Group Activity 2}\label{group-activity-2-3}}

\hypertarget{a.-scrape-the-names-scores-and-years-of-most-popular-tv-shows-on-imdb}{%
\subsection{a. Scrape the names, scores, and years of most popular TV shows on IMDB:}\label{a.-scrape-the-names-scores-and-years-of-most-popular-tv-shows-on-imdb}}

\href{http://www.imdb.com/chart/tvmeter}{www.imdb.com/chart/tvmeter}. Create a data frame called \texttt{tvshows} with four variables
(\texttt{rank}, \texttt{name}, \texttt{score}, \texttt{year})

Note:

It's easier to use the \texttt{SelectorGadget} and choose the CSS selectors wisely. Otherwise, you'll have more cleaning to do after scraping.

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{page }\OtherTok{\textless{}{-}} \FunctionTok{read\_html}\NormalTok{(}\StringTok{"http://www.imdb.com/chart/tvmeter"}\NormalTok{)}
\NormalTok{name }\OtherTok{\textless{}{-}}\NormalTok{ page }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{".titleColumn a"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_text}\NormalTok{()}

\NormalTok{ranks }\OtherTok{\textless{}{-}}\NormalTok{ page }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{".velocity"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{str\_extract}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{as.numeric}\NormalTok{()}

\NormalTok{scores }\OtherTok{\textless{}{-}}\NormalTok{  page }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{".imdbRating"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{str\_extract}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+.}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{as.numeric}\NormalTok{()}

\CommentTok{\# If you don\textquotesingle{}t use the gadget selector carefully, }
\CommentTok{\# more string manipulation is needed here}

\NormalTok{years }\OtherTok{\textless{}{-}}\NormalTok{ page }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{"a+ .secondaryInfo"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_text}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{str\_extract}\NormalTok{(}\StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{d+"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{as.numeric}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tvshows }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{rank =}\NormalTok{ ranks,}
  \AttributeTok{name =}\NormalTok{ name,}
  \AttributeTok{score =}\NormalTok{ scores,}
  \AttributeTok{year =}\NormalTok{ years}
\NormalTok{)}

\NormalTok{tvshows}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 100 x 4
    rank name            score  year
   <dbl> <chr>           <dbl> <dbl>
 1     1 The Diplomat      8.2  2023
 2     2 Succession        8.8  2018
 3     3 Beef              8.2  2023
 4     4 Ted Lasso         8.8  2020
 5     5 The Mandalorian   8.7  2019
 6     6 Citadel           6.5  2023
 7     7 Love & Death      7.6  2023
 8     8 The Night Agent   7.5  2023
 9     9 Jury Duty         8.5  2023
10    10 Yellowjackets     7.9  2021
# ... with 90 more rows
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{group-activity-3-1}{%
\section{Group Activity 3}\label{group-activity-3-1}}

\hypertarget{a.-scrape-the-first-table-in-list_of_nasa_missions-wiki-page.-additionally-use-janitorclean_names-to-clean-the-column-names-and-store-the-resulting-table-as-nasa_missions.csv-in-your-working-folder.}{%
\subsection{\texorpdfstring{a. Scrape the first table in \texttt{List\_of\_NASA\_missions} wiki page. Additionally, use \texttt{janitor::clean\_names()} to clean the column names and store the resulting table as \texttt{NASA\_missions.csv} in your working folder.}{a. Scrape the first table in List\_of\_NASA\_missions wiki page. Additionally, use janitor::clean\_names() to clean the column names and store the resulting table as NASA\_missions.csv in your working folder.}}\label{a.-scrape-the-first-table-in-list_of_nasa_missions-wiki-page.-additionally-use-janitorclean_names-to-clean-the-column-names-and-store-the-resulting-table-as-nasa_missions.csv-in-your-working-folder.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# extract data from }
\CommentTok{\# the first table on the page}
\NormalTok{wiki\_NASA }\OtherTok{\textless{}{-}} \StringTok{"https://en.wikipedia.org/wiki/List\_of\_NASA\_missions"}
\NormalTok{NASA\_missions }\OtherTok{\textless{}{-}} \FunctionTok{bow}\NormalTok{(wiki\_NASA) }\SpecialCharTok{\%\textgreater{}\%}\FunctionTok{scrape}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{"table"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
\NormalTok{  .[[}\DecValTok{1}\NormalTok{]] }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_table}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
\NormalTok{  janitor}\SpecialCharTok{::}\FunctionTok{clean\_names}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Exporting data to CSV}
\NormalTok{readr}\SpecialCharTok{::}\FunctionTok{write\_csv}\NormalTok{(NASA\_missions, }\StringTok{"NASA\_missions.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.-now-write-a-code-snippet-to-scrape-all-the-urls-from-the-anchor-tags-a-on-a-given-wikipedia-page-convert-the-relative-urls-to-absolute-urls-and-store-the-results-in-a-tibble-and-save-it-as-websites.csv-in-your-working-folder.}{%
\subsection{\texorpdfstring{b. Now, write a code snippet to scrape all the URLs from the anchor tags \texttt{(\textless{}a\textgreater{})} on a given Wikipedia page, convert the relative URLs to absolute URLs, and store the results in a tibble and save it as \texttt{websites.csv} in your working folder.}{b. Now, write a code snippet to scrape all the URLs from the anchor tags (\textless a\textgreater) on a given Wikipedia page, convert the relative URLs to absolute URLs, and store the results in a tibble and save it as websites.csv in your working folder.}}\label{b.-now-write-a-code-snippet-to-scrape-all-the-urls-from-the-anchor-tags-a-on-a-given-wikipedia-page-convert-the-relative-urls-to-absolute-urls-and-store-the-results-in-a-tibble-and-save-it-as-websites.csv-in-your-working-folder.}}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# extract URLs}
\NormalTok{websites }\OtherTok{\textless{}{-}}  \FunctionTok{bow}\NormalTok{(wiki\_NASA) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{scrape}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{html\_nodes}\NormalTok{(}\StringTok{"a"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{html\_attr}\NormalTok{(}\StringTok{"href"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{url\_absolute}\NormalTok{(}\StringTok{"https://en.wikipedia.org/"}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Exporting data to CSV}
\NormalTok{readr}\SpecialCharTok{::}\FunctionTok{write\_csv}\NormalTok{(websites, }\StringTok{"websites.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{part-extra-materials}{%
\part*{Extra Materials}\label{part-extra-materials}}
\addcontentsline{toc}{part}{Extra Materials}

\hypertarget{helpful-r-codes}{%
\chapter{Helpful R codes}\label{helpful-r-codes}}

\hypertarget{residual-plots-in-ggplot2}{%
\section{\texorpdfstring{Residual Plots in \texttt{ggplot2}}{Residual Plots in ggplot2}}\label{residual-plots-in-ggplot2}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# residual size plot}
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{bac }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/BAC.csv"}\NormalTok{)}

\NormalTok{fit }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data =}\NormalTok{ bac) }\CommentTok{\# fit the model}
\NormalTok{bac}\SpecialCharTok{$}\NormalTok{predicted }\OtherTok{\textless{}{-}} \FunctionTok{predict}\NormalTok{(fit)   }\CommentTok{\# Save the predicted values}
\NormalTok{bac}\SpecialCharTok{$}\NormalTok{residuals }\OtherTok{\textless{}{-}} \FunctionTok{residuals}\NormalTok{(fit) }\CommentTok{\# Save the residual values}

\FunctionTok{ggplot}\NormalTok{(bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ BAC)) }\SpecialCharTok{+}
  \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{, }\AttributeTok{se =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{color =} \StringTok{"lightgrey"}\NormalTok{) }\SpecialCharTok{+}     \CommentTok{\# regression line  }
  \FunctionTok{geom\_segment}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{xend =}\NormalTok{ Beers, }\AttributeTok{yend =}\NormalTok{ predicted), }\AttributeTok{alpha =}\NormalTok{ .}\DecValTok{2}\NormalTok{) }\SpecialCharTok{+}      \CommentTok{\# draw line from point to line}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =} \FunctionTok{abs}\NormalTok{(residuals), }\AttributeTok{size =} \FunctionTok{abs}\NormalTok{(residuals))) }\SpecialCharTok{+}  \CommentTok{\# size of the points}
  \FunctionTok{scale\_color\_continuous}\NormalTok{(}\AttributeTok{low =} \StringTok{"green"}\NormalTok{, }\AttributeTok{high =} \StringTok{"red"}\NormalTok{) }\SpecialCharTok{+}   
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"BAC Vs. Beers"}\NormalTok{) }\SpecialCharTok{+}\CommentTok{\# color of the points mapped to residual size {-} green smaller, red larger}
  \FunctionTok{guides}\NormalTok{(}\AttributeTok{color =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{size =} \ConstantTok{FALSE}\NormalTok{) }\SpecialCharTok{+}                             \CommentTok{\# Size legend removed}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ predicted), }\AttributeTok{shape =} \DecValTok{1}\NormalTok{, }\AttributeTok{size =} \DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{breaks=}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{)}\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text=}\FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size=}\DecValTok{10}\NormalTok{),}
        \AttributeTok{axis.title=}\FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size=}\DecValTok{10}\NormalTok{,}\AttributeTok{face=}\StringTok{"bold"}\NormalTok{),}
        \AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{10}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{nice_R_codes_files/figure-latex/unnamed-chunk-1-1}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ residuals)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{legend.position =} \StringTok{"none"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_segment}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{xend =}\NormalTok{ Beers, }\AttributeTok{yend =} \DecValTok{0}\NormalTok{), }\AttributeTok{alpha =}\NormalTok{ .}\DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_continuous}\NormalTok{(}\AttributeTok{low =} \StringTok{"green"}\NormalTok{, }\AttributeTok{high =} \StringTok{"red"}\NormalTok{) }\SpecialCharTok{+}   
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =} \FunctionTok{abs}\NormalTok{(residuals), }\AttributeTok{size =} \FunctionTok{abs}\NormalTok{(residuals))) }\SpecialCharTok{+}  \CommentTok{\# size of the points}
  \FunctionTok{geom\_hline}\NormalTok{(}\AttributeTok{yintercept =} \DecValTok{0}\NormalTok{, }\AttributeTok{col =} \StringTok{"blue"}\NormalTok{, }\AttributeTok{size =} \FloatTok{0.5}\NormalTok{, }\AttributeTok{linetype =} \StringTok{"dashed"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"BAC Vs. Beers"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Beers"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Residuals"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust=}\FloatTok{0.5}\NormalTok{, }\AttributeTok{size=}\DecValTok{7}\NormalTok{, }\AttributeTok{face=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{nice_R_codes_files/figure-latex/unnamed-chunk-2-1}

\hypertarget{plotly-codes}{%
\section{Plotly codes}\label{plotly-codes}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(plotly)}

\NormalTok{cell\_phone\_data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Type =} \FunctionTok{c}\NormalTok{(}\StringTok{"Android"}\NormalTok{, }\StringTok{"iPhone"}\NormalTok{, }\StringTok{"Blackberry"}\NormalTok{, }\StringTok{"Non Smartphone"}\NormalTok{, }\StringTok{"No Cell Phone"}\NormalTok{),}
  \AttributeTok{Frequency =} \FunctionTok{c}\NormalTok{(}\DecValTok{458}\NormalTok{, }\DecValTok{437}\NormalTok{, }\DecValTok{141}\NormalTok{, }\DecValTok{924}\NormalTok{, }\DecValTok{293}\NormalTok{)}
\NormalTok{)}

\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Gender =} \FunctionTok{c}\NormalTok{(}\StringTok{"Female"}\NormalTok{, }\StringTok{"Male"}\NormalTok{),}
  \AttributeTok{In\_a\_relationship =} \FunctionTok{c}\NormalTok{(}\DecValTok{32}\NormalTok{, }\DecValTok{10}\NormalTok{),}
  \AttributeTok{Its\_complicated =} \FunctionTok{c}\NormalTok{(}\DecValTok{12}\NormalTok{, }\DecValTok{7}\NormalTok{),}
  \AttributeTok{Single =} \FunctionTok{c}\NormalTok{(}\DecValTok{63}\NormalTok{, }\DecValTok{45}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot\_ly}\NormalTok{(cell\_phone\_data, }\AttributeTok{labels =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Type, }\AttributeTok{values =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Frequency, }\AttributeTok{type =} \StringTok{\textquotesingle{}pie\textquotesingle{}}\NormalTok{,}
        \AttributeTok{textposition =} \StringTok{\textquotesingle{}inside\textquotesingle{}}\NormalTok{, }\AttributeTok{hoverinfo =} \StringTok{\textquotesingle{}label+value+percent\textquotesingle{}}\NormalTok{,}
        \AttributeTok{textinfo =} \StringTok{\textquotesingle{}label\textquotesingle{}}\NormalTok{, }\AttributeTok{insidetextfont =} \FunctionTok{list}\NormalTok{(}\AttributeTok{color =} \StringTok{\textquotesingle{}\#FFFFFF\textquotesingle{}}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{layout}\NormalTok{(}\AttributeTok{title =} \StringTok{\textquotesingle{}Cell Phone Usage\textquotesingle{}}\NormalTok{,}
         \AttributeTok{xaxis =} \FunctionTok{list}\NormalTok{(}\AttributeTok{showgrid =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{zeroline =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{showticklabels =} \ConstantTok{FALSE}\NormalTok{),}
         \AttributeTok{yaxis =} \FunctionTok{list}\NormalTok{(}\AttributeTok{showgrid =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{zeroline =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{showticklabels =} \ConstantTok{FALSE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot\_ly}\NormalTok{(data, }\AttributeTok{x =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Gender, }\AttributeTok{y =} \SpecialCharTok{\textasciitilde{}}\NormalTok{In\_a\_relationship, }\AttributeTok{type =} \StringTok{\textquotesingle{}bar\textquotesingle{}}\NormalTok{, }\AttributeTok{name =} \StringTok{\textquotesingle{}In a relationship\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{add\_trace}\NormalTok{(}\AttributeTok{y =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Its\_complicated, }\AttributeTok{name =} \StringTok{\textquotesingle{}It}\SpecialCharTok{\textbackslash{}\textquotesingle{}}\StringTok{s complicated\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{add\_trace}\NormalTok{(}\AttributeTok{y =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Single, }\AttributeTok{name =} \StringTok{\textquotesingle{}Single\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{layout}\NormalTok{(}\AttributeTok{yaxis =} \FunctionTok{list}\NormalTok{(}\AttributeTok{title =} \StringTok{\textquotesingle{}Number of People\textquotesingle{}}\NormalTok{), }\AttributeTok{barmode =} \StringTok{\textquotesingle{}group\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}


  \bibliography{book.bib,packages.bib}

\end{document}
