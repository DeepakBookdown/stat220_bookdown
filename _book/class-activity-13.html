<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 19 Class Activity 13 | Stat 220 Introduction to Data Science</title>
<meta name="author" content="Deepak Bastola">
<meta name="description" content="# load the necessary libraries library(stringr) library(dplyr) library(readr) In this tutorial, we will learn about string manipulations using regular expressions and the stringr library in R. We...">
<meta name="generator" content="bookdown 0.33 with bs4_book()">
<meta property="og:title" content="Chapter 19 Class Activity 13 | Stat 220 Introduction to Data Science">
<meta property="og:type" content="book">
<meta property="og:description" content="# load the necessary libraries library(stringr) library(dplyr) library(readr) In this tutorial, we will learn about string manipulations using regular expressions and the stringr library in R. We...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 19 Class Activity 13 | Stat 220 Introduction to Data Science">
<meta name="twitter:description" content="# load the necessary libraries library(stringr) library(dplyr) library(readr) In this tutorial, we will learn about string manipulations using regular expressions and the stringr library in R. We...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!--
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      const headers = document.querySelectorAll('.book .book-body h1, .book .book-body h2, .book .book-body h3');
      const tocLinks = document.querySelectorAll('.book .book-body .tocify .tocify-item a');
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const id = entry.target.getAttribute('id');
              const link = Array.from(tocLinks).find((link) => link.getAttribute('href').endsWith('#' + id));
              if (link) {
                tocLinks.forEach((l) => l.classList.remove('active'));
                link.classList.add('active');
              }
            }
          });
        },
        { threshold: 0.5 }
      );

      headers.forEach((header) => observer.observe(header));
    });
    </script>

    --><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Stat 220 Introduction to Data Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Course overview</a></li>
<li class="book-part">Set-up Instructions</li>
<li><a class="" href="rstudio.html"><span class="header-section-number">1</span> What is R, RStudio, and RMarkdown?</a></li>
<li><a class="" href="assignments.html"><span class="header-section-number">2</span> Assignments in Stat 220</a></li>
<li><a class="" href="software.html"><span class="header-section-number">3</span> Software in Stat 220</a></li>
<li><a class="" href="github.html"><span class="header-section-number">4</span> GitHub Guide for Students in Stat 220</a></li>
<li><a class="" href="r-markdown-syntax.html"><span class="header-section-number">5</span> R Markdown Syntax</a></li>
<li class="book-part">Class Activities</li>
<li><a class="" href="class-activity-0.html"><span class="header-section-number">6</span> Class Activity 0</a></li>
<li><a class="" href="class-activity-1.html"><span class="header-section-number">7</span> Class Activity 1</a></li>
<li><a class="" href="class-activity-2.html"><span class="header-section-number">8</span> Class Activity 2</a></li>
<li><a class="" href="class-activity-3.html"><span class="header-section-number">9</span> Class Activity 3</a></li>
<li><a class="" href="class-activity-4.html"><span class="header-section-number">10</span> Class Activity 4</a></li>
<li><a class="" href="class-activity-5.html"><span class="header-section-number">11</span> Class Activity 5</a></li>
<li><a class="" href="class-activity-6.html"><span class="header-section-number">12</span> Class Activity 6</a></li>
<li><a class="" href="class-activity-7.html"><span class="header-section-number">13</span> Class Activity 7</a></li>
<li><a class="" href="class-activity-8.html"><span class="header-section-number">14</span> Class Activity 8</a></li>
<li><a class="" href="class-activity-9.html"><span class="header-section-number">15</span> Class Activity 9</a></li>
<li><a class="" href="class-activity-10.html"><span class="header-section-number">16</span> Class Activity 10</a></li>
<li><a class="" href="class-activity-11.html"><span class="header-section-number">17</span> Class Activity 11</a></li>
<li><a class="" href="class-activity-12.html"><span class="header-section-number">18</span> Class Activity 12</a></li>
<li><a class="active" href="class-activity-13.html"><span class="header-section-number">19</span> Class Activity 13</a></li>
<li><a class="" href="class-activity-14.html"><span class="header-section-number">20</span> Class Activity 14</a></li>
<li><a class="" href="class-activity-15.html"><span class="header-section-number">21</span> Class Activity 15</a></li>
<li><a class="" href="class-activity-16.html"><span class="header-section-number">22</span> Class Activity 16</a></li>
<li><a class="" href="class-activity-17.html"><span class="header-section-number">23</span> Class Activity 17</a></li>
<li class="book-part">Extra Materials</li>
<li><a class="" href="helpful-r-codes.html"><span class="header-section-number">24</span> Helpful R codes</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="class-activity-13" class="section level1" number="19">
<h1>
<span class="header-section-number">19</span> Class Activity 13<a class="anchor" aria-label="anchor" href="#class-activity-13"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb343"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the necessary libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span></code></pre></div>
<p>In this tutorial, we will learn about string manipulations using regular expressions and the <code>stringr</code> library in R. We will cover different examples and use cases to help you understand the concepts and functions related to string manipulation.</p>
<div id="group-activity-1" class="section level2" number="19.1">
<h2>
<span class="header-section-number">19.1</span> Group Activity 1<a class="anchor" aria-label="anchor" href="#group-activity-1"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb344"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"My SSN is 593-29-9502 and my age is 55"</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">"My phone number is 612-643-1539"</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="st">"My old SSN number is 39532 9423."</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_flatten.html">str_flatten</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">z</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">". "</span><span class="op">)</span></span></code></pre></div>
<div id="a.-what-characters-in-x-will-str_view_allx--..--find" class="section level3" number="19.1.1">
<h3>
<span class="header-section-number">19.1.1</span> a. What characters in <code>x</code> will <code>str_view_all(x, "-..-")</code> find?<a class="anchor" aria-label="anchor" href="#a.-what-characters-in-x-will-str_view_allx--..--find"><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em></p>
<p>The pattern searches for a dash, followed by any two characters, followed by another dash. In x, it finds “-29-” which is a part of the SSN.</p>
<div class="sourceCode" id="cb345"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"-..-"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ My SSN is 593&lt;-29-&gt;9502 and my age is 55</code></pre>
</details>
</div>
<div id="b.-what-pattern-will-str_view_allx--d2--find" class="section level3" number="19.1.2">
<h3>
<span class="header-section-number">19.1.2</span> b. What pattern will <code>str_view_all(x, "-\\d{2}-")</code> find?<a class="anchor" aria-label="anchor" href="#b.-what-pattern-will-str_view_allx--d2--find"><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em></p>
<p>The pattern searches for a dash, followed by two digits, followed by another dash. In x, it finds the same “-29-” as in the previous example, which is a part of the SSN.</p>
<div class="sourceCode" id="cb347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"-\\d{2}-"</span><span class="op">)</span>  <span class="co"># "-" then 2 digits then "-"</span></span></code></pre></div>
<pre><code>[1] │ My SSN is 593&lt;-29-&gt;9502 and my age is 55</code></pre>
</details>
</div>
<div id="c.-what-pattern-will-str_view_allout-d2.-find" class="section level3" number="19.1.3">
<h3>
<span class="header-section-number">19.1.3</span> c. What pattern will <code>str_view_all(out, "\\d{2}\\.*")</code> find?<a class="anchor" aria-label="anchor" href="#c.-what-pattern-will-str_view_allout-d2.-find"><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em></p>
<p>The pattern searches for two digits followed by an optional period. In out, it finds “55” and “55.”, which represent the age in the first sentence.</p>
<div class="sourceCode" id="cb349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">out</span>, <span class="st">"\\s\\d{2}\\."</span><span class="op">)</span>  <span class="co"># 2 digits then "."</span></span></code></pre></div>
<pre><code>[1] │ My SSN is 593-29-9502 and my age is&lt; 55.&gt; My phone number is 612-643-1539. My old SSN number is 39532 9423.</code></pre>
</details>
</div>
<div id="d.-use-str_view_all-to-determine-the-correct-regex-pattern-to-identify-all-ssn-in-out" class="section level3" number="19.1.4">
<h3>
<span class="header-section-number">19.1.4</span> d. Use <code>str_view_all</code> to determine the correct regex pattern to identify all SSN in <code>out</code><a class="anchor" aria-label="anchor" href="#d.-use-str_view_all-to-determine-the-correct-regex-pattern-to-identify-all-ssn-in-out"><i class="fas fa-link"></i></a>
</h3>
<p>We can get the SSN with the usual format (###-##-####) with a regex that has 3, 2, and 4 digits separated by a dash.</p>
<div class="sourceCode" id="cb351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">out</span>,<span class="st">"([0-8]\\d{2})-(\\d{2})-(\\d{4})"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ My SSN is &lt;593-29-9502&gt; and my age is 55. My phone number is 612-643-1539. My old SSN number is 39532 9423.</code></pre>
<p>This misses the oddly formatted SSN in the third entry. Rather than use a dash, we can specify the divider as <code>[-\\s]?</code> which allows either 0 or 1 occurrences of either a dash or space divider:</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">out</span>,<span class="st">"([0-8]\\d{2})[-\\s]?(\\d{2})[-\\s]?(\\d{4})"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ My SSN is &lt;593-29-9502&gt; and my age is 55. My phone number is 612-643-1539. My old SSN number is &lt;39532 9423&gt;.</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em></p>
<p>The first pattern finds the SSNs in the standard format (###-##-####) by searching for 3 digits, a dash, 2 digits, another dash, and 4 digits. The second pattern does the same but allows for a space instead of a dash as a divider. It finds all SSNs in out, including the oddly formatted one in the third sentence.</p>
</details>
</div>
<div id="e.-write-a-regular-expression-to-extract-dates-in-the-format-yyyy-mm-dd-from-a-given-text." class="section level3" number="19.1.5">
<h3>
<span class="header-section-number">19.1.5</span> e. Write a regular expression to extract dates in the format YYYY-MM-DD from a given text.<a class="anchor" aria-label="anchor" href="#e.-write-a-regular-expression-to-extract-dates-in-the-format-yyyy-mm-dd-from-a-given-text."><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">date_pattern</span> <span class="op">&lt;-</span> <span class="st">"\\d{4}-\\d{2}-\\d{2}"</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="st">"The event will take place on 2023-07-20 and end on 2023-07-22."</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">date_pattern</span><span class="op">)</span></span></code></pre></div>
<pre><code>[[1]]
[1] "2023-07-20" "2023-07-22"</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> The pattern searches for 4 digits, a dash, 2 digits, another dash, and 2 digits. In the given text, it finds the dates “2023-07-20” and “2023-07-22”.</p>
</details>
</div>
<div id="f.-write-a-regular-expression-to-extract-all-words-that-start-with-a-capital-letter-in-a-given-text." class="section level3" number="19.1.6">
<h3>
<span class="header-section-number">19.1.6</span> f. Write a regular expression to extract all words that start with a capital letter in a given text.<a class="anchor" aria-label="anchor" href="#f.-write-a-regular-expression-to-extract-all-words-that-start-with-a-capital-letter-in-a-given-text."><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">capital_pattern</span> <span class="op">&lt;-</span> <span class="st">"\\b[A-Z][a-zA-Z]*\\b"</span></span>
<span><span class="va">text</span> <span class="op">&lt;-</span> <span class="st">"Alice and Bob went to the Market to buy some Groceries."</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">capital_pattern</span><span class="op">)</span></span></code></pre></div>
<pre><code>[[1]]
[1] "Alice"     "Bob"       "Market"    "Groceries"</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> The pattern searches for a word boundary, followed by an uppercase letter, and then any sequence of letters. In the given text, it finds the words “Alice”, “Bob”, “Market”, and “Groceries”.</p>
</details>
</div>
<div id="g-optional-create-a-regular-expression-to-match-urls-considering-both-http-and-https-protocols." class="section level3" number="19.1.7">
<h3>
<span class="header-section-number">19.1.7</span> g (Optional) Create a regular expression to match URLs, considering both http and https protocols.<a class="anchor" aria-label="anchor" href="#g-optional-create-a-regular-expression-to-match-urls-considering-both-http-and-https-protocols."><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_pattern</span> <span class="op">&lt;-</span> <span class="st">"https?://(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}(?::\\d+)?(?:/\\S*)?"</span></span>
<span><span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"https://www.example.com"</span>, <span class="st">"http://example.org/resource?query=123"</span>, <span class="st">"invalid_url.example.com"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view</a></span><span class="op">(</span><span class="va">urls</span>, <span class="va">url_pattern</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ &lt;https://www.example.com&gt;
[2] │ &lt;http://example.org/resource?query=123&gt;</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> The pattern searches for either “<a href="http://" class="uri">http://</a>” or “<a href="https://" class="uri">https://</a>”, followed by one or more domain segments separated by periods, an optional port number, and an optional path. In the given urls, it matches the first two valid URLs but not the invalid one.</p>
<p><code>https?://:</code> This part matches the URL protocol (http or https). The <code>?</code> means that the preceding character “s” is optional.
<code>(?:[a-zA-Z0-9-]+\\.)+:</code> This part matches the domain name. The <code>(?: )</code> is a non-capturing group, and <code>[a-zA-Z0-9-]+</code> matches one or more alphanumeric characters or hyphens. The <code>\\</code>. matches a period (dot), and the + outside the group means that the pattern inside the group should occur one or more times. <code>[a-zA-Z]{2,}:</code> This part matches the top-level domain (TLD), such as .com or .org, which has at least two alphabetic characters. <code>(?::\\d+)?:</code> This part is an optional group that matches a colon followed by one or more digits. It is used to specify a port number in the URL. The ? outside the group makes it optional. <code>(?:/\\S*)?:</code> This part is another optional group that matches a forward slash followed by zero or more non-whitespace characters (representing the URL path). Again, the <code>?</code> outside the group makes it optional.</p>
</details><hr>
</div>
</div>
<div id="group-activity-2" class="section level2" number="19.2">
<h2>
<span class="header-section-number">19.2</span> Group Activity 2<a class="anchor" aria-label="anchor" href="#group-activity-2"><i class="fas fa-link"></i></a>
</h2>
<div id="a.-lets-deal-with-a-number-string-that-is-longer-than-9-digits." class="section level3" number="19.2.1">
<h3>
<span class="header-section-number">19.2.1</span> a. Let’s deal with a number string that is longer than 9 digits.<a class="anchor" aria-label="anchor" href="#a.-lets-deal-with-a-number-string-that-is-longer-than-9-digits."><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ssn</span> <span class="op">&lt;-</span> <span class="st">"([0-8]\\d{2})[-\\s]?(\\d{2})[-\\s]?(\\d{4})"</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"123-45-67890"</span>,<span class="st">"1123 45 6789"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="va">ssn</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ &lt;123-45-6789&gt;0
[2] │ 1&lt;123 45 6789&gt;</code></pre>
<p>This example captures a 9-digit string as an SSN, but these strings are longer than 9 digits and may not represent an SSN. One way to deal with this is to use the negative lookbehind <code>?&lt;!</code> and negative lookahead <code>?!</code> operators to ensure that the identified 9-digit string does not have a leading 0 or does not contain more digits.</p>
<p>If we “look behind” from the start of the SSN, we should not see another digit:</p>
<div class="sourceCode" id="cb363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">"(?&lt;!\\d)([0-8]\\d{2})[-\\.\\s]?(\\d{2})[-\\.\\s]?(\\d{4})"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ &lt;123-45-6789&gt;0
[2] │ 1123 45 6789</code></pre>
<p>And if we “look ahead” from the end of the SSN, we should not see another digit:</p>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">test</span>, <span class="st">"(?&lt;!\\d)([0-8]\\d{2})[-\\.\\s]?(\\d{2})[-\\.\\s]?(\\d{4})(?!\\d)"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ 123-45-67890
[2] │ 1123 45 6789</code></pre>
<p>For parts b and c, consider the following string.</p>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">string1</span> <span class="op">&lt;-</span> <span class="st">"100 dollars 100 pesos"</span></span></code></pre></div>
</div>
<div id="b.-explain-why-the-following-matches-the-first-100-and-not-the-second." class="section level3" number="19.2.2">
<h3>
<span class="header-section-number">19.2.2</span> b. Explain why the following matches the first 100 and not the second.<a class="anchor" aria-label="anchor" href="#b.-explain-why-the-following-matches-the-first-100-and-not-the-second."><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em> It looks for one or more digits followed by a space and <code>dollars</code></p>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view</a></span><span class="op">(</span><span class="va">string1</span>, <span class="st">"\\d+(?= dollars)"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ &lt;100&gt; dollars 100 pesos</code></pre>
</details>
</div>
<div id="c.-explain-why-the-following-matches-the-second-100-and-not-the-first." class="section level3" number="19.2.3">
<h3>
<span class="header-section-number">19.2.3</span> c. Explain why the following matches the second 100 and not the first.<a class="anchor" aria-label="anchor" href="#c.-explain-why-the-following-matches-the-second-100-and-not-the-first."><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em> It looks for one or more digits not followed by either a digit or space followed by <code>dollars</code></p>
<div class="sourceCode" id="cb370"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view</a></span><span class="op">(</span><span class="va">string1</span>, <span class="st">"\\d+(?!\\d| dollars)"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ 100 dollars &lt;100&gt; pesos</code></pre>
<p>For parts d and e, please take a look at <code>string2</code>.</p>
<div class="sourceCode" id="cb372"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">string2</span> <span class="op">&lt;-</span> <span class="st">"USD100 PESO100"</span></span></code></pre></div>
</details>
</div>
<div id="d.-explain-why-the-following-matches-the-first-100-and-not-the-second." class="section level3" number="19.2.4">
<h3>
<span class="header-section-number">19.2.4</span> d. Explain why the following matches the first 100 and not the second.<a class="anchor" aria-label="anchor" href="#d.-explain-why-the-following-matches-the-first-100-and-not-the-second."><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em> It looks for exactly 3 digits preceded by USD</p>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view</a></span><span class="op">(</span><span class="va">string2</span>, <span class="st">"(?&lt;=USD)\\d{3}"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ USD&lt;100&gt; PESO100</code></pre>
</details>
</div>
<div id="e.-explain-why-the-following-matches-the-second-100-and-not-the-first." class="section level3" number="19.2.5">
<h3>
<span class="header-section-number">19.2.5</span> e. Explain why the following matches the second 100 and not the first.<a class="anchor" aria-label="anchor" href="#e.-explain-why-the-following-matches-the-second-100-and-not-the-first."><i class="fas fa-link"></i></a>
</h3>
<details><summary class="answer">
Click for answer
</summary><p><em>answer:</em> It looks for exactly 3 digits that is not preceded by USD</p>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view</a></span><span class="op">(</span><span class="va">string2</span>, <span class="st">"(?&lt;!USD)\\d{3}"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] │ USD100 PESO&lt;100&gt;</code></pre>
</details><hr>
</div>
</div>
<div id="group-activity-3" class="section level2" number="19.3">
<h2>
<span class="header-section-number">19.3</span> Group Activity 3<a class="anchor" aria-label="anchor" href="#group-activity-3"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tweets</span><span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/deepbas/statdatasets/main/TrumpTweetData.csv"</span><span class="op">)</span></span></code></pre></div>
<div id="a.-what-proportion-of-tweets-text-mention-america" class="section level3" number="19.3.1">
<h3>
<span class="header-section-number">19.3.1</span> a. What proportion of tweets (text) mention “America”?<a class="anchor" aria-label="anchor" href="#a.-what-proportion-of-tweets-text-mention-america"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tweets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>, <span class="st">"America"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<pre><code># A tibble: 1 × 1
    prop
   &lt;dbl&gt;
1 0.0926</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> About 10% of tweets mention “America”.</p>
</details>
</div>
<div id="b.-what-proportion-of-these-tweets-include-great" class="section level3" number="19.3.2">
<h3>
<span class="header-section-number">19.3.2</span> b. What proportion of these tweets include “great”?<a class="anchor" aria-label="anchor" href="#b.-what-proportion-of-these-tweets-include-great"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tweets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>, <span class="st">"America"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>, <span class="st">"great"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<pre><code># A tibble: 1 × 1
   prop
  &lt;dbl&gt;
1   0.4</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> About 40% of tweets mention “great”.</p>
</details>
</div>
<div id="c.-what-proportion-of-the-tweets-mention" class="section level3" number="19.3.3">
<h3>
<span class="header-section-number">19.3.3</span> c. What proportion of the tweets mention <code>@</code>?<a class="anchor" aria-label="anchor" href="#c.-what-proportion-of-the-tweets-mention"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tweets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>ct <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count</a></span><span class="op">(</span><span class="va">text</span>, <span class="st">"@"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">ct</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ct</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 1 × 1
   prop
  &lt;dbl&gt;
1 0.317</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> About 32% of tweets mention <code>@</code>.</p>
</details>
</div>
<div id="d.-remove-the-tweets-having-mentions-." class="section level3" number="19.3.4">
<h3>
<span class="header-section-number">19.3.4</span> d. Remove the tweets having mentions <code>@</code>.<a class="anchor" aria-label="anchor" href="#d.-remove-the-tweets-having-mentions-."><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Mentions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"@[^\\s]+"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tw_noMentions</span> <span class="op">&lt;-</span> <span class="va">tweets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>textNoMentions <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">Mentions</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tw_noMentions</span><span class="op">$</span><span class="va">text</span><span class="op">[</span><span class="fl">38</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "My daughter @IvankaTrump will be on @Greta tonight at 7pm. Enjoy! https://t.co/QySC5PLFMy"</code></pre>
<div class="sourceCode" id="cb386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tw_noMentions</span><span class="op">$</span><span class="va">textNoMentions</span><span class="op">[</span><span class="fl">38</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "My daughter  will be on  tonight at 7pm. Enjoy! https://t.co/QySC5PLFMy"</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> <code>@:</code> This part of the pattern matches the “@” symbol, which usually indicates the beginning of a mention in a tweet.
[^\s]+: This part of the pattern matches one or more characters that are NOT whitespaces. The <code>^</code> inside the square brackets <code>[ ]</code> negates the character class (meaning it matches any character that is NOT in the specified class). The double backslash <code>\\</code> is used to escape the backslash in the R string, so the pattern <code>\\s</code> represents the whitespace character class <code>\s</code>. Finally, the + indicates that the pattern should match one or more occurrences of the non-whitespace characters. Together, this regular expression pattern <code>@[^\\s]+</code> matches any mention in a tweet, which usually starts with “@” followed by one or more non-whitespace characters.</p>
</details>
</div>
<div id="e.-what-poportion-of-tweets-originated-from-an-iphone" class="section level3" number="19.3.5">
<h3>
<span class="header-section-number">19.3.5</span> e. What poportion of tweets originated from an iPhone?<a class="anchor" aria-label="anchor" href="#e.-what-poportion-of-tweets-originated-from-an-iphone"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tweets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">source</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">count</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">source</span> <span class="op">==</span> <span class="st">"iPhone"</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 1 × 3
  source count  prop
  &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;
1 iPhone   628 0.415</code></pre>
<details><summary class="answer">
Click for answer
</summary><p><em>Answer:</em> About 42% of the tweets originated from an iPhone.</p>
</details>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="class-activity-12.html"><span class="header-section-number">18</span> Class Activity 12</a></div>
<div class="next"><a href="class-activity-14.html"><span class="header-section-number">20</span> Class Activity 14</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#class-activity-13"><span class="header-section-number">19</span> Class Activity 13</a></li>
<li>
<a class="nav-link" href="#group-activity-1"><span class="header-section-number">19.1</span> Group Activity 1</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#a.-what-characters-in-x-will-str_view_allx--..--find"><span class="header-section-number">19.1.1</span> a. What characters in x will str_view_all(x, "-..-") find?</a></li>
<li><a class="nav-link" href="#b.-what-pattern-will-str_view_allx--d2--find"><span class="header-section-number">19.1.2</span> b. What pattern will str_view_all(x, "-\\d{2}-") find?</a></li>
<li><a class="nav-link" href="#c.-what-pattern-will-str_view_allout-d2.-find"><span class="header-section-number">19.1.3</span> c. What pattern will str_view_all(out, "\\d{2}\\.*") find?</a></li>
<li><a class="nav-link" href="#d.-use-str_view_all-to-determine-the-correct-regex-pattern-to-identify-all-ssn-in-out"><span class="header-section-number">19.1.4</span> d. Use str_view_all to determine the correct regex pattern to identify all SSN in out</a></li>
<li><a class="nav-link" href="#e.-write-a-regular-expression-to-extract-dates-in-the-format-yyyy-mm-dd-from-a-given-text."><span class="header-section-number">19.1.5</span> e. Write a regular expression to extract dates in the format YYYY-MM-DD from a given text.</a></li>
<li><a class="nav-link" href="#f.-write-a-regular-expression-to-extract-all-words-that-start-with-a-capital-letter-in-a-given-text."><span class="header-section-number">19.1.6</span> f. Write a regular expression to extract all words that start with a capital letter in a given text.</a></li>
<li><a class="nav-link" href="#g-optional-create-a-regular-expression-to-match-urls-considering-both-http-and-https-protocols."><span class="header-section-number">19.1.7</span> g (Optional) Create a regular expression to match URLs, considering both http and https protocols.</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#group-activity-2"><span class="header-section-number">19.2</span> Group Activity 2</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#a.-lets-deal-with-a-number-string-that-is-longer-than-9-digits."><span class="header-section-number">19.2.1</span> a. Let’s deal with a number string that is longer than 9 digits.</a></li>
<li><a class="nav-link" href="#b.-explain-why-the-following-matches-the-first-100-and-not-the-second."><span class="header-section-number">19.2.2</span> b. Explain why the following matches the first 100 and not the second.</a></li>
<li><a class="nav-link" href="#c.-explain-why-the-following-matches-the-second-100-and-not-the-first."><span class="header-section-number">19.2.3</span> c. Explain why the following matches the second 100 and not the first.</a></li>
<li><a class="nav-link" href="#d.-explain-why-the-following-matches-the-first-100-and-not-the-second."><span class="header-section-number">19.2.4</span> d. Explain why the following matches the first 100 and not the second.</a></li>
<li><a class="nav-link" href="#e.-explain-why-the-following-matches-the-second-100-and-not-the-first."><span class="header-section-number">19.2.5</span> e. Explain why the following matches the second 100 and not the first.</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#group-activity-3"><span class="header-section-number">19.3</span> Group Activity 3</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#a.-what-proportion-of-tweets-text-mention-america"><span class="header-section-number">19.3.1</span> a. What proportion of tweets (text) mention “America”?</a></li>
<li><a class="nav-link" href="#b.-what-proportion-of-these-tweets-include-great"><span class="header-section-number">19.3.2</span> b. What proportion of these tweets include “great”?</a></li>
<li><a class="nav-link" href="#c.-what-proportion-of-the-tweets-mention"><span class="header-section-number">19.3.3</span> c. What proportion of the tweets mention @?</a></li>
<li><a class="nav-link" href="#d.-remove-the-tweets-having-mentions-."><span class="header-section-number">19.3.4</span> d. Remove the tweets having mentions @.</a></li>
<li><a class="nav-link" href="#e.-what-poportion-of-tweets-originated-from-an-iphone"><span class="header-section-number">19.3.5</span> e. What poportion of tweets originated from an iPhone?</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/class_activity_13.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/class_activity_13.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Stat 220 Introduction to Data Science</strong>" was written by Deepak Bastola. It was last built on 2023-05-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
